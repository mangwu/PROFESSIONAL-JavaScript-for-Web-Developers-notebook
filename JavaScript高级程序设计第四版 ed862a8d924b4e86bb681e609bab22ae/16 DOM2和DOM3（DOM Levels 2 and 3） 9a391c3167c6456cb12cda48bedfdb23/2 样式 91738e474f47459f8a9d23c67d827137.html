<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>2. 样式</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-opaquegray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="91738e47-4f47-459f-8a9d-23c67d827137" class="page sans"><header><img class="page-cover-image" src="https://www.notion.so/images/page-cover/gradients_10.jpg" style="object-position:center 40%"/><div class="page-header-icon page-header-icon-with-cover"><span class="icon">🚙</span></div><h1 class="page-title">2. 样式</h1></header><div class="page-body"><p id="1f86a545-a068-4556-bed6-d1880b94e454" class="">HTML中的样式有三种定义方式：外部样式表（通过&lt;link&gt;元素），文档样式表（使用&lt;style&gt;元素）和元素特定样式（使用style属性）。DOM2 Style为这三种应用样式的机制都提供了API</p><div id="78a2a4a1-21de-42df-b6ab-3ff47ebacb26" class="column-list"><div id="526b652f-daf9-4584-8a41-d581d8a25c55" style="width:18.75%" class="column"><nav id="2f6ac8ae-b63b-478b-9f07-a98d8bb89185" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#b794ab5b-9c3b-44b0-a328-c1b1a0f65ff3">2.1 存取元素样式（Accessing Element Styles）</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#80b7c145-dce3-4a4c-a48a-0fb4768860aa">2.1.1 DOM样式属性和方法（Style Properties and Methods）</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#ff024f80-b094-48a0-92b2-2fe28c9d7a03">2.1.2 计算样式（Computed Styles）</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#b824935f-5efb-4dcb-af60-7d6defba51a3">2.2 操作样式表（Working with Style Sheets）</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#9d805094-6896-435a-8ea7-acf439013c95">2.2.1 CSS规则</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#57c4f3ea-0642-45a2-821e-ce9ec45e5463">2.2.2 创建规则 删除规则</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#cb094b7c-6c62-4c96-8964-7e6c72be6ee2">2.3 元素尺寸（Element Dimensions）</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#01a822e7-df36-49b4-8986-04e917fb9eb8">2.3.1 偏移尺寸（offset dimensions）</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#05644793-5dfd-4ccc-ad8d-98cd95d64e4a">2.3.2 客户端尺寸（client dimensions）</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#73b64a0c-abb8-4f83-b823-4b63320ba000">2.3.3 滚动尺寸（scroll dimensions）</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#6eaab896-b469-4df5-ae2b-7614413d9185">2.3.4 确定元素尺寸</a></div></nav><p id="5cf0c789-f8ac-4965-9a80-4b40cb83ab9c" class="">
</p></div><div id="79454ea5-c129-4c95-9aa4-65ab0f0de518" style="width:81.25%" class="column"><h1 id="b794ab5b-9c3b-44b0-a328-c1b1a0f65ff3" class="">2.1 存取元素样式（Accessing Element Styles）</h1><ul id="2a96a2f7-78b3-4531-9216-5b5bec7b2bf6" class="bulleted-list"><li style="list-style-type:disc">任何支持<code>style</code>属性的HTML元素都会在JavaScript中有一个对应的<code>style</code>属性，元素节点的<code>style</code> 属性并不是直接定义在<code>Element</code> 接口，也不是定义在<code>HTMLElement</code> 接口中的，而是定义在<code>ElementCSSInlineStyle</code> 中，并由<code>HTMLElement</code> 接口包含（includes），<a href="https://w3c.github.io/csswg-drafts/cssom/#dom-elementcssinlinestyle-style">CSSOM规范</a>对此进行了定义，如下<pre id="227dcb2c-db1e-436f-83f2-92eb70c070ef" class="code code-wrap"><code>interface mixin ElementCSSInlineStyle {
  [SameObject, PutForwards=cssText] readonly attribute CSSStyleDeclaration style;
};

HTMLElement includes ElementCSSInlineStyle;
SVGElement includes ElementCSSInlineStyle;
MathMLElement includes ElementCSSInlineStyle;</code></pre><ul id="6f2f0f3f-425a-4ccc-bb67-98f9639e7254" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>style</code> ，该属性定义在<code>ElementCSSInlineStyle</code> （元素CSS内联样式）中，是一个<code>CSSStyleDeclaration</code> 类型的实例，其中包含<strong>通过HTML </strong><strong><code>style</code></strong><strong> </strong>属性为元素设置的所有样式信息，但<strong>不包括</strong>通过层叠机制从文档样式和外部样式中继承来的样式；<a href="https://w3c.github.io/csswg-drafts/cssom/#cssstyledeclaration"><code>CSSStyleDeclaration</code></a><a href="https://w3c.github.io/csswg-drafts/cssom/#cssstyledeclaration"> </a>接口定义如下</span><pre id="3590e9e3-5a31-4425-81a5-fb2d3c964b3f" class="code code-wrap"><code>[Exposed=Window]
interface CSSStyleDeclaration {
  [CEReactions] attribute CSSOMString cssText;
  readonly attribute unsigned long length;
  getter CSSOMString item(unsigned long index);
  CSSOMString getPropertyValue(CSSOMString property);
  CSSOMString getPropertyPriority(CSSOMString property);
  [CEReactions] undefined setProperty(CSSOMString property, [LegacyNullToEmptyString] CSSOMString value, optional [LegacyNullToEmptyString] CSSOMString priority = &quot;&quot;);
  [CEReactions] CSSOMString removeProperty(CSSOMString property);
  readonly attribute CSSRule? parentRule;
  [CEReactions] attribute [LegacyNullToEmptyString] CSSOMString cssFloat;
};</code></pre><ul id="817b588f-fee0-4e3c-90bc-e722bcd6a25c" class="bulleted-list"><li style="list-style-type:disc">这个接口定义中的属性会在之后详细解释，明白这个接口能让开发者通过元素的<code>style</code> 属性再次访问到具体的CSS样式属性即可</li></ul></li></ul></li></ul><ul id="aa70223e-defa-4d88-8347-574ee32d4fe5" class="bulleted-list"><li style="list-style-type:disc">HTML style属性中的CSS属性在JavaScript style对象中都有对应的属性，因为CSS属性名称使用连字符表示法（用连字符<code>-</code> 分隔两个单词，如<code>background-image</code>），所以在JavaScript中这些属性必须转换成驼峰大小形式，下表是几个CSS属性与style对象中的等价属性的对比<table id="4fcb8e8c-e1d2-4e25-8361-e1b2acdc6b3c" class="simple-table"><tbody><tr id="1c3915b2-d427-49d9-9969-36bdcdb365a1"><td id="|^TY" class="" style="width:190.15625px">CSS属性</td><td id="=F_=" class="">JavaScript属性</td></tr><tr id="caab5c37-3f74-4bfb-b6d8-25a1c7764ee1"><td id="|^TY" class="" style="width:190.15625px">background-image</td><td id="=F_=" class="">style.backgroundImage</td></tr><tr id="cdcd6a5a-3d91-4078-b997-041c53e36842"><td id="|^TY" class="" style="width:190.15625px">color</td><td id="=F_=" class="">style.color</td></tr><tr id="bd2b60a2-7b7c-4ce1-9e8f-6f8d420620a8"><td id="|^TY" class="" style="width:190.15625px">display</td><td id="=F_=" class="">style.display</td></tr><tr id="77344021-7b02-4abe-b775-ff361736121c"><td id="|^TY" class="" style="width:190.15625px">font-family</td><td id="=F_=" class="">style.fontFamily</td></tr><tr id="8e63ced1-6d73-454e-af8c-96b5df950853"><td id="|^TY" class="" style="width:190.15625px">border-block-start-style</td><td id="=F_=" class="">style.borderBlockStartStyle</td></tr></tbody></table></li></ul><ul id="9d571e6e-d47d-42a0-8a25-97682b781eda" class="bulleted-list"><li style="list-style-type:disc">大多数属性名都会这样直接转换，但是有一个CSS属性名称不能直接转换，它就是<code>float</code> ，因为<code>float</code> 是JavaScript的保留字，所以不能用作属性名，DOM2 Style规定它在style对象中对应的属性应该是<code>cssFloat</code> （直接作为属性定义在<code>CSSStyleDeclaration</code> 接口中  ） <pre id="7f5d3e4c-167e-41b4-8dd9-e261c05dc884" class="code code-wrap"><code>&lt;div&gt;Hello, world&lt;/div&gt;

const div = document.querySelector(&quot;div&quot;);
// 设置背景颜色
div.style.backgroundColor = &quot;red&quot;;
// 修改大小
div.style.width = &quot;200px&quot;;
div.style.height = &quot;100px&quot;;
// 设置边框
div.style.border = &quot;1px solid black&quot;;
div.style.borderRadius = &quot;5px&quot;;
// 设置文字样式
div.style.display = &quot;inline-flex&quot;;
div.style.alignItems = &quot;center&quot;;
div.style.justifyContent = &quot;center&quot;;
div.style.color = &quot;rgb(255,255,255)&quot;;
div.style.fontWeight = &quot;700&quot;;
// 设置指针覆盖样式
div.style.cursor = &quot;pointer&quot;;</code></pre><figure id="f6f08b6e-e0a8-4f77-bc28-5902b39d96bc" class="image"><a href="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/inline_styles.png"><img style="width:220px" src="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/inline_styles.png"/></a></figure><ul id="8b5d4fb5-6af3-4257-9997-cc417d5bbb64" class="bulleted-list"><li style="list-style-type:circle">通过HTML属性（attribute）<code>style</code>设置的值也可以通过JavaScript中的元素<code>style</code>对象获取</li></ul><ul id="c0a78fab-c095-428e-94e3-ea03675ce81e" class="bulleted-list"><li style="list-style-type:circle">如果元素上没有<code>style</code> 属性，则<code>style</code> 对象包含所有可能的CSS属性的<strong>空值</strong>（外部样式表不会影响<code>style</code> 对象中的属性值）</li></ul></li></ul><h2 id="80b7c145-dce3-4a4c-a48a-0fb4768860aa" class="">2.1.1 DOM样式属性和方法（Style Properties and Methods）</h2><ul id="7c9078fe-b7d8-47df-bd35-5d68e9dac9a4" class="bulleted-list"><li style="list-style-type:disc">DOM2 Style规范在<code>style</code>对象上定义了一些属性和方法，这些属性和方法提供了元素<code>style</code> 属性的信息并支持修改</li></ul><ul id="95203721-105c-43a2-92bd-82e70a69c227" class="bulleted-list"><li style="list-style-type:disc"><code>style</code> 属性定义在<code>ElementCSSInlineStyle</code> 接口上，它是一个<a href="https://w3c.github.io/csswg-drafts/cssom/#cssstyledeclaration"><code>CSSStyleDeclaration</code></a> 类型的属性，<code>HTMLElement</code> 接口实现了<code>ElementCSSInlineStyle</code> ，CSSOM规范上的<a href="https://w3c.github.io/csswg-drafts/cssom/#dom-elementcssinlinestyle-style"><strong>The </strong></a><a href="https://w3c.github.io/csswg-drafts/cssom/#dom-elementcssinlinestyle-style"><code><strong>ElementCSSInlineStyle</strong></code></a><a href="https://w3c.github.io/csswg-drafts/cssom/#dom-elementcssinlinestyle-style"><strong> Mixin</strong></a><strong> </strong>如下<pre id="ba887229-6859-4434-b620-1ee565577463" class="code"><code>interface mixin ElementCSSInlineStyle {
  [SameObject, PutForwards=cssText] readonly attribute CSSStyleDeclaration style;
};

HTMLElement includes ElementCSSInlineStyle;
SVGElement includes ElementCSSInlineStyle;
MathMLElement includes ElementCSSInlineStyle;</code></pre></li></ul><ul id="4c24e34d-269a-45fd-887e-26241becb2fb" class="bulleted-list"><li style="list-style-type:disc">CSSOM规范的<code>CSSStyleDeclaration</code> 如下<pre id="a5452701-523d-4ccd-83fe-c60a2829bef2" class="code"><code>[Exposed=Window]
interface CSSStyleDeclaration {
  [CEReactions] attribute CSSOMString cssText;
  readonly attribute unsigned long length;
  getter CSSOMString item(unsigned long index);
  CSSOMString getPropertyValue(CSSOMString property);
  CSSOMString getPropertyPriority(CSSOMString property);
  [CEReactions] undefined setProperty(CSSOMString property, [LegacyNullToEmptyString] CSSOMString value, optional [LegacyNullToEmptyString] CSSOMString priority = &quot;&quot;);
  [CEReactions] CSSOMString removeProperty(CSSOMString property);
  readonly attribute CSSRule? parentRule;
  [CEReactions] attribute [LegacyNullToEmptyString] CSSOMString cssFloat;
};</code></pre><ul id="8ad8f654-afa5-4cd3-8c87-d5102abb7a2c" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>cssText</code>，包含<code>style</code>属性中的css代码</span></li></ul><ul id="9c947baf-efdb-482f-ac5c-bd0cc3f80074" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>length</code> ,应用给元素的CSS属性数量</span></li></ul><ul id="4c1479ec-9f21-460d-a997-e1298f99a66b" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>parentRule</code> ，表示CSS信息的<code>CSSRule</code>对象（下一章讨论）</span></li></ul><ul id="1198191e-7de9-4406-914a-3b953018c521" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>cssFloat</code> ，<code>float</code> CSS属性的特殊别名</span></li></ul><ul id="556d18b3-d1c3-4b93-ab83-da91d678fbff" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>getPropertyValue(property)</code> ，返回给定CSS属性<code>property</code> 的值</span></li></ul><ul id="c53a9343-556c-4a88-8a1b-0278d51e7424" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>getPropertyPriority(property)</code> ，返回给定CSS属性的优先级，CSS属性使用了“!important”就返回&quot;important”未使用就返回空字符串</span></li></ul><ul id="7b35fc3b-8335-4b25-bef6-fc50864203d9" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>item(index)</code> ，返回用<code>index</code>标记的属性名，当<code>index</code>越界时返回空字符串</span></li></ul><ul id="6138bca7-1502-4185-a423-318bf2e198d5" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>removeProperty(propertyName)</code> ，从样式中删除CSS属性<code>propertyName</code> </span></li></ul><ul id="2fa2683e-3079-42de-a985-c7e1519e0752" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>setProperty(propertyName, value[, priority=&quot;&quot;])</code> ，设置CSS属性<code>propertyName</code> 的值为<code>value</code> ，<code>priority</code> 是”important”或空字符串</span></li></ul></li></ul><ul id="b85e07a9-0ac8-4670-ac39-30a3f4d14e46" class="bulleted-list"><li style="list-style-type:disc">通过<code>cssText</code> 属性可以存取样式的CSS代码<ul id="046841d6-38a5-4164-8a1e-6d927b3dc758" class="bulleted-list"><li style="list-style-type:circle">读模式下，cssText返回style属性CSS代码在浏览器内部的表示</li></ul><ul id="a3800a03-d830-4736-9e95-25df34e95cd2" class="bulleted-list"><li style="list-style-type:circle">写模式下，cssText赋值会重写整个<code>style</code> 属性的值，意味着之前通过<code>style</code> 属性设置的属性都会丢失（通过其他方式设置的不会消失）</li></ul><pre id="ac4e54c1-772e-4639-9eb2-d9ad1fffea52" class="code"><code>&lt;style&gt;
  p {
    background-color: bisque;
  }
&lt;/style&gt;
&lt;body&gt;
  &lt;p style=&quot;color: blueviolet; font-size: 22px&quot;&gt;Hello, mangwu&lt;/p&gt;
  &lt;script&gt;
    const p = document.querySelector(&quot;p&quot;);
    p.setAttribute(&quot;style&quot;, &quot;color: black; border: 1px solid gray&quot;);
    p.style.cssText = &quot;color: blue;&quot;;
  &lt;/script&gt;
&lt;/body&gt;</code></pre><figure id="19a2ecf0-d04d-43f9-a15e-edbad9fd8c57" class="image"><a href="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/cssText.png"><img style="width:432px" src="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/cssText.png"/></a></figure><ul id="e08068a4-bbdb-4427-8810-25c40c00b651" class="bulleted-list"><li style="list-style-type:circle">使用<code>setAttribute</code> 和赋值<code>cssText</code> 本质是一样的，都是对元素上的<code>style</code> 属性（attribute）进行修改</li></ul><ul id="9bcf2742-b32b-4c9a-b6db-3dd7687e70f6" class="bulleted-list"><li style="list-style-type:circle">而使用&lt;style&gt;标签对元素应用CSS是独立的，不受修改<code>style</code> 属性的影响</li></ul></li></ul><ul id="c131cea2-1e29-4597-837f-a2e0078cf732" class="bulleted-list"><li style="list-style-type:disc">通过<code>length</code> 和<code>item()</code> 方法可以迭代CSS属性，此时<code>style</code> 对象实际上变成了一个集合，也可以用中括号代替<code>item()</code> 取得相应的CSS属性名，这个属性名可以传递给<code>getPropertyValue()</code> 以取得属性的值<pre id="c088aadf-48fb-4f40-9920-256cf38b8271" class="code"><code>&lt;style&gt;
  p {
    background-color: bisque;
  }
&lt;/style&gt;
&lt;p style=&quot;color: blueviolet; font-size: 22px&quot;&gt;Hello, mangwu&lt;/p&gt;
&lt;script&gt;
  const p = document.querySelector(&quot;p&quot;);
  for (let i = 0; i &lt; p.style.length; i++) {
    console.log(p.style[i], &quot;:&quot;, p.style.getPropertyValue(p.style[i]));
  }
&lt;/script&gt;
// color : blueviolet
// font-size : 22px</code></pre><ul id="7bc92a9b-8651-4f22-a6e3-04e7927c3cf0" class="bulleted-list"><li style="list-style-type:circle">和<code>cssText</code> 属性一样，只会迭代元素上的<code>style</code> 属性</li></ul><ul id="319153fd-5a3e-42f7-9d46-c8b54d5e7c64" class="bulleted-list"><li style="list-style-type:circle"><code>p.style[i]</code> 可以替换成<code>p.style.item(i)</code> ，效果是一样的</li></ul></li></ul><ul id="f06bb57a-6a56-4706-bc18-efe9c23637b4" class="bulleted-list"><li style="list-style-type:disc"><code>setProperty()</code> 用于设置元素的CSS属性，如果元素上没有这个CSS属性，就会添加到这个元素上，有就会修改这个CSS属性的值为给定值，同时配合<code>getPropertyPriority()</code> ，可以设置CSS属性的优先级，目前只有两种优先级，一种就是优先应用的“important“，另一种就是按照顺序应用的空字符串<pre id="c900af09-58a1-47ac-af8b-d52cdc7b8fe0" class="code code-wrap"><code>&lt;style&gt;
  p {
    background-color: bisque !important;
		font-size: 16px !important;
  }
&lt;/style&gt;
&lt;p style=&quot;color: blueviolet; font-size: 22px&quot;&gt;Hello, mangwu&lt;/p&gt;
&lt;script&gt;
  const p = document.querySelector(&quot;p&quot;);
  p.style.setProperty(&quot;background&quot;, &quot;aqua&quot;, &quot;important&quot;);
  p.style.getPropertyPriority(&quot;background&quot;);
  for (let i = 0; i &lt; p.style.length; i++) {
    console.log(
      p.style[i],
      &quot;:&quot;,
      p.style.getPropertyValue(p.style[i]),
      p.style.getPropertyPriority(p.style[i])
    );
  }
&lt;/script&gt;
// 
// color : blueviolet 
// font-size : 22px
// background-image : initial important
// background-position-x : initial important
// background-position-y : initial important
// background-size : initial important
// background-repeat-x : initial important
// background-repeat-y : initial important
// background-attachment : initial important
// background-origin : initial important
// background-clip : initial important
// background-color : aqua important</code></pre><ul id="68c0c2d7-1922-4f94-9627-b7ee2c8bc68d" class="bulleted-list"><li style="list-style-type:circle">内联样式优先级高于外部样式</li></ul><ul id="1c30d9ad-cc59-4d92-a1d4-788a33eea4ad" class="bulleted-list"><li style="list-style-type:circle">使用important的外部样式优先级高于普通的内联样式（如上例中的font-size）</li></ul></li></ul><ul id="00201d75-db45-4ff1-a6eb-2a0d9d1657be" class="bulleted-list"><li style="list-style-type:disc"><code>removeProperty()</code> 用于从元素样式中删除指定的CSS属性，使用这个方法删除属性意味着会应用属性的默认（从其它样式表层叠继承的）样式，在不确定给定CSS属性的默认值是什么的时候可以使用这个方法，比如上面的例子删除<code>background</code> CSS属性后<pre id="3d80454d-2480-4136-9475-78d14720e254" class="code code-wrap"><code>p.style.removeProperty(&quot;background&quot;);</code></pre><ul id="c3e2bea8-3ce2-45b8-9ac4-3ce1f14169ad" class="bulleted-list"><li style="list-style-type:circle"><code>p</code> 元素的背景就变成<code>bisque</code> 色，这是从其它样式表层叠继承而来的</li></ul></li></ul><h2 id="ff024f80-b094-48a0-92b2-2fe28c9d7a03" class="">2.1.2 计算样式（Computed Styles）</h2><ul id="37b55f7a-cc56-433c-b706-106d10385bdb" class="bulleted-list"><li style="list-style-type:disc"><strong>计算样式</strong>就是一个元素或伪元素在应用<strong>活动样式表（active stylesheets）</strong>并解析这些值可能包含的任何基本计算后报告元素的<strong>所有</strong> CSS 属性的值</li></ul><ul id="e532cbd0-ece0-403c-8c2f-a13f3a6c3af5" class="bulleted-list"><li style="list-style-type:disc"><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/resolved_value">MDN</a>和<a href="https://drafts.csswg.org/cssom/#resolved-values">CSS2.2</a>有关于<strong>解析值（Computed Value）</strong>的解释<blockquote id="e2077b98-08e8-4658-b108-d5904f3736f7" class="">CSS 属性的<strong>解析值</strong>（<strong>resolved value</strong>）是 <a href="https://developer.mozilla.org/zh-CN/docs/Web/API/Window/getComputedStyle"><code>getComputedStyle()</code></a>返回的值。对于大多数属性，它是<strong>计算值</strong><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/computed_value"><code>computed value</code></a>，但对于一些旧属性（包括宽度和高度），它是<strong>应用值</strong><a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/used_value"><code>used value</code></a>。 ——MDN</blockquote><blockquote id="900b3332-3dac-42e5-a695-a23ed0f78f22" class="">一个 CSS 属性的<strong>计算值</strong>是指这个属性在由父类转向子类的继承中的值。它通过指定值计算出来：<ul id="4dbad7f4-1dca-4bf6-be7a-fe7d4ae1431b" class="bulleted-list"><li style="list-style-type:disc">处理特殊的值 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/inherit"><code>inherit</code></a>，<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/initial"><code>initial</code></a>， <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/unset"><code>unset</code></a>和 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/revert"><code>revert</code></a><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/revert"> </a><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/revert">(en-US)</a>。</li></ul><ul id="0fdd2ac3-b491-4e5a-b760-56ff7e9a974d" class="bulleted-list"><li style="list-style-type:disc">进行计算，以达到属性摘要中“计算值”行中描述的值。  ——MDN</li></ul></blockquote><blockquote id="0ce1ef2a-07e8-44c7-814a-b679f7cfce7d" class="">CSS 属性的<strong>应用值（used value）</strong>是完成所有计算后最终使用的值<p id="b2cf78f3-dd0c-41ad-81e6-d9468451ff09" class="">…</p><p id="949d2842-80b8-4ea1-b932-86dbad9fc993" class="">计算出 CSS 属性的最终值有三个步骤。首先，<a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/specified_value">指定值 specified value</a> 取自样式层叠 (选取样式表里权重最高的规则), <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/inheritance">继承</a> (如果属性可以继承则取父元素的值)，或者默认值。然后，按规范算出 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/computed_value">计算值 computed value (en-US)</a> (例如， <code>span</code> 指定 <code>position: absolute</code> 后<code>display</code> 变为 <code>block</code>)。最后，计算布局 (尺寸比如 <code>auto</code> 或 百分数 换算为像素值 )，结果即 <strong>应用值 used value</strong>。这些步骤是在内部完成的，脚本只能用 <a href="https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle">window.getComputedStyle (en-US)</a> 获得最终的应用值。 </p><p id="54d1b9d0-a2de-423f-b825-1af3e810f056" class="">…</p><p id="50c62ef9-1043-4ff2-983d-3a4549306d16" class="">CSS 2.0 只定义了 <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/computed_value">计算值 computed value (en-US)</a> 作为属性计算的最后一步。CSS 2.1 引进了定义明显不同的的应用值，这样当父元素的<strong>计算值为百分数</strong>时子元素可以显式地继承其高宽。对于不依赖于布局的 CSS 属性 (例如display, font-size, line-height) 计算值与应用值一样，否则就会不一样  ——MDN</p></blockquote><blockquote id="3d9f5c95-a248-4a27-af2c-c3569f0bfa69" class="">已用值原则上是用于呈现的值，但用户代理可能无法在给定环境中使用该值。例如，用户代理可能只能呈现整数像素宽度的边界，因此可能必须使用近似计算出的宽度，或者用户代理可能被迫只使用黑白阴影而不是全色。<strong>实际值（actual value）</strong>是对<strong>应用值</strong>使用任何<strong>近似</strong>后使用的值。——<a href="https://www.w3.org/TR/CSS22/cascade.html#actual-value">CSS22</a></blockquote><figure id="77e14d30-9275-4c7b-81c3-4aa97661a53a" class="image"><a href="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/CSS_Value.png"><img style="width:3112px" src="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/CSS_Value.png"/></a></figure><ul id="dfec3321-0c24-483c-ad60-286d58fb1289" class="bulleted-list"><li style="list-style-type:circle">关于CSS Value的例子的具体例子，可以查看<a href="https://www.w3.org/TR/css-cascade/#stages-examples">css-cascade-stages-examples</a></li></ul></li></ul><ul id="877c7b96-fd18-4fc8-aa99-0b322e4aa9fe" class="bulleted-list"><li style="list-style-type:disc"><code>style</code> 对象中包含支持<code>style</code> 属性的元素为这个属性设置的样式信息，但是不包括从其它样式表层叠继承的同样影响该元素的样式信息<ul id="be382335-0fe2-4712-9a16-dff81ef5ed40" class="bulleted-list"><li style="list-style-type:circle">DOM2 Style在<code>document.defaultView</code> （是window对象的代理）上增加了<code>getComputedStyle()</code> 方法，在<a href="https://drafts.csswg.org/cssom/#dom-window-getcomputedstyle">CSSOM规范</a>中IDL定义如下<pre id="9cb25d58-ce4e-4ace-a07c-ec86024ea562" class="code code-wrap"><code>partial interface Window {
  [NewObject] CSSStyleDeclaration getComputedStyle(Element elt, optional CSSOMString? pseudoElt);
};</code></pre><ul id="2a364dcb-d6ca-4b04-970a-c1a7aed743f1" class="bulleted-list"><li style="list-style-type:square"><code>elt</code> 就是要取得的计算样式（称为解析样式更好）的元素</li></ul><ul id="4618e81f-7b4d-40ea-bad9-1d264ef2cb3f" class="bulleted-list"><li style="list-style-type:square"><code>pseudoElt</code> 可选参数，伪元素字符串，如果不需要查询伪元素，第二个参数可以传<code>null</code> </li></ul><ul id="1601f6f4-6eb8-4ce7-82a5-7830ee6a8c75" class="bulleted-list"><li style="list-style-type:square">返回值：一个<code>CSSStyleDeclaration</code>对象，包含元素的解析样式，注意它是一个<strong>只读的实时的</strong><code>CSSStyleDeclaration</code>对象，当元素样式更改时，它会自动更新本身</li></ul></li></ul><ul id="9f01766a-e76d-4a67-aa27-ccce141d0dcf" class="bulleted-list"><li style="list-style-type:circle">该方法返回的解析样式的属性值（property value）要么是计算值，要么是应用值，它们都遵守各自在<a href="https://www.w3.org/TR/css-cascade/">css-cascade</a>规范中CSS属性定义表中的<a href="https://www.w3.org/TR/css-cascade/#computed"><em>Computed value</em></a><em> </em>行的描述<ul id="f5e4b34d-be4d-47d5-9633-96102bab55b0" class="bulleted-list"><li style="list-style-type:square">但是实际上不同的浏览器返回的解析样式的值会有些许区别，比如火狐和Safari会把所有颜色值都转换伪RGB格式，而Opera会把所有颜色值都转换为十六进制表示法</li></ul><ul id="4a943087-d2d4-4fe4-8533-2110da42550c" class="bulleted-list"><li style="list-style-type:square">解析样式还包含浏览器内部样式表中的信息，因此有默认值的CSS属性会出现在解析样式里，例如<code>visibility</code>属性在所有浏览器都有默认值，但不同浏览器设置的值不一样，有些是”visible”，有些是“inherit”</li></ul><ul id="0d5f1193-dbd2-4e18-a98e-02cf571d6051" class="bulleted-list"><li style="list-style-type:square">不能假定CSS的属性的默认值在所有浏览器中都一样，需要元素具有默认值，一定要在样式表中手动指定</li></ul></li></ul><figure class="block-color-blue_background callout" style="white-space:pre-wrap;display:flex" id="fec32499-39b5-41c3-a925-bff6248d49f1"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%">注意在许多在线的演示代码中，<code>getComputedStyle</code>是通过 <code>document.defaultView</code> 对象来调用的。大部分情况下，这是不需要的，因为可以直接通过<code>window</code>对象调用。但有一种情况，你必需要使用 <code>defaultView</code>, 那是在 firefox3.6 上访问子框架内的样式。</div></figure></li></ul><ul id="02cd4a05-1a94-47ff-837b-e589a760c343" class="bulleted-list"><li style="list-style-type:disc">例子<pre id="703bca76-c817-4769-b72c-6edd3067e7ce" class="code code-wrap"><code>&lt;style&gt;
  #custom {
    color: antiquewhite;
  }
&lt;/style&gt;
  &lt;body&gt;
    &lt;p
      style=&quot;
        background-color: black;
        border: 0.5rem solid seagreen;
        width: auto;
      &quot;
      id=&quot;custom&quot;
    &gt;
      Hello, mangwu
    &lt;/p&gt;
    &lt;p id=&quot;default&quot;&gt;Hello, mangwu&lt;/p&gt;
    &lt;div&gt;Hello, mangwu&lt;/div&gt;
    &lt;script&gt;
      const custom = document.querySelector(&quot;#custom&quot;);
      const div = document.querySelector(&quot;div&quot;);
      const defaultP = document.querySelector(&quot;#default&quot;);

      const customCssStyle = getComputedStyle(custom);
      const divCssStyle = getComputedStyle(div);
      const defaultPCssStyle = getComputedStyle(defaultP);

      for (const item of defaultPCssStyle) {
        if (defaultPCssStyle[item] !== divCssStyle[item]) {
          console.log(item, &quot;:&quot;, defaultPCssStyle[item]);
        }
      }
			// margin-block-end : 16px
			// margin-block-start : 16px
			// margin-bottom : 16px
			// margin-top : 16px
      console.log(customCssStyle.backgroundColor); // rgb(0, 0, 0)
      console.log(customCssStyle.border); // 8px solid rgb(46, 139, 87)
      console.log(customCssStyle.color); // rgb(250, 235, 215)
      console.log(customCssStyle.width); // 1888px
      console.log(custom.style.width); // auto
    &lt;/script&gt;
  &lt;/body&gt;</code></pre><ul id="19943756-3dab-44c9-926e-53a6b7803769" class="bulleted-list"><li style="list-style-type:circle">p元素作为块级元素有自己的一些对齐样式（margin相关），属于<strong><em>user agent stylesheet</em></strong>（用户代理样式）</li></ul><ul id="800a810b-8b6f-41ee-8376-445031077466" class="bulleted-list"><li style="list-style-type:circle">使用<code>getComputedStyle</code> 获取到的解析样式长度为346（谷歌浏览器109.0.5414.75，火狐浏览器108.0.2为354），大部分值都是默认初始值，可以通过打印观察到颜色值都解析成了<code>rgb()</code> 形式，长度值都解析成了<code>px</code> 单位形式</li></ul></li></ul><h1 id="b824935f-5efb-4dcb-af60-7d6defba51a3" class="">2.2 操作样式表（Working with Style Sheets）</h1><ul id="e8f8085d-4d04-404d-82f6-cf1d2cd29f3e" class="bulleted-list"><li style="list-style-type:disc">上面一节简述了元素的<code>style</code> 属性，它控制着元素的内联CSS样式</li></ul><ul id="46052ea7-436f-44ca-b15a-3ed93bf3956e" class="bulleted-list"><li style="list-style-type:disc">而通过&lt;link&gt;和&lt;style&gt;这两个元素引入的样式表，需要其它接口进行表示，它们表示的样式表使用通用样式表类型，即<code>CSSStyleSheet</code> ，而访问这些通用样式表类型对象的属性定义在<code>Document</code> 上，是一个<a href="https://w3c.github.io/csswg-drafts/cssom/#stylesheetlist"><code>StyleSheetList</code></a> 类型的<code>styleSheets</code> 属性，在<a href="https://w3c.github.io/csswg-drafts/cssom/#dom-documentorshadowroot-stylesheets">CSSOM规范</a>中定义如下<pre id="0c5abe74-1523-42df-82fe-5006793d4fc8" class="code code-wrap"><code>partial interface mixin DocumentOrShadowRoot {
  [SameObject] readonly attribute StyleSheetList styleSheets;
  attribute ObservableArray&lt;CSSStyleSheet&gt; adoptedStyleSheets;
};</code></pre><ul id="e9c7a7a5-0fb6-489e-bbef-9ed6d690c53f" class="bulleted-list"><li style="list-style-type:circle">在15.DOM扩展的<a href="../15%20DOM%E6%89%A9%E5%B1%95%208bdc6a4c3bb24a7cb0168e3ed7fd7931/3%20HTML5%207458461c607d46f38fb3016f6c737db5.html">在DOM规范中，确实有一个混入（mixin）接口DocumentOrShadowRoot ,它的定义如下</a> 中，我们知道“<code>Document</code>和<code>ShadowRoot</code> 共享<code>DocumentOrShadowRoot</code> 定义的属性和方法，但是HTML规范并未给出具体的属性和方法”</li></ul><ul id="9399a255-e2b1-40eb-8b12-af7bcb7d1ffa" class="bulleted-list"><li style="list-style-type:circle">这里CSSOM规范在这个接口中定义了一个<code>styleSheets</code> 只读属性和<code>adoptedStyleSheets</code> 属性<ul id="d87b31d5-1921-4265-97fd-b12f5c4c909f" class="bulleted-list"><li style="list-style-type:square">前者是本节了解通用样式表类型的重要属性，这个对象对应的是通过引入或者嵌入文档中的样式表，它是一个<code>StyleSheetList</code> 类型</li></ul><ul id="f3809288-035e-45cb-b6ce-03067849b7da" class="bulleted-list"><li style="list-style-type:square">后者用于设置文档使用的构造样式表数组，构造样式表就是使用<code>CSSStyleSheet()</code> 构造函数创建的实例，没有进行创建设置，<code>adoptedStyleSheets</code> 通常都是空数组，所谓的<a href="https://webidl.spec.whatwg.org/#idl-observable-array"><code>ObservableArray</code></a> 是可观察数组类型是一种参数化类型，其值是对T类型（本IDL中是<code>CSSStyleSheet</code>）对象的可变列表组合的引用，以及开发者代码修改列表内容时执行的行为</li></ul></li></ul><ul id="8aa1e5c4-c5df-4c69-b511-92f7910d6162" class="bulleted-list"><li style="list-style-type:circle"><code>StyleSheetList</code> 接口的定义在<a href="https://w3c.github.io/csswg-drafts/cssom/#stylesheetlist">CSSOM中的IDL</a>中定义如下<pre id="c645696f-f7e1-4bc0-a6c7-f18de41b2fc2" class="code code-wrap"><code>[Exposed=Window]
interface StyleSheetList {
  getter CSSStyleSheet? item(unsigned long index);
  readonly attribute unsigned long length;
};</code></pre><ul id="8f352452-9230-4917-82e7-4be511cd383d" class="bulleted-list"><li style="list-style-type:square">可以看出就是一个只读的类数组列表，有一个<code>length</code> 属性表示长度</li></ul><ul id="7c6bd88f-1da5-4a2f-9992-02ea6494febd" class="bulleted-list"><li style="list-style-type:square">使用中括号语法和<code>item(index)</code> 等价调用指定<code>CSSStyleSheet</code> 对象</li></ul></li></ul><ul id="8d8d7ed8-9cf6-4009-97e0-cb230378f09f" class="bulleted-list"><li style="list-style-type:circle"><code>CSSStyleSheet</code> 接口在<a href="https://w3c.github.io/csswg-drafts/cssom/#cssstylesheet">CSSOM规范</a>中的明确定义如下<pre id="b48e7ca8-87df-4026-81fe-d6e3d0889df1" class="code code-wrap"><code>[Exposed=Window]
interface CSSStyleSheet : StyleSheet {
  constructor(optional CSSStyleSheetInit options = {});

  readonly attribute CSSRule? ownerRule;
  [SameObject] readonly attribute CSSRuleList cssRules;
  unsigned long insertRule(CSSOMString rule, optional unsigned long index = 0);
  undefined deleteRule(unsigned long index);

  Promise&lt;CSSStyleSheet&gt; replace(USVString text);
  undefined replaceSync(USVString text);
};

dictionary CSSStyleSheetInit {
  DOMString baseURL = null;
  (MediaList or DOMString) media = &quot;&quot;;
  boolean disabled = false;
};</code></pre><ul id="f1a6146f-dfca-4bcb-8e26-f5d344af5939" class="bulleted-list"><li style="list-style-type:square"><code>CSSStyleSheet</code> 接口本身继承于<code>StyleSheet</code> ，<code>StyleSheet</code> 本身可以作为一个非CSS样式表的基类（如less，sass等样式表也以此为基类）</li></ul><ul id="c432a0a3-49c6-49fc-b8d5-3e93a88af170" class="bulleted-list"><li style="list-style-type:square"><code>CSSRule</code> 和<code>CSSRuleList</code> 将在后文讨论</li></ul></li></ul><ul id="da74064c-2613-4879-8a8f-4b6dd8be66f3" class="bulleted-list"><li style="list-style-type:circle"><code>StyleSheet</code> 接口在CSSOM规范中的明确定义如下<pre id="3ef37c5d-ede4-442e-bafe-3b87ba7e97d9" class="code code-wrap"><code>[Exposed=Window]
interface StyleSheet {
  readonly attribute CSSOMString type;
  readonly attribute USVString? href;
  readonly attribute (Element or ProcessingInstruction)? ownerNode;
  readonly attribute CSSStyleSheet? parentStyleSheet;
  readonly attribute DOMString? title;
  [SameObject, PutForwards=mediaText] readonly attribute MediaList media;
  attribute boolean disabled;
};</code></pre><ul id="f56ed3fa-5aa0-4e8f-bd8a-1a913243ccff" class="bulleted-list"><li style="list-style-type:square"><a href="https://w3c.github.io/csswg-drafts/cssom/#medialist">实现MediaList接口的对象有一个相关的媒体查询集合</a></li></ul></li></ul></li></ul><ul id="df09a04c-26b1-4c10-9559-c175e52941b7" class="bulleted-list"><li style="list-style-type:disc"><code>CSSStyleSheet</code> 从<code>StyleSheet</code> 接口继承的属性如下<ul id="75521cea-4e67-4103-b8ff-f3b3bf06b660" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>disabled</code>，布尔值，表示样式表是否被禁用了（这个属性值是可读写的，因此将其设置为<code>true</code> 会禁用样式表）</span></li></ul><ul id="3cf08c52-a7ff-4503-9778-d20386b143cb" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>href</code>，如果使用&lt;link&gt;包含的样式表，则返回样式表的URL，否则返回<code>null</code> </span></li></ul><ul id="fc81d3d1-4820-438c-b9a5-b22cae3d1e18" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>media</code> ，样式表支持的媒体类型集合，这个集合有一个<code>length</code>属性和一个<code>item()</code> 方法，跟所有DOM集合一样，可以使用中括号语法访问集合中的特定项，如果样式表可以用于所有媒体，则返回空列表</span></li></ul><ul id="59af0704-354a-49e3-b6bc-c317d61629d6" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>ownerNode</code> ，指向拥有当前样式表的节点，在HTML中要么是&lt;link&gt;元素要么是&lt;style&gt;元素（在XML中可以是处理指令），如果当前样式表示是通过@import被包含在另一个样式表中的，则这个属性值为<code>null</code> </span></li></ul><ul id="2c19e31a-be4a-4ed9-bc83-deb2d5790fee" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>parentStyleSheet</code> ，如果当前样式表是通过@import被包含在另一个样式表中，则这个属性指向导入它的样式表</span></li></ul><ul id="b8864052-9817-4b58-b697-e41e5aac3703" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>title</code> ，<code>ownerNode</code> 的<code>title</code> 属性，没有定义就是<code>null</code> </span></li></ul><ul id="8a5604d2-7cb9-4e1b-ad7c-78b437b57329" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>type</code> ，字符串，表示样式表的类型，对CSS样式表而言就是”text/css”</span></li></ul><ul id="b1c38c9a-39b9-4a94-a4dd-f1f5604e60a5" class="bulleted-list"><li style="list-style-type:circle">上面的属性除了<code>disabled</code> 其它都是只读的</li></ul></li></ul><ul id="15377be7-4ba5-4969-82a6-cfc55c735ba0" class="bulleted-list"><li style="list-style-type:disc"><code>CSSStyleSheet</code> 接口本身定义的属性和方法如下<ul id="116c4596-b67f-4202-8feb-d7cebdfc3ce4" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>cssRules</code> ,当前样式表包含的样式规则的集合</span></li></ul><ul id="092aa798-c670-4636-9f81-785c49c40137" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>ownerRule</code> ,如果样式表示是通过@import导入的，则指向导入规则，否则为<code>null</code> </span></li></ul><ul id="58678930-3511-4b20-baee-d95bd9ee1ba8" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>deleteRule(index)</code> ，在指定位置删除<code>cssRules</code> 中的规则</span></li></ul><ul id="174cdf03-0488-4072-9ab7-fa09c4f5277b" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>insertRule(rule, index)</code> ，在指定位置向<code>cssRules</code> 中插入规则</span></li></ul><ul id="92759821-779c-4a03-8ca1-cc84499479ee" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>replace(text)</code> ，以传入的内容异步替换样式表的内容，该方法返回用CSSStyleSheet对象解析的承诺</span></li></ul><ul id="63665d6a-428c-4eec-ad15-df565e4cb3c4" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>replaceSync(text)</code> ，以传入的内容同步替换样式表的内容</span></li></ul></li></ul><ul id="4d97901e-5b93-49b2-b4bb-115e295bc42b" class="bulleted-list"><li style="list-style-type:disc">通过&lt;link&gt;和&lt;style&gt;元素也能直接获取CSSStyleSheet对象，DOM在这两个元素上暴露了<code>sheet</code> 属性，包含对应的<code>CSSStyleSheet</code> 对象，CSSOM定义了一个混合接口<a href="https://drafts.csswg.org/cssom/#the-linkstyle-interface"><code>LinkStyle</code></a> ，它是一个混合接口，<code>HTMLStyleElement</code> 和<code>HTMLLinkElement</code> 都包含它<pre id="a4c77948-eb6a-4502-874b-f9e52717e961" class="code code-wrap"><code>interface mixin LinkStyle {
  readonly attribute CSSStyleSheet? sheet;
};

HTMLLinkElement includes LinkStyle;
HTMLStyleElement includes LinkStyle;
</code></pre></li></ul><ul id="bc2ca32a-90e4-4da7-a832-b4a15d76067c" class="bulleted-list"><li style="list-style-type:disc"><code>document.styleSheets</code> 返回的样式表列表中会包含所有<code>&lt;style&gt;</code> 元素，以及<code>rel</code> 属性设置为”stylesheet”的&lt;link&gt;元素<pre id="dcd672da-cf37-4542-ac75-ac74de9e6f0a" class="code code-wrap"><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;style.css&quot; /&gt;
&lt;style&gt;
  p {
    color: aqua;
  }
&lt;/style&gt;
&lt;body&gt;
  &lt;p style=&quot;background-color: gray&quot;&gt;Hello, mangwu&lt;/p&gt;
  &lt;script&gt;
    const link = document.querySelector(&quot;link&quot;);
    const style = document.querySelector(&quot;style&quot;);
    console.log(link.sheet);
    console.log(style.sheet);
    console.log(document.styleSheets);
    console.log(document.styleSheets[0] === link.sheet);
    console.log(document.styleSheets[1] === style.sheet);
  &lt;/script&gt;
&lt;/body&gt;
// 打印结果
CSSStyleSheet {}
CSSStyleSheet {}
StyleSheetList {0: CSSStyleSheet, 1: CSSStyleSheet, length: 2}
true
true</code></pre></li></ul><h2 id="9d805094-6896-435a-8ea7-acf439013c95" class="">2.2.1 CSS规则</h2><ul id="5e26380e-03d6-41c0-8722-e5f02c24aade" class="bulleted-list"><li style="list-style-type:disc">在上面的IDL定义中时常看到<code>CSSRule</code>和<code>CSSRuleList</code> 接口，前者就是CSS规则，后者是CSS规则列表</li></ul><ul id="ecacc5e5-dd8f-4d5c-89a5-a677e27ce60e" class="bulleted-list"><li style="list-style-type:disc">在<a href="https://drafts.csswg.org/cssom/#the-cssrule-interface">CSSOM</a>规范下，<code>CSSRule</code> 类型表示样式表中的<strong>一条规则</strong>，这个类型也是一个通用基类，很多类型都继承它，其IDL定义如下<pre id="fd34c940-f1d0-4af8-b1fc-7f61721af857" class="code code-wrap"><code>[Exposed=Window]
interface CSSRule {
  attribute CSSOMString cssText;
  readonly attribute CSSRule? parentRule;
  readonly attribute CSSStyleSheet? parentStyleSheet;

  // the following attribute and constants are historical
  readonly attribute unsigned short type;
  const unsigned short STYLE_RULE = 1;
  const unsigned short CHARSET_RULE = 2;
  const unsigned short IMPORT_RULE = 3;
  const unsigned short MEDIA_RULE = 4;
  const unsigned short FONT_FACE_RULE = 5;
  const unsigned short PAGE_RULE = 6;
  const unsigned short MARGIN_RULE = 9;
  const unsigned short NAMESPACE_RULE = 10;
};</code></pre></li></ul><ul id="6ebe9c33-bde7-4ec1-a602-ed97d70c1425" class="bulleted-list"><li style="list-style-type:disc">CSS规则也非为几种，其中最常见的就是表示样式信息的规则<code>CSSStyleRule</code> （其它CSS规则如@import，@page等），它继承<code>CSSRule</code> ，如下<pre id="85da993a-b4a5-441d-abd2-cf038ec6b7ac" class="code code-wrap"><code>[Exposed=Window]
interface CSSStyleRule : CSSRule {
  attribute CSSOMString selectorText;
  [SameObject, PutForwards=cssText] readonly attribute CSSStyleDeclaration style;
};</code></pre><ul id="dfa16eee-9f9f-4b5e-bea6-f136eee33652" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>cssText</code> 返回整条规则的文本，这里的文本可能与样式表中实际的文本不一样，因为浏览器内部处理样式表的方式也不一样，Safari始终会把所有字母都转换成小写</span></li></ul><ul id="1e610156-7bb3-4ae8-b3b2-1b1259bb7aef" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>parentRule</code> 如果这条规则被其它规则（如@media）包含，则指向包含规则，否则就是<code>null</code> </span></li></ul><ul id="4e5b557c-4e9d-4a3a-849d-9eecab565738" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>parentStyleSheet</code> 包含当前规则的样式表</span></li></ul><ul id="f0f99be1-0d66-4a03-a04c-efc9effab8e8" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>selectorText</code> 返回规则的选择符文本，这里的文本可能与样式表中实际的文本不一样，因为浏览器内部处理样式表的方式也不一样</span></li></ul><ul id="5933b4cb-fed4-4cde-b112-c603760c86a0" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>style</code> 返回<code>CSSStyleDeclaration</code> 对象，可以设置和获取当前规则中的样式</span></li></ul><ul id="149a7c60-13af-421c-9485-d6eb720b048d" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>type</code> 数值常量，表示规则类型，对于样式规则，它始终为1</span></li></ul></li></ul><ul id="2571253b-d58e-4a23-8a23-d89fe8e4d926" class="bulleted-list"><li style="list-style-type:disc">在所有这些属性中，使用最多的是<code>cssText</code>、<code>selectorText</code> 和<code>style</code> <ul id="144b6bed-10ce-4bf9-abec-7963771043b4" class="bulleted-list"><li style="list-style-type:circle">CSS规则的<code>cssText</code> 属性与<code>style.cssText</code> 不同，前者包含<strong>选择符文本</strong>和<strong>环绕样式声明的大括号</strong>，后者<strong>只包含样式声明</strong></li></ul><ul id="30dba017-e315-4aeb-837b-71b6af812e11" class="bulleted-list"><li style="list-style-type:circle"><code>cssRule</code>的<code>cssText</code>是只读的，而<code>style.cssText</code> 可以被重写</li></ul></li></ul><ul id="aaf83a66-6d59-4e52-b0d2-39db548e72cf" class="bulleted-list"><li style="list-style-type:disc"><code>StyleSheetList</code> 类型的<code>styleSheets</code> 列表中的样式表（<code>CSSStyleSheet</code> ）对象拥有一个<code>cssRules</code> 属性，其中包含该样式表所有的CSS规则，如上所述，一个CSS规则既可以通过<code>style</code> 属性获取对应规则的<code>CSSStyleDeclaration</code> 对象，也可以通过<code>cssText</code> 直接获得它所表示的规则，如下<pre id="5b826a98-5263-4e98-a4c5-c3a20298126f" class="code code-wrap"><code>&lt;style&gt;
  p {
    color: antiquewhite;
    width: 80%;
    background-color: black;
  }
  div {
    margin: 0;
  }
&lt;/style&gt;
&lt;p&gt;Hello, mangwu&lt;/p&gt;
&lt;script&gt;
  const rules = document.styleSheets[0].cssRules;
  for (const rule of rules) {
    console.log(rule.selectorText); // p div
    console.log(rule.cssText); // p { color: antiquewhite; width: 80%; background-color: black; }
															 // div { margin: 0px; }
    console.log(rule.style.cssText); // color: antiquewhite; width: 80%; background-color: black;
																		// margin: 0px;
    console.log(rule.style.color); // antiquewhite
    console.log(rule.style.width); // 80%
    console.log(rule.style.backgroundColor); // black
  }
&lt;/script&gt;</code></pre><ul id="0841f031-8c8b-4663-b245-bafb8de05148" class="bulleted-list"><li style="list-style-type:circle">可以确定一条CSS规则就是一个<strong>选择符文本（selector text）</strong>及其<strong>环绕样式声明的大括号</strong>，使用<code>CSSStyleRule</code> 对象的<code>cssText</code> 属性会直接得到CSS规则的内容</li></ul><ul id="a239c80d-2210-44ed-ada6-e62ec9ed5777" class="bulleted-list"><li style="list-style-type:circle">使用CSS规则的<code>style</code> 就像使用元素的<code>style</code> 一样，它的<code>cssText</code> 属性<strong>只包含样式声明</strong>，比较显著的区别在于，修改CSS规则的<code>style</code> 对象上的CSS属性值，会导致CSS规则的选择符文本匹配的元素的样式都受到影响，而元素的<code>style</code> 属性只会作用到元素本身</li></ul></li></ul><h2 id="57c4f3ea-0642-45a2-821e-ce9ec45e5463" class="">2.2.2 创建规则 删除规则</h2><ul id="bd7c62a3-26b6-4419-8935-1701994e67c3" class="bulleted-list"><li style="list-style-type:disc">如上所提，<a href="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137.html">CSSStyleSheet 接口本身定义的属性和方法如下</a> ，<code>CSSStylesheet</code> 接口定义了<code>CSSRule</code> 对象的插入和删除方法<ul id="9bafba9c-afc4-4c21-978a-b23ed2c9ac33" class="bulleted-list"><li style="list-style-type:circle">使用<code>insertRule()</code> 方法向样式表（cssRules）中添加新规则，第一个参数为规则的文本；第二个参数为插入的位置</li></ul><ul id="d404f328-b969-4c41-9f07-4293e54908b8" class="bulleted-list"><li style="list-style-type:circle">使用<code>deleteRule()</code> 方法删除样式表（cssRules）中的规则，接收要删除规则的索引</li></ul><hr id="6252f0ae-00ec-4a5b-982f-6d535145a9d6"/><ul id="e054be27-8d57-43c5-b981-2fcf7cc8391b" class="bulleted-list"><li style="list-style-type:circle">使用这两个方法插入和删除CSS规则并不是在Web开发中常见的做法，随着维护的CSS规则变多，使用它们会比较麻烦，这个时候更好的方式就是第14章已经介绍过的动态样式加载技术<a href="../14%20DOM%20bb6d07282e8248fcb2bf20e5a6ec2737/2%20DOM%E7%BC%96%E7%A8%8B%2087ef9205a34e4d2aa3845d43514a84c4.html">2.2 动态样式</a> </li></ul><pre id="82e8efb9-37cb-4e93-890d-7d9e02015412" class="code code-wrap"><code>&lt;style&gt;
  p {
    color: antiquewhite;
  }
  #myP {
    background-color: blueviolet;
  }
&lt;/style&gt;
&lt;p id=&quot;myP&quot;&gt;Hello, mangwu&lt;/p&gt;
&lt;script&gt;
  const styleSheet = document.styleSheets[0];
  styleSheet.insertRule(&quot;body { background-color: silver }&quot;, 1); // 使用DOM方法
  styleSheet.deleteRule(2);
&lt;/script&gt;</code></pre><ul id="f0396598-a013-4002-8c03-80b4e35222c1" class="bulleted-list"><li style="list-style-type:circle">最终结果就是文档有一个样式表，这个样式表中有两个CSS规则，分别是本来存在的<code>p { color: antiquewhite; }</code> 和后来插入的<code>body { background-color: silver }</code> ,  而<code>#myP { background-color: blueviolet;  }</code> 使用<code>deleteRule</code> 方法被删除</li></ul></li></ul><p id="b7d6b5f8-f6b9-458d-bc86-6aa788b8dda6" class="">
</p><h1 id="cb094b7c-6c62-4c96-8964-7e6c72be6ee2" class="">2.3 元素尺寸（Element Dimensions）</h1><ul id="1ea03c13-85b3-49a1-94e3-d07ab895956f" class="bulleted-list"><li style="list-style-type:disc">DOM一直缺乏页面中元素实际尺寸的规定，IE率先增加了一些属性，后来与HTML元素的样式有关的元素尺寸属性被规范了起来，可以在<a href="https://w3c.github.io/csswg-drafts/cssom-view/#dom-htmlelement-offsetheight">CSSOM View Module</a> 规范上找到具体的属性</li></ul><ul id="c490253f-74ac-4fab-8c6b-97a1a71c47cb" class="bulleted-list"><li style="list-style-type:disc">之前了解过<a href="../12%20%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%EF%BC%88The%20Brower%20Object%20Model%EF%BC%89%201939043491d54476b445a2a7af1a435d/1%20window%E5%AF%B9%E8%B1%A1%EF%BC%88The%20window%E5%AF%B9%E8%B1%A1%EF%BC%89%207363634dd2b34ca4aba4c4c34948b9f7.html">1.4 窗口大小（Window Size）</a> 的窗口大小（<code>inner/outer/Height/Width</code>），<a href="../12%20%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%EF%BC%88The%20Brower%20Object%20Model%EF%BC%89%201939043491d54476b445a2a7af1a435d/4%20screen%E5%AF%B9%E8%B1%A1%204945d3e3b3fc4be4ae5d49cf3d633d34.html">4.0 规范中的Screen 接口</a> 的屏幕像素尺寸（<code>width/height</code>），以及<a href="../12%20%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%EF%BC%88The%20Brower%20Object%20Model%EF%BC%89%201939043491d54476b445a2a7af1a435d/1%20window%E5%AF%B9%E8%B1%A1%EF%BC%88The%20window%E5%AF%B9%E8%B1%A1%EF%BC%89%207363634dd2b34ca4aba4c4c34948b9f7.html">1.4.2 document表示尺寸的属性</a> 中额外提到的<code>document.documentElement</code> 对象的<code>clientWidth/Height</code> <ul id="300a36aa-7597-47d8-880c-932a99a9f818" class="bulleted-list"><li style="list-style-type:circle">这些都是在窗口尺寸，视口尺寸和屏幕尺寸的角度解读尺寸</li></ul><ul id="ff839160-97bb-41ae-93d4-47cd2ed57b68" class="bulleted-list"><li style="list-style-type:circle">而本节将解析元素尺寸，包括提到过的被用作视口尺寸的<code>clientWidth/Height</code> </li></ul></li></ul><ul id="86b52711-2753-4f0d-b5a9-f8efd957aa26" class="bulleted-list"><li style="list-style-type:disc">下面所有的属性都在<a href="https://w3c.github.io/csswg-drafts/cssom-view/#extension-to-the-element-interface">CSSOM规范的</a><a href="https://w3c.github.io/csswg-drafts/cssom-view/#extension-to-the-element-interface"><code>Element</code></a><a href="https://w3c.github.io/csswg-drafts/cssom-view/#extension-to-the-element-interface"> 接口</a>和<a href="https://w3c.github.io/csswg-drafts/cssom-view/#extensions-to-the-htmlelement-interface">HTMLElement接口</a>上有对应的定义如下<pre id="8dec280c-7eba-403a-a5f4-3d82495419a9" class="code code-wrap"><code>enum ScrollLogicalPosition { &quot;start&quot;, &quot;center&quot;, &quot;end&quot;, &quot;nearest&quot; };
dictionary ScrollIntoViewOptions : ScrollOptions {
  ScrollLogicalPosition block = &quot;start&quot;;
  ScrollLogicalPosition inline = &quot;nearest&quot;;
};

dictionary CheckVisibilityOptions {
    boolean checkOpacity = false;
    boolean checkVisibilityCSS = false;
};

partial interface Element {
  DOMRectList getClientRects();
  [NewObject] DOMRect getBoundingClientRect();

  boolean checkVisibility(optional CheckVisibilityOptions options = {});

  undefined scrollIntoView(optional (boolean or ScrollIntoViewOptions) arg = {});
  undefined scroll(optional ScrollToOptions options = {});
  undefined scroll(unrestricted double x, unrestricted double y);
  undefined scrollTo(optional ScrollToOptions options = {});
  undefined scrollTo(unrestricted double x, unrestricted double y);
  undefined scrollBy(optional ScrollToOptions options = {});
  undefined scrollBy(unrestricted double x, unrestricted double y);
  attribute unrestricted double scrollTop;
  attribute unrestricted double scrollLeft;
  readonly attribute long scrollWidth;
  readonly attribute long scrollHeight;
  readonly attribute long clientTop;
  readonly attribute long clientLeft;
  readonly attribute long clientWidth;
  readonly attribute long clientHeight;
};

partial interface HTMLElement {
  readonly attribute Element? offsetParent;
  readonly attribute long offsetTop;
  readonly attribute long offsetLeft;
  readonly attribute long offsetWidth;
  readonly attribute long offsetHeight;
};</code></pre></li></ul><h2 id="01a822e7-df36-49b4-8986-04e917fb9eb8" class="">2.3.1 偏移尺寸（offset dimensions）</h2><ul id="0b6b32c1-f2ca-4d15-9c3d-db4d5220815d" class="bulleted-list"><li style="list-style-type:disc">第一组属性设计<strong>偏移尺寸（offset dimensions），</strong>包含元素在屏幕上占用的所有视觉空间，元素在页面上的视觉空间由其高度和宽度决定<ul id="1e03f574-6748-493b-92c2-aa426eeaaba8" class="bulleted-list"><li style="list-style-type:circle"><strong>内边距</strong></li></ul><ul id="81cd93a5-32e9-42bb-828d-16c0dccf6c1b" class="bulleted-list"><li style="list-style-type:circle"><strong>滚动条</strong></li></ul><ul id="2f4e65d9-59f4-4db0-a826-ddbe14c6f9d4" class="bulleted-list"><li style="list-style-type:circle"><strong>边框</strong>（不包含外边距）</li></ul></li></ul><ul id="b45765b4-19e0-4444-ba7c-deb45b138733" class="bulleted-list"><li style="list-style-type:disc">以下4个属性用于取得元素的偏移尺寸<ul id="2de81cfa-7d35-4df5-b895-5fd129362842" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>offsetHeight</code> ，元素在垂直方向上占用的像素尺寸，包含它的高度，水平滚动条高度（如果可见）和上下边框的高度</span></li></ul><ul id="d55f4fce-96ff-4647-852d-535251df15f2" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>offsetLeft</code> ，元素左边框外侧距离包含元素左边框内侧的像素数</span></li></ul><ul id="426db32e-490c-4cd4-8b21-1af4e09297fc" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>offsetTop</code> ，元素上边框外侧距离包含元素上边框内侧的像素数</span></li></ul><ul id="1087f37e-99a0-4106-8cb2-ec4d3a8e548c" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>offsetWidth</code> ，元素在水平方向上占用的像素尺寸，包括它的宽度、垂直滚动条宽度（如果可见）和左，右边框的宽度</span></li></ul><ul id="fd65b914-e5c9-4346-b130-aa6414bf427d" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>offsetParent</code> ，包含元素，<code>offsetLeft</code>和<code>offsetTop</code> 都是相对于包含元素的，<code>offsetParent</code> 不一定是<code>parentNode</code> ，比如&lt;td&gt;元素的<code>offsetParent</code> 是作为其祖先的&lt;table&gt;元素，因为&lt;table&gt;是节点层级中第一个提供尺寸的元素</span><ul id="ef89179c-9ee5-48ea-b6c2-8108cbffd4b1" class="bulleted-list"><li style="list-style-type:disc">关于<code>offsetParent</code> 元素的确定，可以参考<a href="https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement/offsetParent">MDN-offsetParent</a><ul id="f8d5b268-63ad-4a3e-b770-14f79677febc" class="bulleted-list"><li style="list-style-type:circle">对位置最近(包含层次结构中最近)的祖先元素的引用</li></ul><ul id="e988fa96-63b5-4d0c-8c2e-1f18c42cea01" class="bulleted-list"><li style="list-style-type:circle">第一个非静态（non-static）位置元素</li></ul><ul id="9de531b2-d885-410e-a324-3d849f4e55dc" class="bulleted-list"><li style="list-style-type:circle">或者元素本身是静态定位的，找打第一个&lt;td&gt; &lt;th&gt; &lt;table&gt;元素</li></ul><ul id="b957c43f-945b-437e-bc84-e52d50786f49" class="bulleted-list"><li style="list-style-type:circle">如果都没有找到，那就是&lt;body&gt;元素</li></ul></li></ul><ul id="185b6020-0224-4f55-ad57-3bed53237529" class="bulleted-list"><li style="list-style-type:disc">除此之外<code>offsetParent</code> 可能为<code>null</code> <ul id="d4c9f40b-8e50-4fda-a6e0-4d9e05f7e6cc" class="bulleted-list"><li style="list-style-type:circle">元素本身或元素的祖先<code>display</code>为<code>none</code></li></ul><ul id="a6357d22-e3cc-4790-a91c-b67c8492a07b" class="bulleted-list"><li style="list-style-type:circle">元素的<code>position</code> 被设置为<code>fixed</code> （火狐浏览器仍然返回&lt;body&gt;元素）</li></ul><ul id="fb203674-c324-49bf-9768-58acd54d9b69" class="bulleted-list"><li style="list-style-type:circle">元素本身是&lt;body&gt;或&lt;html&gt;元素</li></ul></li></ul></li></ul></li></ul><ul id="5164f99f-400b-4200-a350-959b201da787" class="bulleted-list"><li style="list-style-type:disc">下图是一个表示偏移尺寸的形象图<figure id="fafc266b-5928-4ad8-bfa3-f59d6a72611e" class="image"><a href="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/%25E5%2581%258F%25E7%25A7%25BB%25E5%25B0%25BA%25E5%25AF%25B8.png"><img style="width:2764px" src="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/%25E5%2581%258F%25E7%25A7%25BB%25E5%25B0%25BA%25E5%25AF%25B8.png"/></a></figure><ul id="c3c22f24-53d1-4a83-964e-9085fa4597b9" class="bulleted-list"><li style="list-style-type:circle">上述图形参考《JavaScript高级程序设计（第4版）》中的图16-1</li></ul><ul id="ff7bbf36-184c-4610-97e0-a8d4ab7735b9" class="bulleted-list"><li style="list-style-type:circle">实际上有<em>明显的错误</em>，即<code>offsetTop</code> 和<code>offsetLeft</code> 可能不是图形表示的那样简单计算的，因为<code>offsetParent</code> 元素内可能包含<strong>可滚动的区域</strong>，实际的<code>offsetTop/Left</code> 应该是图示的长度各自加上<code>offsetParent</code>元素的滚动偏移量（scrollTop和scrollLeft）</li></ul><ul id="43278405-dd2c-4f2e-a65f-4ef5c9f90895" class="bulleted-list"><li style="list-style-type:circle">一个简单的例子就是在<code>offsetParent</code> 和<code>element</code> 之间添加一个块级元素，它的区域比<code>offsetParent</code> 元素更大，那么就会有形成滚动，如下<pre id="de188d92-a5fe-4368-b4ee-12ae36e70684" class="code code-wrap"><code>// html
&lt;div id=&quot;wrapper&quot;&gt;
  &lt;div id=&quot;container&quot;&gt;
    &lt;div id=&quot;box&quot;&gt;&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;

// css
#wrapper {
  width: 700px;
  height: 700px;
  position: relative;
  margin: 80px auto;
  background-color: antiquewhite;
  border: 1px solid gray;
  padding: 9px;
  overflow: auto;
}

#container {
  width: 1000px;
  height: 1000px;
}

#box {
  width: 300px;
  height: 300px;
  margin: 350px auto;
  background-color: red;
  border: 1px solid rgb(117, 107, 211);
  padding: 9px;
}

// javascript
const box = document.querySelector(&quot;#box&quot;);
const wrapper = document.querySelector(&quot;#wrapper&quot;);

/**
 * @description 获取元素偏移量
 * @param {HTMLElement} ele 元素
 */
function getBoxOffsetDimensions(ele) {
  console.log(wrapper.scrollLeft);
  ele.textContent = `offsetHeight:${ele.offsetHeight}\noffsetWidth:${ele.offsetWidth}\noffsetLeft:${ele.offsetLeft}\noffsetTop:${ele.offsetTop}`;
}
getBoxOffsetDimensions(box);

function debounce(func, delay = 100) {
  let timer = null;
  return function (...args) {
    if (timer) clearTimeout(timer);
    timer = setTimeout(() =&gt; {
      func.apply(this, args);
    }, delay);
  };
}
let debounceFunc = debounce(() =&gt; getBoxOffsetDimensions(box));
wrapper.addEventListener(&quot;scroll&quot;, () =&gt; {
  debounceFunc();
});</code></pre><figure id="59a4731d-b486-4f44-8f44-39f1745804a1" class="image"><a href="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/offset_dimensions.gif"><img style="width:624px" src="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/offset_dimensions.gif"/></a></figure><ul id="2d43c20d-c910-46f3-8682-272e3f5c003c" class="bulleted-list"><li style="list-style-type:square">可以发现<code>offsetLeft</code> 和<code>offsetTop</code> 是固定的，因为box在container中的位置是固定的，box距离wrapper的偏移量始终是它们之间的container的“空白”距离</li></ul></li></ul></li></ul><ul id="39fcc1e8-6639-4cb1-acaf-ed07147557df" class="bulleted-list"><li style="list-style-type:disc">要确定一个元素<strong>在页面中的（即相对于视口）</strong>偏移量，可以把它的<code>offsetLeft</code>和<code>offsetTop</code> 属性分别与offsetParent的相同属性相加，一直加到根元素（html），如下<pre id="029fb646-ce6c-4c52-8bc4-f7d21b700aeb" class="code code-wrap"><code>/**
 * @description 获取元素相对于视口的偏移量
 * @param {HTMLElement} ele 元素
 */
function getElementLeft(ele) {
  let actualLeft = ele.offsetLeft;
  let cur = ele.offsetParent;
  while (cur) {
    actualLeft += cur.offsetLeft;
    cur = cur.offsetParent;
  }
  return actualLeft;
}
/**
 * @description 获取元素相对于视口的偏移量
 * @param {HTMLElement} ele 元素
 */
function getElementTop(ele) {
  let actualTop = ele.offsetTop;
  let cur = ele.offsetParent;
  while (cur) {
    actualTop += cur.offsetTop;
    cur = cur.offsetParent;
  }
  return actualTop;
}
/**
 * @description 获取元素相对于视口的偏移量
 * @param {HTMLElement} ele 元素
 */
function getElementOffset(ele) {
  return [getElementLeft(ele), getElementTop(ele)];
}</code></pre><ul id="85be5223-dc23-4020-baaa-ce73bf703c07" class="bulleted-list"><li style="list-style-type:circle">应用到<a href="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137.html">上面</a>的例子，如下<pre id="39df02c8-2e4d-495e-8052-835a2208bdea" class="code code-wrap"><code>console.log(getElementOffset(box)); // [969, 439] 349 + 610, 349 + 80</code></pre></li></ul><ul id="182b1b84-190b-4447-9498-c3427e68f505" class="bulleted-list"><li style="list-style-type:circle">对于使用CSS布局的简单页面，这几个计算元素偏移量的函数是准确的，但是使用了表格和内嵌窗口的页面布局，它们的返回值会因浏览器不同而有所差异</li></ul></li></ul><figure class="block-color-blue_background callout" style="white-space:pre-wrap;display:flex" id="c2297eef-a8c0-4ea0-9278-008f9084f036"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%">注意：所有这些偏移量尺寸都是只读的，每次访问都会<strong>重新计算</strong>。因此，应该尽可能减少查询它们的次数，比如把查询的值保存在局部变量中，就可以避免影响性能</div></figure><h2 id="05644793-5dfd-4ccc-ad8d-98cd95d64e4a" class="">2.3.2 客户端尺寸（client dimensions）</h2><ul id="832f7392-4f23-4aff-bb87-16fd076997c8" class="bulleted-list"><li style="list-style-type:disc">元素的客户端尺寸包含<strong>元素内容</strong>及其<strong>内边距</strong>所占用的空间，它只有两个相关属性<ul id="29ad4dcd-5d8b-4988-af93-b6053fa17b57" class="bulleted-list"><li style="list-style-type:circle"><code>clientWidth</code> ：内容区宽度加左右内边距长度</li></ul><ul id="aebfadec-f75c-442a-8131-636ea3485351" class="bulleted-list"><li style="list-style-type:circle"><code>clientHeight</code> ：内容区高度加上下内边距长度</li></ul></li></ul><ul id="94a0d52a-9da6-4a13-8e54-40202c3db492" class="bulleted-list"><li style="list-style-type:disc">客户端尺寸实际上就是元素内部的空间，但是它<strong>不包括边框</strong>，<strong>外边距</strong>和<strong>滚动条</strong>（偏移尺寸包括滚动条），用图形形象表示如下（引入的MDN的图）<figure id="d03d06b1-a79e-4063-baa4-228d97ac7754" class="image"><a href="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/dimensions-client.png"><img style="width:600px" src="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/dimensions-client.png"/></a></figure></li></ul><ul id="8c0be584-74a8-43ee-a7a5-55dfc227f8b8" class="bulleted-list"><li style="list-style-type:disc">客户端尺寸常用于确定浏览器视口尺寸，即<code>document.documentElement</code> 和<code>document.body</code> 的客户端尺寸，参考<a href="../12%20%E6%B5%8F%E8%A7%88%E5%99%A8%E5%AF%B9%E8%B1%A1%E6%A8%A1%E5%9E%8B%EF%BC%88The%20Brower%20Object%20Model%EF%BC%89%201939043491d54476b445a2a7af1a435d/1%20window%E5%AF%B9%E8%B1%A1%EF%BC%88The%20window%E5%AF%B9%E8%B1%A1%EF%BC%89%207363634dd2b34ca4aba4c4c34948b9f7.html">《JavaScript高级程序设计（第4版）》举了如下的例子用于确定页面视口</a> </li></ul><hr id="11907c68-516d-4bfe-8afc-acd2caf9d060"/><p id="81edb0c0-8a06-482b-8aa4-83d97e829970" class=""><strong>MDN补充</strong></p><ul id="937ce849-af6c-4dd2-a3ac-acfd24bf2858" class="bulleted-list"><li style="list-style-type:disc">关于客户端尺寸，在window对象中讨论<code>innerWidth</code> 等窗口尺寸时就连带讨论过，它们主要用于获取浏览器的<strong>视口尺寸</strong></li></ul><ul id="c8b43fc5-b405-4070-a02c-a3ed1d860054" class="bulleted-list"><li style="list-style-type:disc">但是根据定义，元素的客户端尺寸应该包含<strong>元素内容</strong>及其<strong>内边距</strong>所占用的空间，如果是空页面，&lt;html&gt;和&lt;body&gt;的<code>clientHeight</code>应该是0，但是实际情况不是这样而且还会因为文档模式不同返回不同的值，因为<a href="https://www.w3.org/TR/2016/WD-cssom-view-1-20160317/#dom-element-clientheight"><strong>这是客户端尺寸的特殊案例</strong></a><strong>（CSSOM规范指出的）</strong>，以下都是在一个简单的空文档基础上进行讨论<ul id="9694852b-dd4b-4a95-9aa2-07fb4c4ada1b" class="bulleted-list"><li style="list-style-type:circle">如果文档是标准模式<ul id="d8a313ff-1ca2-4e70-bba6-d29a8d05381c" class="bulleted-list"><li style="list-style-type:square">&lt;html&gt;元素的<strong>实际宽度</strong>和<strong>高度</strong>分别为<strong>100%视口宽度</strong>和<strong>8px</strong><figure id="f152a53d-00be-41a2-93d6-fa0c8376d0df" class="image"><a href="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/actual_width_and_height.png"><img style="width:560px" src="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/actual_width_and_height.png"/></a></figure><figure id="ff548a1c-b9e4-4226-b4d9-6a6b6e9e1d68" class="image"><a href="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/html_width_height.png"><img style="width:435px" src="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/html_width_height.png"/></a></figure></li></ul><ul id="0b6a8ac1-16d3-450a-9487-e0bf9cadb408" class="bulleted-list"><li style="list-style-type:square">但是&lt;html&gt;元素的客户端高度却是浏览器的<strong>100%视口高度</strong><figure id="ad125432-1998-4955-86b0-f6157ac69582" class="image"><a href="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/html_%25E6%25A0%2587%25E5%2587%2586%25E6%25A8%25A1%25E5%25BC%258F_%25E5%25AE%25A2%25E6%2588%25B7%25E7%25AB%25AF%25E9%25AB%2598%25E5%25BA%25A6.png"><img style="width:481px" src="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/html_%25E6%25A0%2587%25E5%2587%2586%25E6%25A8%25A1%25E5%25BC%258F_%25E5%25AE%25A2%25E6%2588%25B7%25E7%25AB%25AF%25E9%25AB%2598%25E5%25BA%25A6.png"/></a></figure></li></ul><ul id="89d295c2-254f-416c-84b9-52370790977e" class="bulleted-list"><li style="list-style-type:square">&lt;body&gt;元素因为默认带有<code>margin: 8px</code> 的样式，所以它的<strong>实际宽度</strong>和<strong>高度</strong>分别为<strong>calc(100%视口宽度-16px)</strong>和0<figure id="855253f1-1bd4-49ad-b70f-a1f3d24ccf19" class="image"><a href="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/actual_body_width_height.png"><img style="width:428px" src="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/actual_body_width_height.png"/></a></figure><figure id="c1cf968a-a21e-4666-a181-8702294af8ae" class="image"><a href="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/body_width_and_height.png"><img style="width:248px" src="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/body_width_and_height.png"/></a></figure></li></ul><ul id="65d56cde-7127-466d-a158-d606f9c2cb4d" class="bulleted-list"><li style="list-style-type:square">标准模式下，<code>body</code> 作为一个块级元素没有特殊情况，它的客户端宽度和高度和实际宽度高度是<strong>一致的</strong><figure id="44ad3677-c694-4623-a504-5abce2f3245a" class="image"><a href="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/body_%25E5%25AE%25A2%25E6%2588%25B7%25E7%25AB%25AF%25E5%25B0%25BA%25E5%25AF%25B8.png"><img style="width:312px" src="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/body_%25E5%25AE%25A2%25E6%2588%25B7%25E7%25AB%25AF%25E5%25B0%25BA%25E5%25AF%25B8.png"/></a></figure></li></ul></li></ul><ul id="76b5800f-b752-4d39-b073-82d1f86325c1" class="bulleted-list"><li style="list-style-type:circle">如果文档是混杂模式<ul id="a1ca82a1-89ac-4eb3-90e2-380d1d74e8c0" class="bulleted-list"><li style="list-style-type:square">&lt;html&gt;元素的<strong>实际宽度</strong>和<strong>高度</strong>分别是<strong>100%视口宽度</strong>和<strong>100%视口高度</strong></li></ul><ul id="a8f422a4-bafe-448c-aa05-ee4a5057ba24" class="bulleted-list"><li style="list-style-type:square">所以&lt;html&gt;元素的<code>clientHeight</code> 和<code>clientWidth</code> 值就是它的实际高宽，但是</li></ul><ul id="56494d50-9e1e-47e0-aeed-986b5a30bc78" class="bulleted-list"><li style="list-style-type:square">&lt;body&gt;元素在混杂模式下的默认样式仍然带有<code>margin: 8px</code> ，所以它的<strong>实际宽度</strong>和<strong>高度</strong>分别为<strong>calc(100%视口宽度-16px)</strong>和<strong>calc(100%视口高度-16px)</strong></li></ul><ul id="07a82336-1328-4c1f-9824-f95be60d53f9" class="bulleted-list"><li style="list-style-type:square">但是&lt;body&gt;元素的客户端尺寸并非其实际高宽，而是视口高度和视口宽度（即和&lt;html&gt;一样）</li></ul></li></ul><ul id="b1da52ea-ffd8-4cc8-b689-8f8f70ecbbf9" class="bulleted-list"><li style="list-style-type:circle">与偏移尺寸一样，客户端尺寸也是只读的，每次访问都会重写计算</li></ul></li></ul><h2 id="73b64a0c-abb8-4f83-b823-4b63320ba000" class="">2.3.3 滚动尺寸（scroll dimensions）</h2><ul id="13f14bd8-ced4-45e0-a4ce-d4b41e48d1fb" class="bulleted-list"><li style="list-style-type:disc">滚动尺寸提供了元素内容滚动距离的信息<ul id="8b52c149-ee98-467a-bd95-96ecb66ab066" class="bulleted-list"><li style="list-style-type:circle">有些元素，如&lt;html&gt;无效任何代码就可以自动滚动</li></ul><ul id="384c180b-7fd5-4631-b224-14f77405b56b" class="bulleted-list"><li style="list-style-type:circle">而其他元素则需要CSS的overflow属性令其滚动</li></ul></li></ul><ul id="995d8846-c3b5-48ce-be9b-55f0eb1e7375" class="bulleted-list"><li style="list-style-type:disc">滚动尺寸相关属性定义在<code>Element</code> 接口中，如下<ul id="79b6c0bf-8d47-4414-bee0-5588d24327ec" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>scrollHeight</code>，没有滚动条出现时，元素内容的总高度</span></li></ul><ul id="31de7b0a-fa81-4e3b-a82b-b269e896535a" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>scrollLeft</code>，内容区左侧隐藏的像素数，设置这个属性可以改变元素的滚动位置</span></li></ul><ul id="4ce23d6b-1a99-4d13-8923-ba91cf7725e7" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>scrollTop</code> ，内容区顶部隐藏的像素数，设置这个属性可以改变元素的滚动位置</span></li></ul><ul id="0733cfa6-c7e4-40d4-8a22-320dbf115149" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>scrollWidth</code> ，没有滚动条出现时，元素内容的总宽度</span></li></ul></li></ul><ul id="6c45183e-4325-432d-93f2-42696d45e090" class="bulleted-list"><li style="list-style-type:disc"><code>scrollHeight</code> 和<code>scrollWidth</code> 都是对元素内容的测量，包括由于溢出而在屏幕上不可见的内容（即使设置为hidden仍然会计算）</li></ul><ul id="143a60c3-fc69-4f0b-aadc-d10fd017754c" class="bulleted-list"><li style="list-style-type:disc">滚动尺寸包括<strong>内边距，滚动条，边框</strong>（不包含外边距），下面是一个形象图<figure id="445cefb1-21ef-4b26-bdd3-50e458aea79e" class="image"><a href="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/%25E6%25BB%259A%25E5%258A%25A8%25E5%25B0%25BA%25E5%25AF%25B8.png"><img style="width:2690px" src="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/%25E6%25BB%259A%25E5%258A%25A8%25E5%25B0%25BA%25E5%25AF%25B8.png"/></a></figure></li></ul><ul id="b06aba7b-9584-40fe-9f82-88683654f27f" class="bulleted-list"><li style="list-style-type:disc"><code>scrollHeight/Width</code> 可以用来确定给定元素内容的实际尺寸，例如&lt;html&gt;元素是浏览器滚动视口的元素，因此<code>document.documentElement.scrollHeight</code> 就是整个页面垂直方向的总高度</li></ul><ul id="bd46002e-f083-487f-8531-464d4132e922" class="bulleted-list"><li style="list-style-type:disc"><code>scrollHeight/Width</code> 和<code>clientHeight/Width</code> 在<strong>不需要滚动</strong>的文档上是分不清的，但是对于客户端尺寸不是包括边框的，滚动尺寸是包括边框的<ul id="80990a2b-d887-4913-bd98-1f01364a1bcd" class="bulleted-list"><li style="list-style-type:circle">对于整个文档而言，<code>scrollHeight/Width</code> 就是文档尺寸，<code>clientHeight/Width</code> 就是视口尺寸</li></ul><ul id="d41f7b7b-8d20-4fc8-8f8d-dc7f66e8a067" class="bulleted-list"><li style="list-style-type:circle">如果文档尺寸超过乐视口尺寸，那么在哪个浏览器都会是这个结果</li></ul></li></ul><ul id="ca4c1c8d-c250-4950-a3e1-a69b495ac364" class="bulleted-list"><li style="list-style-type:disc"><code>scrollLeft/Top</code> 用于设置它们的滚动位置，元素未滚动它们两个的值都是0，这两个值也是可写的（与<code>scrollHeight/Width</code> 不同），下面这个函数可以检测元素是不是位于顶部，不是就滚回顶部<pre id="3f3267e6-8a4a-4c71-ac5b-8c637013e9d8" class="code"><code>function scrollToTop(ele) {
  if (ele.scrollTop) {
    ele.scrollTop = 0;
  }
}</code></pre></li></ul><ul id="69fd05f9-dbdb-46fa-b362-c029699bb58b" class="bulleted-list"><li style="list-style-type:disc">下面是一个简单的滚动尺寸例子<pre id="848c3b87-8217-4b2e-90c0-fd0f01c351d8" class="code"><code>// HTML
&lt;link rel=&quot;stylesheet&quot; href=&quot;style3.css&quot; /&gt;
&lt;div id=&quot;container&quot;&gt;
  &lt;div id=&quot;box&quot;&gt;&lt;/div&gt;
&lt;/div&gt;
&lt;script src=&quot;./main3.js&quot;&gt;&lt;/script&gt;

// style3.css
body {
  margin: 0;
}
* {
  box-sizing: border-box;
}
#container {
  margin: 90px auto;
  width: 500px;
  height: 500px;
  border: 1px solid gray;
  overflow: auto;
}

#box {
  width: 800px;
  height: 800px;
  padding: 9px;
  border: 1px solid gray;
  background-color: antiquewhite;
  text-align: center;
  /* line-height: 1000px; */
  word-wrap: normal;
}

// javascript
const box = document.querySelector(&quot;#box&quot;);
const container = document.querySelector(&quot;#container&quot;);
console.log(container);
/**
 * @description 获取元素滚动量
 * @param {HTMLElement} ele 元素
 */
function getBoxScrollDimensions(ele, target) {
  ele.textContent = `scrollHeight:${target.scrollHeight}
  \nscrollWidth:${target.scrollWidth}
  \nscrollLeft:${target.scrollLeft}
  \nscrollTop:${target.scrollTop}`;
}
getBoxScrollDimensions(box, container);

function debounce(func, delay = 100) {
  let timer = null;
  return function (...args) {
    if (timer) clearTimeout(timer);
    timer = setTimeout(() =&gt; {
      func.apply(this, args);
    }, delay);
  };
}
let debounceFunc = debounce(() =&gt; getBoxScrollDimensions(box, container));
container.addEventListener(&quot;scroll&quot;, () =&gt; {
  debounceFunc();
});</code></pre></li></ul><h2 id="6eaab896-b469-4df5-ae2b-7614413d9185" class="">2.3.4 确定元素尺寸</h2><ul id="411589d2-1839-4517-9f8a-30a4068b36d2" class="bulleted-list"><li style="list-style-type:disc">元素的各种尺寸不仅可以通过上面的属性获取，也能通过<code>getBoundingClientRect()</code>方法获取，它是<a href="https://w3c.github.io/csswg-drafts/cssom-view/#dom-element-getboundingclientrect">CSSOM规范</a>的定义在<code>Element</code> 接口的方法，它返回一个<code>DOMRect</code> 对象，包含6个（8个，其中两对是相同的）属性<ul id="d776d4fc-7910-4725-b72e-019a3e1a193c" class="bulleted-list"><li style="list-style-type:circle"><code>left</code> <code>x</code> ，元素左边相对于视口左边的距离</li></ul><ul id="7803ef57-b596-4adb-b8c7-c4f1cfd4bb45" class="bulleted-list"><li style="list-style-type:circle"><code>top</code> <code>y</code> ，元素顶部相对于视口顶部的距离</li></ul><ul id="12fa5860-a260-4578-bc24-9b085690baff" class="bulleted-list"><li style="list-style-type:circle"><code>right</code> ，元素右边相对于视口左边的距离</li></ul><ul id="87d206e1-5f5a-4435-bd70-ee5b261086ea" class="bulleted-list"><li style="list-style-type:circle"><code>bottom</code> ，元素底部相对于视口顶部的距离</li></ul><ul id="43d8e319-7091-4ed6-8745-b06ba35df7c5" class="bulleted-list"><li style="list-style-type:circle"><code>width</code>，元素宽度</li></ul><ul id="81da1e36-9677-4656-8e50-0ca88f68abee" class="bulleted-list"><li style="list-style-type:circle"><code>height</code> ，元素高度</li></ul><hr id="8fbb5e69-dba3-4311-8dee-3889b78ee825"/><ul id="c97fb083-f3b6-4710-b55d-d9294fac2617" class="bulleted-list"><li style="list-style-type:circle">注意，所有距离计算时，元素尺寸包括<strong>内边距，滚动条，边框</strong>（不包含外边距）</li></ul><figure id="863725ea-e3b2-41cb-90b0-4f7c5f2d64ff" class="image"><a href="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/element-box-diagram.png"><img style="width:1466px" src="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/element-box-diagram.png"/></a></figure></li></ul><pre id="885688ff-be71-4f05-8ceb-778dedf45c72" class="code"><code>&lt;body&gt;
  &lt;style&gt;
    body {
      margin: 0;
      height: 110vh;
    }
    div {
      box-sizing: border-box;
      height: 300px;
      width: 300px;
      margin-left: 200px;
      margin-top: 100px;
      background-color: red;
      border: 8px solid green;
      padding: 15px;
    }
    p {
      margin-left: 100px;
    }
  &lt;/style&gt;
  &lt;div&gt;&lt;/div&gt;
  &lt;p&gt;&lt;/p&gt;
  &lt;script&gt;
    const container = document.querySelector(&quot;p&quot;);
    function update() {
      const elem = document.querySelector(&quot;div&quot;);
      const rect = elem.getBoundingClientRect();

      container.innerHTML = &quot;&quot;;
      for (const key in rect) {
        if (typeof rect[key] !== &quot;function&quot;) {
          let para = document.createElement(&quot;p&quot;);
          para.textContent = `${key} : ${rect[key]}`;
          container.appendChild(para);
        }
      }
    }

    document.addEventListener(&quot;scroll&quot;, update);
    update();
  &lt;/script&gt;
&lt;/body&gt;</code></pre><figure id="94a14239-aae6-45ea-ba5e-5ae19f779f4c" class="image"><a href="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/getBoundingRect.gif"><img style="width:720px" src="2%20%E6%A0%B7%E5%BC%8F%2091738e474f47459f8a9d23c67d827137/getBoundingRect.gif"/></a></figure><p id="b1e1b431-604b-4fd3-8ff5-a5949f8538f1" class="">
</p></div></div><p id="3387f3eb-15b1-4fd7-b224-01a676be49f4" class="">
</p></div></article></body></html>