<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>3. å¼‚æ­¥å‡½æ•°ï¼ˆASYNC FUNCTIONSï¼‰</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-opaquegray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="8d33f9e6-3c3a-4f3b-8e5f-7b325307e89a" class="page sans"><header><img class="page-cover-image" src="https://www.notion.so/images/page-cover/woodcuts_13.jpg" style="object-position:center 100%"/><div class="page-header-icon page-header-icon-with-cover"><span class="icon">ğŸ›ï¸</span></div><h1 class="page-title">3. å¼‚æ­¥å‡½æ•°ï¼ˆASYNC FUNCTIONSï¼‰</h1></header><div class="page-body"><p id="b03adc14-a898-49d2-9565-8bb7d1746a7f" class="">å¼‚æ­¥å‡½æ•°ï¼Œå°±æ˜¯æ™®é€šå‡½æ•°å‰åŠ ä¸Š<strong>æ“ä½œç¬¦å…³é”®å­—å¯¹</strong>(<strong>operative keyword pair</strong>)â€<strong>async/await</strong>â€çš„å‡½æ•°ï¼Œå®ƒæ˜¯ES6<strong>æœŸçº¦æ¨¡å¼</strong>ï¼ˆ<strong>Promise paradigm</strong>ï¼‰åœ¨ECMAScriptå‡½æ•°ä¸­çš„åº”ç”¨</p><p id="daa1516d-2521-4877-a179-9f54d774b842" class=""><strong>async/await </strong>å…³é”®å­—æ˜¯ES7æ–°å¢çš„ï¼Œè¿™ä¸ªæ–°å¢çš„å…³é”®å­—ä»è¡Œä¸ºå’Œè¯­æ³•ä¸Šéƒ½å¢å¼ºäº†JavaScriptï¼Œè®©ä»¥åŒæ­¥æ–¹å¼å†™çš„ä»£ç èƒ½å¤Ÿå¼‚æ­¥æ‰§è¡Œ</p><p id="587988a4-9eb0-44d1-a68b-9e1a56cd9081" class="">åœ¨ä¸Šä¸€èŠ‚æœ€ç®€å•çš„ä¾‹å­ä¸­ï¼Œå£°æ˜ä¸€ä¸ª<code>Promise</code> å®ä¾‹ï¼Œç­‰å¾…è·å–å®ƒè§£å†³çš„ç»“æœéœ€è¦ä½¿ç”¨<code>then()</code> æ–¹æ³•ï¼Œé€šè¿‡ä¼ å…¥å…‘ç°å¤„ç†ç¨‹åºåˆ©ç”¨å‚æ•°è·å–<code>Promise</code> å®ä¾‹çš„å†…éƒ¨å€¼<div class="indented"><p id="0075b093-fcfb-4d72-9452-2717fc8c1df0" class="">è¿™ç§æ–¹å¼æœ‰æ˜æ˜¾çš„ç¼ºç‚¹ï¼Œå°±æ˜¯ç¨‹åºä¸­çš„å…¶å®ƒä»£ç è¦<strong>è¿™ä¸ªå€¼å¯ç”¨</strong>æ—¶è®¿é—®å®ƒï¼Œéœ€è¦é¢å¤–å†™ä¸€ä¸ªè§£å†³å¤„ç†ç¨‹åºè·å–</p><p id="b6a1f673-2ccd-4539-8e98-1986668e92e0" class="">è¿™æ ·åšå¹¶ä¸æ–¹ä¾¿ï¼Œå› ä¸ºå…¶å®ƒä»£ç éƒ½å¿…é¡»å¡åˆ°æœŸçº¦å¤„ç†ç¨‹åºä¸­ï¼Œ<del>è¿™å¯èƒ½å¯¼è‡´æœŸçº¦å¤„ç†ç¨‹åºçš„å†—ä½™æˆ–ä¸å¯ç»´æŠ¤</del>ï¼ŒES7æä¾›äº†async/awaitå…³é”®å­—ä¼˜é›…çš„è§£å†³è¿™ä¸ªé—®é¢˜</p></div></p><div id="4377737a-c529-4a5d-a59b-7d9a1a98608b" class="column-list"><div id="c02ca110-99d3-49a1-83cb-ab8583af23de" style="width:25%" class="column"><nav id="2624de41-afbf-43d9-bee2-01591dc7b697" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#41bbc921-9997-42c9-bec4-9291b46e00bd">3.1 å¼‚æ­¥å‡½æ•°åŸºç¡€ï¼ˆAsync Function Basicsï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#e14cf661-e9f2-4a90-aab2-780d8b21621e">3.1.1 asyncå…³é”®å­—ï¼ˆkeywordï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#870d5fee-c93f-49d8-b784-79060886afe4">3.1.1.1 asyncå£°æ˜çš„å‡½æ•°</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#6d927b4b-0e2f-4225-9e2b-1635a9e7488a">3.1.1.2 å¼‚æ­¥å‡½æ•°çš„è¿”å›å€¼</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#76d3e76f-d347-4ace-afd0-a77e54b4d09c">3.1.1.3 åœ¨å¼‚æ­¥å‡½æ•°ä¸­æŠ›å‡ºé”™è¯¯</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#daea24df-8300-4be5-a96c-64a5af0cd319">3.1.2 await å…³é”®å­—ï¼ˆkeywordï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#b8106b8d-b356-4e6d-a08c-87474f9fbf02">3.1.2.1 åœ¨å¼‚æ­¥å‡½æ•°ä¸­ä½¿ç”¨await</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#548c14cd-01e3-46ae-be40-9e02493abec3">3.1.2.2 awaitå¤„ç†æŠ›å‡ºå¼‚å¸¸çš„è¯­å¥</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#1e24c12a-13ef-4646-9c23-ac930d8e4063">3.1.2.3 awaitçš„é™åˆ¶ï¼ˆRestrictions on awaitï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#c3df8700-1ce4-4b15-a79e-be04cc47f776">3.2 åœæ­¢å’Œæ¢å¤æ‰§è¡Œï¼ˆHalting and Resuming Executionï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#a5f3a8a5-c02c-4a5a-ba31-8ec8b68d9d72">3.2.1 ç†è§£await</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#ff47428a-94f8-4d36-b0c7-67f9c7ae97d5">3.3 å¼‚æ­¥å‡½æ•°ç­–ç•¥ï¼ˆStrategies for Async Functionsï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#d138a050-ff3f-4db8-9f09-36026ef67298">3.3.1 å®ç°sleep()ï¼ˆImplementing Sleep()ï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#01f7bf15-d53a-482c-b4d6-7007ebf7c5c4">3.3.2 åˆ©ç”¨å¹³è¡Œæ‰§è¡Œï¼ˆMaximizing Parallelizationï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#820a04f0-1d47-418b-b2f3-93ddae6cf286">3.3.3 ä¸²è¡Œæ‰§è¡ŒæœŸçº¦ï¼ˆSerial Promise Executionï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#75716273-3bf7-430e-a709-82dde8fba6db">3.3.4 æ ˆè¿½è¸ªä¸å†…å­˜ç®¡ç†ï¼ˆStack Traces and Memory Managementï¼‰</a></div></nav><p id="3bcd7b9f-6e14-4650-ad4d-a142013f07de" class="">
</p></div><div id="aeb88d94-e15b-490c-9817-422ea9bf7515" style="width:75%" class="column"><h1 id="41bbc921-9997-42c9-bec4-9291b46e00bd" class="">3.1 å¼‚æ­¥å‡½æ•°åŸºç¡€ï¼ˆAsync Function Basicsï¼‰</h1><p id="54b01f4e-bef8-4c36-a33a-80f9c29011b8" class="">ES7çš„async/awaitæ—¨åœ¨ç›´æ¥åˆ©ç”¨<strong>å¼‚æ­¥ç»“æ„</strong>ï¼ˆ<strong>asynchronous constructs</strong>ï¼‰è§£å†³<strong>ä»£ç ç»„ç»‡</strong>ï¼ˆ<strong>organizing code</strong>ï¼‰çš„é—®é¢˜ã€‚ä¸ºæ­¤ï¼ŒES7é€šè¿‡ä¸¤ä¸ªå…³é”®è¯â€”asyncå’Œawiaitâ€”ä¸ºJavaScriptä¸­çš„å‡½æ•°è¿›è¡Œé€»è¾‘ä¸Šçš„<strong>å¼‚æ­¥è¡Œä¸º</strong>ï¼ˆ<strong>asynchronous behavior</strong>ï¼‰æ‰©å±•ã€‚</p><h2 id="e14cf661-e9f2-4a90-aab2-780d8b21621e" class="">3.1.1 asyncå…³é”®å­—ï¼ˆkeywordï¼‰</h2><h3 id="870d5fee-c93f-49d8-b784-79060886afe4" class="">3.1.1.1 asyncå£°æ˜çš„å‡½æ•°</h3><ul id="593cd297-132f-4f5f-8c18-fcf7854ecafc" class="bulleted-list"><li style="list-style-type:disc"><code>async</code> å…³é”®å­—ç”¨äºå£°æ˜å¼‚æ­¥å‡½æ•°ï¼Œè¿™ä¸ªå…³é”®å­—å¯ä»¥ç”¨åœ¨å‡½æ•°å£°æ˜ã€å‡½æ•°è¡¨è¾¾å¼ã€ç®­å¤´å‡½æ•°å’Œæ–¹æ³•ä¸Š<pre id="35c057da-aa4c-45e3-ad8a-3e074228daf0" class="code"><code>async function foo() {}
let bar = async function () {};
let baz = async () =&gt; {};
class Qux {
  async que() {}
}
console.log(foo); // [AsyncFunction: foo]</code></pre><ul id="d0decb84-2a25-41f3-8fbb-b91cfde65fe2" class="bulleted-list"><li style="list-style-type:circle">å¯ä»¥å‘ç°å¼‚æ­¥å‡½æ•°çš„ç›´æ¥å¼•ç”¨ç±»å‹æ˜¯<code>AsyncFunction</code> è€Œä¸æ˜¯<code>Function</code> </li></ul><ul id="c492b354-df18-4b1f-995d-f7a26f3cbf24" class="bulleted-list"><li style="list-style-type:circle">é€šè¿‡æµè§ˆå™¨ä¸­çš„æ‰“å°å¯ä»¥å‘ç°å¼‚æ­¥å‡½æ•°æ²¡æœ‰<code>prototype</code> å±æ€§ï¼ˆæ‰€ä»¥ä¸èƒ½å½“ä½œæ„é€ å‡½æ•°ï¼Œä¹Ÿæ˜¯ç®­å¤´å‡½æ•°å¯ä»¥ä½œä¸ºå¼‚æ­¥å‡½æ•°çš„åŸå› ï¼‰<figure id="7475feca-285a-4e5b-8566-b97a8fa1eb3f" class="image"><a href="3%20%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0%EF%BC%88ASYNC%20FUNCTIONS%EF%BC%89/%25E5%25BC%2582%25E6%25AD%25A5%25E5%2587%25BD%25E6%2595%25B0.png"><img style="width:672px" src="3%20%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0%EF%BC%88ASYNC%20FUNCTIONS%EF%BC%89/%25E5%25BC%2582%25E6%25AD%25A5%25E5%2587%25BD%25E6%2595%25B0.png"/></a></figure></li></ul></li></ul><ul id="fb702359-0bc6-496c-bd9f-5b9ac98d59b3" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨<code>async</code>å…³é”®å­—å¯ä»¥è®©å£°æ˜å¼‚æ­¥å‡½æ•°ï¼Œé‚£ä¹ˆè¯¥å‡½æ•°ä¹Ÿä¼šå…·æœ‰ç›¸åº”çš„<strong>å¼‚æ­¥ç‰¹å¾</strong>ï¼ˆ<strong>asynchronous characteristics</strong>ï¼‰ï¼Œä½†æ€»ä½“ä¸Šå…¶ä»£ç ä»ç„¶æ˜¯<strong>åŒæ­¥</strong>ï¼ˆ<strong>synchronously</strong>ï¼‰æ±‚å€¼çš„<ul id="019c9cbb-fd62-459d-b9f4-62c3d7a815a6" class="bulleted-list"><li style="list-style-type:circle">å’Œæ™®é€šå‡½æ•°ç›¸æ¯”ï¼Œå¼‚æ­¥å‡½æ•°åœ¨å‚æ•°å’Œ<strong>é—­åŒ…</strong>(<strong>closures</strong>)æ–¹é¢ä»ç„¶å…·æœ‰JavaScriptæ™®é€šå‡½æ•°çš„æ­£å¸¸è¡Œä¸º</li></ul><ul id="19e934c7-e2c4-4ac6-af28-aa2b35b4b8f8" class="bulleted-list"><li style="list-style-type:circle">è°ƒç”¨å¼‚æ­¥å‡½æ•°ä»ç„¶ä¼šåœ¨åé¢çš„æŒ‡ä»¤å‰æ±‚å€¼</li></ul><pre id="c7c6fa23-9df8-4fc0-903e-199e672c1e80" class="code"><code>// å¼‚æ­¥å‡½æ•°ä»ç„¶å…·æœ‰æ™®é€šå‡½æ•°çš„æ­£å¸¸è¡Œä¸º
async function logOne() {
  console.log(1);
}
logOne();
console.log(2);
// æ‰“å°
1
2</code></pre></li></ul><h3 id="6d927b4b-0e2f-4225-9e2b-1635a9e7488a" class="">3.1.1.2 å¼‚æ­¥å‡½æ•°çš„è¿”å›å€¼</h3><ul id="913c2e47-43c6-493e-88e2-72633bc049c5" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨<code>async</code> å£°æ˜çš„å¼‚æ­¥å‡½æ•°çš„ç‰¹æ€§è¡¨ç°åœ¨ï¼š<ul id="db5a256c-f02d-4507-8e4e-7141479860bc" class="bulleted-list"><li style="list-style-type:circle">å¦‚æœå¼‚æ­¥å‡½æ•°ä½¿ç”¨<code>return</code> å…³é”®å­—è¿”å›äº†å€¼ï¼ˆæ²¡æœ‰ä½¿ç”¨<code>return</code> åˆ™é»˜è®¤è¿”å›<code>undefined</code>ï¼‰,è¿™ä¸ªå€¼ä¼šè¢«<code>Promise.resolve()</code> åŒ…è£…æˆä¸€ä¸ªæœŸçº¦å¯¹è±¡</li></ul><ul id="e036c948-3ca5-4500-bc54-1c553f32d42c" class="bulleted-list"><li style="list-style-type:circle"><strong>å¼‚æ­¥å‡½æ•°å§‹ç»ˆè¿”å›æœŸçº¦å¯¹è±¡</strong>ï¼Œåœ¨å‡½æ•°å¤–éƒ¨è°ƒç”¨è¿™ä¸ªå‡½æ•°å¯ä»¥å¾—åˆ°å®ƒè¿”å›çš„æœŸçº¦</li></ul><pre id="24d61799-eb96-485a-b308-27b3b8745711" class="code"><code>async function getThree() {
  console.log(1);
  return 3;
}
let a = getThree(); // è°ƒç”¨è·å¾—ä¸€ä¸ªå†…éƒ¨å€¼ä¸º3ï¼ŒçŠ¶æ€ä¸ºå…‘ç°çš„Promiseï¼ŒåŒæ—¶å› æ‰§è¡Œå†…éƒ¨ä»£ç è¿˜æ‰“å°äº†1
console.log(a); // Promise { &lt;state&gt;: &quot;fulfilled&quot;, &lt;value&gt;: 3 }
a.then((res) =&gt; console.log(res)) // é€šè¿‡then()æ–¹æ³•èƒ½è·å–åˆ°Promiseçš„å†…éƒ¨å€¼ 3
console.log(2); // 2
// æ‰“å°ç»“æœ
1
PromiseÂ {&lt;fulfilled&gt;: 3}
2   // åŒæ­¥æ‰“å°
3   // å¼‚æ­¥æ“ä½œè·å–å†…éƒ¨å€¼ï¼Œæ‰€ä»¥åœ¨2çš„åé¢</code></pre><ul id="f97a7d94-b829-4432-b25f-3e5fad6d52cd" class="bulleted-list"><li style="list-style-type:circle">åœ¨å¼‚æ­¥å‡½æ•°ä¸­ç›´æ¥è¿”å›ä¸€ä¸ªæœŸçº¦å¯¹è±¡ä¹Ÿæ˜¯å¯è¡Œçš„</li></ul><pre id="dbdd44ec-b4a2-439b-b2bf-134d48d97285" class="code"><code>async function getThree2() {
  console.log(1);
  return Promise.resolve(3)
}
let b = getThree();
console.log(b);
b.then((res) =&gt; console.log(res))
console.log(2);
// æ‰“å°ç»“æœå’Œä¸Šé¢ä¸€è‡´
1
PromiseÂ {&lt;fulfilled&gt;: 3}
2   // åŒæ­¥æ‰“å°
3   // å¼‚æ­¥æ“ä½œè·å–å†…éƒ¨å€¼ï¼Œæ‰€ä»¥åœ¨2çš„åé¢</code></pre></li></ul><ul id="296c739c-d576-4946-a18f-bd7f0f55a6d7" class="bulleted-list"><li style="list-style-type:disc">å¼‚æ­¥å‡½æ•°çš„è¿”å›å€¼<strong>æœŸå¾…</strong>ï¼ˆ<strong>anticipatesï¼Œ </strong>ä½†å®é™…ä¸Šå¹¶ä¸è¦æ±‚ï¼‰ä¸€ä¸ªå®ç°<strong>thenable</strong>æ¥å£çš„å¯¹è±¡ï¼Œä½†æ˜¯<strong>å¸¸è§„å€¼</strong>ï¼ˆ<strong>regular values</strong>ï¼‰ä¹Ÿå¯ä»¥<ul id="4821322d-857c-4104-95d9-dc9bc7319244" class="bulleted-list"><li style="list-style-type:circle">å¦‚æœè¿”å›çš„æ˜¯å®ç°thenableæ¥å£çš„å¯¹è±¡ï¼Œåˆ™è¿™ä¸ªå¯¹è±¡ï¼ˆçš„å†…éƒ¨å€¼ï¼‰å¯ä»¥é€šè¿‡æä¾›ç»™<code>then()</code> çš„å¤„ç†ç¨‹åºçš„ç¬¬ä¸€ä¸ªå‚æ•°è¿›è¡Œâ€œè§£åŒ…ï¼ˆ<strong>unwrapped</strong>ï¼‰â€ã€<del>æ„æ€å°±æ˜¯æ²¡å¿…è¦ä½¿ç”¨</del><del><code>Promise.resolve()</code></del><del> è¿›è¡ŒåŒ…è£…ä»¥æä¾›</del><del><code>then()</code></del><del> åŠå…¶è§£å†³å¤„ç†ç¨‹åº è¿›è¡Œè§£åŒ…</del>ã€‘<ul id="5fe68366-8960-4783-ab0a-445f4366d344" class="bulleted-list"><li style="list-style-type:square">è¿™é‡Œæ‰€è°“çš„è§£åŒ…å®é™…ä¸Šå°±æ˜¯æŠŠå¼‚æ­¥å‡½æ•°<strong>è·å–åˆ°çš„å€¼</strong>è®¤å®šä¸º å¼‚æ­¥å‡½æ•°å†…è¿”å›çš„ å®ç°thenableæ¥å£çš„å¯¹è±¡çš„ <code>then()</code> æ–¹æ³•ä¸­çš„ ä¼ é€’ç»™<code>then()</code> çš„å¤„ç†å›è°ƒå‡½æ•° è¿›è¡Œè°ƒç”¨æ—¶çš„ ç¬¬ä¸€ä¸ªå‚æ•°å€¼ï¼›åŸºæœ¬æ¨¡å¼å¦‚ä¸‹<pre id="d2a9b4f0-6e62-4f10-869a-007c1a1bc07d" class="code"><code>let thenableObj = {
	then(callback) {
		callback(res); 
// è¿™æ ·åœ¨è·å–åˆ°thenableObj åï¼Œè°ƒç”¨å…¶thenæ–¹æ³•ï¼Œ
// ä¼ é€’ä¸€ä¸ªå‡½æ•°å¯¹è±¡ï¼Œè¯¥å‡½æ•°å¯¹è±¡å°±ä¼šè¢«è°ƒç”¨ï¼Œä¸”ç¬¬ä¸€ä¸ªå‚æ•°ä¸€å®šæ˜¯åœ¨thenableObjä¸­ç¡®å®šçš„res
	}
}</code></pre></li></ul></li></ul><ul id="01e234cf-76ff-4905-b887-da7c9ee39b64" class="bulleted-list"><li style="list-style-type:circle">å¦‚æœä¸æ˜¯ï¼Œåˆ™è¿”å›ä¸­å°±è¢«å½“ä½œå·²ç»è§£å†³çš„æœŸçº¦</li></ul><pre id="77cb316d-c9b6-447f-9c4d-b7bc78c69d26" class="code"><code>// è¿”å›ä¸€ä¸ªåŸå§‹å€¼
async function primaryType() {
  return &quot;foo&quot;; // ä¼šè¢«Promise.resolve()è¿›è¡ŒåŒ…è£…
}
let p1 = primaryType();
console.log(p1);
p1.then((res) =&gt; console.log(res));

// è¿”å›ä¸€ä¸ªæ²¡æœ‰ä½¿ç”¨thenableæ¥å£çš„å¯¹è±¡
async function objType() {
  return [&quot;bar&quot;]; // ä¼šè¢«Promise.resolve()è¿›è¡ŒåŒ…è£…
}
let p2 = objType();
console.log(p2);
p2.then((res) =&gt; console.log(res));

// è¿”å›ä¸€ä¸ªå®ç°äº†thenableæ¥å£çš„éæœŸçº¦å¯¹è±¡
async function thenableObj() {
  const thenable = {
    then(callback) {
      callback(&quot;baz&quot;);
    },
  };
  return thenable;
}
let the = thenableObj();
console.log(the);
the.then((res) =&gt; console.log(res));

// è¿”å›ä¸€ä¸ªæœŸçº¦
async function promise() {
  return Promise.resolve(&quot;qux&quot;);
}
let p3 = promise();
console.log(p3);
p3.then((res) =&gt; console.log(res));
// æ‰“å°ç»“æœ
// PromiseÂ {&lt;fulfilled&gt;: &#x27;foo&#x27;}
// PromiseÂ {&lt;fulfilled&gt;: Array(1)}
// PromiseÂ {&lt;pending&gt;}
// PromiseÂ {&lt;pending&gt;}
// foo
// [&#x27;bar&#x27;]
// baz
// qux</code></pre><ul id="f35c2e13-076a-4c6a-b3de-b73dc98d6665" class="bulleted-list"><li style="list-style-type:circle">ä»æ‰“å°ç»“æœå¯ä»¥çœ‹å‡ºï¼Œæ— è®ºè¿”å›çš„æ˜¯è‡ªå®šä¹‰å®ç°çš„<code>thenable</code> æ¥å£çš„å¯¹è±¡è¿˜æ˜¯åŸå§‹å€¼å¼‚æˆ–æ™®é€šå¯¹è±¡ï¼Œå¾—åˆ°çš„å…·ä½“è¿”å›å€¼éƒ½æ˜¯ä¸€ä¸ª<code>Promise</code> å®ä¾‹</li></ul><ul id="cc0c4d09-8692-426f-8961-0bda2f5b34d2" class="bulleted-list"><li style="list-style-type:circle">å¯¹äºå¼‚æ­¥å‡½æ•°å†…éƒ¨è¿”å›æ™®é€šå¯¹è±¡å’ŒåŸå§‹å€¼è€Œè¨€ï¼Œå¤–éƒ¨å¾—åˆ°å®ƒä»¬çš„è¿”å›å€¼ç›¸å½“äºä½¿ç”¨<code>Promise.resolve()</code> å¾—åˆ°çš„è¿”å›å€¼ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥åŒæ­¥æ‰“å°å‡ºæ¥å®ƒä»¬åœ¨å¯¹è±¡çŠ¶æ€</li></ul><ul id="60ad1646-870c-430b-8c94-1b05ee67ae5b" class="bulleted-list"><li style="list-style-type:circle">å¯¹äºå¼‚æ­¥å‡½æ•°å†…éƒ¨è¿”å›<code>Promise</code>å®ä¾‹å’Œå®ç°<code>thenable</code> æ¥å£çš„å¯¹è±¡è€Œè¨€ï¼Œå¤–éƒ¨å¾—åˆ°å®ƒä»¬çš„è¿”å›å€¼åˆå§‹çŠ¶æ€ä¸ºPendingï¼Œæ‰€ä»¥åŒæ­¥æ‰“å°ä¸èƒ½æ‰“å°å‡ºå®ƒä»¬ç«‹å³æ‰§è¡Œçš„è½å®šçŠ¶æ€</li></ul><ul id="52ae3958-4d8d-417f-a115-7b5dc891b66f" class="bulleted-list"><li style="list-style-type:circle">å¯¹äºè¿”å›å®ç°<code>thenable</code> æ¥å£å¯¹è±¡è€Œè¨€ï¼Œè¿”å›çš„<code>Promise</code> å¯¹è±¡çš„æœ€ç»ˆå†…éƒ¨å€¼ä¸æ˜¯å¯¹è±¡æœ¬èº«ï¼Œè€Œæ˜¯<a href="3%20%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0%EF%BC%88ASYNC%20FUNCTIONS%EF%BC%89.html">åŒ…è£…åœ¨å¯¹è±¡</a><a href="3%20%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0%EF%BC%88ASYNC%20FUNCTIONS%EF%BC%89.html"><code>then()</code></a><a href="3%20%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0%EF%BC%88ASYNC%20FUNCTIONS%EF%BC%89.html"> æ–¹æ³•çš„è§£å†³å›è°ƒå‡½æ•°æ‰§è¡Œæ—¶ä¼ é€’çš„å€¼</a> </li></ul><ul id="0c01fbcf-12c3-44a0-99f8-9a912aad9c32" class="bulleted-list"><li style="list-style-type:circle">å¤–éƒ¨promisesä½¿ç”¨<code>then()</code> è·å–å†…éƒ¨å€¼è¿›è¡Œæ‰“å°æ˜¯å¼‚æ­¥æ“ä½œï¼Œæ‰€ä»¥åœ¨æ‰€æœ‰åŒæ­¥æ‰“å°åæ‰æ‰§è¡Œ</li></ul></li></ul><h3 id="76d3e76f-d347-4ace-afd0-a77e54b4d09c" class="">3.1.1.3 åœ¨å¼‚æ­¥å‡½æ•°ä¸­æŠ›å‡ºé”™è¯¯</h3><ul id="792ae1bf-1cd2-40bc-9b2c-33378e655d42" class="bulleted-list"><li style="list-style-type:disc">ä¸åœ¨æœŸçº¦çš„å¤„ç†ç¨‹åºä¸­ä¸€æ ·çš„è¡Œä¸ºï¼Œåœ¨å¼‚æ­¥å‡½æ•°ä¸­æŠ›å‡ºé”™è¯¯ä¼šè¿”å›æ‹’ç»çš„æœŸçº¦ï¼›</li></ul><ul id="66168afc-ad8f-40c6-91ff-0796bb8b756d" class="bulleted-list"><li style="list-style-type:disc">åŒæ—¶è¿™ä¸ªæ‹’ç»çš„æœŸçº¦çš„å†…éƒ¨å€¼å°±æ˜¯æŠ›å‡ºçš„é”™è¯¯ï¼›</li></ul><ul id="33310217-6657-45d3-9ba5-c80e2848d815" class="bulleted-list"><li style="list-style-type:disc">æŠ›å‡ºçš„é”™è¯¯ä¸èƒ½é€šè¿‡<code>try/catch</code> è¯­å¥è¿›è¡Œæ•è·ï¼Œéœ€è¦è°ƒç”¨è¿”å›çš„æ‹’ç»çš„æœŸçº¦çš„<code>then()</code> æˆ–<code>catch()</code> æ–¹æ³•æ·»åŠ ä¸€ä¸ªæ‹’ç»å¤„ç†ç¨‹åºè¿›è¡Œæ•è·<pre id="b9afeeac-7d1b-4885-b845-80d2d41db6ec" class="code"><code>// æŠ›å‡ºé”™è¯¯
async function throwError() {
  console.log(1);
  throw 3;
}
let t1 = throwError();
console.log(t1);
t1.catch(console.log);
console.log(2);
// æ‰“å°
1
PromiseÂ {&lt;rejected&gt;: 3}
2
3</code></pre></li></ul><ul id="57b61f0c-75f4-4ab6-b3ea-8c8eda8218ce" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœåœ¨å¼‚æ­¥å‡½æ•°ä¸­è¿”å›ä¸€ä¸ªæ‹’ç»çš„æœŸçº¦ï¼Œå…¶è¡Œä¸ºå’Œä¸Šé¢çš„æŠ›å‡ºé”™è¯¯çš„è¡Œä¸º<strong>å¤§ä½“</strong>ä¸€è‡´ï¼ˆç«‹å³æ‰“å°çš„ç»“æœä¸ä¸€è‡´ï¼ŒæŠ›å‡ºé”™è¯¯ç«‹å³æ‰“å°ä¼šå¾—åˆ°ä¸€ä¸ªè½å®šçš„æ‹’ç»çŠ¶æ€çš„promiseï¼Œè€Œè¿”å›ä¸€ä¸ªæ‹’ç»promiseä¼šå¾—åˆ°ä¸€ä¸ªæ–°çš„åˆå§‹ä¸ºpendingçš„promiseï¼‰<pre id="4ed89919-9d02-42e4-964d-15c1bbd08318" class="code"><code>async function throwError2() {
  console.log(1);
  return Promise.reject(3);
}
let t2 = throwError2();
console.log(t2);
t2.catch(console.log);
console.log(2);
// æ‰“å°
1
PromiseÂ {&lt;pending&gt;}
2
3 </code></pre></li></ul><ul id="2570516b-8ebc-49d8-9eeb-89d0511f381e" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœåœ¨å¼‚æ­¥å‡½æ•°ä¸­ç”Ÿæˆä¸€ä¸ªæ‹’ç»çš„æœŸçº¦ä½†æ˜¯å¹¶ä¸ä½œä¸ºè¿”å›å€¼è¿”å›ï¼Œé‚£ä¹ˆè¿™ä¸ªé”™è¯¯å°±æ²¡åŠæ³•åœ¨å‡½æ•°å¤–éƒ¨è¿›è¡Œæ•è·äº†ï¼Œåªèƒ½åœ¨å‡½æ•°å†…éƒ¨é€šè¿‡è¿™ä¸ªå±€éƒ¨æœŸçº¦è‡ªå·±çš„<code>catch()</code> æ–¹æ³•è¿›è¡Œæ•è·<pre id="927c6493-6248-4b93-b5b8-4cd130e8fbc0" class="code"><code>async function throwError3() {
  console.log(1);
  Promise.reject(3);
}
let t3 = throwError3();
console.log(t3);
t3.catch(console.log);
console.log(2);
// æ‰“å°
1
PromiseÂ {&lt;fulfilled&gt;: undefined}
2
Uncaught (in promise) 3</code></pre><ul id="c7f25679-7498-470d-b973-cb75a1ab4ff1" class="bulleted-list"><li style="list-style-type:circle">è¿™é‡Œåœ¨<code>throwError3</code> æ‰§è¡Œçš„<code>Promise.reject(3);</code> è¯­å¥ç”Ÿæˆä¼šæŠ›å‡ºä¸€ä¸ªå¼‚æ­¥é”™è¯¯ï¼Œæµè§ˆå™¨ä¼šæŠ¥å‡º<mark class="highlight-red">Uncaught </mark>çš„é”™è¯¯ä¿¡æ¯</li></ul><ul id="339eb199-23c5-4a07-8224-211cf208053f" class="bulleted-list"><li style="list-style-type:circle">åŒæ—¶ä¹Ÿå‘ç°å¦‚æœä¸è¿”å›ä»»ä½•å€¼ä¹Ÿä¼šè¿”å›ä¸€ä¸ª<code>Promise</code> å®ä¾‹ï¼ˆå®ä¾‹ä¼šå¼‚æ­¥å…‘ç°ï¼‰ï¼Œåªä¸è¿‡è¿™ä¸ªå®ä¾‹çš„å†…éƒ¨å€¼å°±æ˜¯<code>undefined</code></li></ul></li></ul><h2 id="daea24df-8300-4be5-a96c-64a5af0cd319" class="">3.1.2 await å…³é”®å­—ï¼ˆkeywordï¼‰</h2><h3 id="b8106b8d-b356-4e6d-a08c-87474f9fbf02" class="">3.1.2.1 åœ¨å¼‚æ­¥å‡½æ•°ä¸­ä½¿ç”¨await</h3><ul id="271ccbd5-467a-422f-8126-790912254d01" class="bulleted-list"><li style="list-style-type:disc">å¼‚æ­¥å‡½æ•°ä¸»è¦é’ˆå¯¹ä¸ä¼šé©¬ä¸Šå®Œæˆçš„ä»»åŠ¡ï¼Œæ‰€ä»¥è‡ªç„¶éœ€è¦ä¸€ç§<strong>æš‚åœå’Œæ¢å¤æ‰§è¡Œçš„èƒ½åŠ›ï¼ˆpause and resume execution, </strong><em><del><strong>å¯é‡å…¥ï¼Ÿ</strong></del></em><strong>ï¼‰</strong>ï¼Œä½¿ç”¨<code>await</code> å…³é”®å­—å¯ä»¥<strong>æš‚åœå¼‚æ­¥å‡½æ•°ä»£ç çš„æ‰§è¡Œ</strong>(<strong>pause execution of the async function</strong>)ï¼Œç­‰å¾…æœŸçº¦è§£å†³ï¼ˆä»¥ä¸‹ä¸º<strong>ä¸ªäººç†è§£</strong>ï¼‰<ul id="2023c7a4-0417-4c94-a915-dbebf17c91cf" class="bulleted-list"><li style="list-style-type:circle"> ä½¿ç”¨<code>async</code> å£°æ˜çš„å¼‚æ­¥å‡½æ•°æœ¬èº«å…·æœ‰æ™®é€šå‡½æ•°çš„æ€§è´¨ï¼Œå…¶ä¸­çš„ä»£ç é™¤äº†è¿”å›å€¼ï¼Œå…¶ä»–çš„<strong>æ­£å¸¸è¯­å¥ï¼ˆéå¼‚æ­¥æ“ä½œï¼‰</strong>éƒ½æ˜¯åŒæ­¥æ‰§è¡Œçš„</li></ul><ul id="50bf6ee9-e69f-4595-9002-bf075078ab66" class="bulleted-list"><li style="list-style-type:circle">å¦‚æœè¦åœ¨å¼‚æ­¥å‡½æ•°ä¸­æ‰§è¡Œå¼‚æ­¥è¯­å¥ï¼Œé‚£ä¹ˆè¿™ä¸ªå¼‚æ­¥è¯­å¥çš„ç»“æœä¸€åŠæ˜¯è¿”å›å€¼</li></ul><ul id="7f0bd2b3-da04-40c6-aaf1-8a3ec6e84fbe" class="bulleted-list"><li style="list-style-type:circle">å¦‚æœæœ‰å¤šä¸ªå¼‚æ­¥è¯­å¥ï¼Œè¿™å‡ ä¸ªå¼‚æ­¥è¯­å¥ä¹‹é—´ç›¸äº’ä¾èµ–ï¼ˆåªæœ‰è·å–å…¶ä¸­ä¸€ä¸ªä¹‹åæ‰èƒ½è·å–å¦ä¸€ä¸ªå¼‚æ­¥è¯­å¥çš„å€¼ï¼‰ï¼Œæˆ–è®¸å¯ä»¥é€šè¿‡æœŸçº¦è¿é”çš„æ–¹å¼è¿›è¡Œï¼Œæœ€åè¿”å›æœ€åä¸€ä¸ªæœŸçº¦å³å¯</li></ul><ul id="273cd878-8f9e-4df3-8001-f16960243ecc" class="bulleted-list"><li style="list-style-type:circle">è™½ç„¶æœŸçº¦è¿é”å¯ä»¥é€šè¿‡ç±»ä¼¼å‡½æ•°åˆæˆçš„æ€æƒ³å®ç°ç®€æ´çš„ä¸²è”æœŸçº¦åˆæˆï¼Œä½†æ˜¯åœ¨ä¹¦å†™é€»è¾‘ä¸Šæ›´æœŸæœ›ç®€å•çš„ä»£ç </li></ul><ul id="5ab7c316-40f6-4a68-9845-227915ac2f8e" class="bulleted-list"><li style="list-style-type:circle">æ‰€ä»¥å°±å‡ºç°äº†<code>await</code> ï¼Œå®ƒèƒ½è®©ä¸€ä¸ªè¯­å¥ç­‰å¾…å¼‚æ­¥ä»»åŠ¡æ‰§è¡Œå®Œæ¯•åæ‰æ‰§è¡Œï¼Œå°±åƒä¸‹é¢è¿™æ ·<pre id="9d856fad-24f8-4d90-824f-20ad597d2882" class="code"><code>async function foo() {
  let p = new Promise((resolve, reject) =&gt; setTimeout(resolve, 1000, 3));
  console.log(await p); // 
	console.loh(1);
}
foo(); 
// 3 (1ç§’å)
// 1 (1ç§’å)</code></pre><ul id="396538d9-eb6a-480b-99c8-3f99408cfcb2" class="bulleted-list"><li style="list-style-type:square">æ³¨æ„è¿™é‡Œï¼Œ<code>await</code> å…³é”®å­—ä¼šæš‚åœæ‰§è¡Œå¼‚æ­¥å‡½æ•°åé¢çš„ä»£ç ï¼Œè®©å‡ºJavaScript<strong>è¿è¡Œæ—¶çš„æ‰§è¡Œçº¿ç¨‹</strong>(<strong>runtimeâ€™s thread of execution</strong>)</li></ul><ul id="f0934d73-199c-4f3d-afa8-a725def54582" class="bulleted-list"><li style="list-style-type:square">è¿™ä¸ªè¡Œä¸ºå’Œç”Ÿæˆå™¨ä¸­çš„<code>yield</code> å…³é”®å­—ç±»ä¼¼ï¼Œ<code>await</code> å…³é”®å­—åŒæ ·å°è¯•â€œè§£åŒ…â€å¯¹è±¡ï¼ˆå®ç°äº†thenableæ¥å£çš„å¯¹è±¡ï¼‰çš„å€¼ï¼Œç„¶åå°†è¿™ä¸ªå€¼ä¼ ç»™è¡¨è¾¾å¼ï¼Œå†<strong>å¼‚æ­¥</strong>ï¼ˆ<strong>asynchronously</strong>ï¼‰æ¢å¤å¼‚æ­¥å‡½æ•°çš„æ‰§è¡Œ</li></ul></li></ul><ul id="c2df5572-6eb0-454f-b5fb-7b383544e92a" class="bulleted-list"><li style="list-style-type:circle">å¦‚æœä¸ä½¿ç”¨<code>await</code> ï¼Œè¿™é‡Œè·å–<code>p</code> çš„å€¼å°±éœ€è¦ä½¿ç”¨<code>then()</code> ï¼Œå°†<code>console.log</code> ä»£ç <a href="3%20%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0%EF%BC%88ASYNC%20FUNCTIONS%EF%BC%89.html">å¡è¿›</a><a href="3%20%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0%EF%BC%88ASYNC%20FUNCTIONS%EF%BC%89.html"><code>then()</code></a><a href="3%20%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0%EF%BC%88ASYNC%20FUNCTIONS%EF%BC%89.html"> çš„è§£å†³å¤„ç†ç¨‹åº</a>ä¸­äº†(åŒæ—¶åç»­çš„åŒæ­¥ä»£ç èƒ½æ­£å¸¸æ‰§è¡Œå› ä¸º<code>then()</code>æ˜¯å¼‚æ­¥çš„æ“ä½œ)ï¼Œå¦‚ä¸‹<pre id="c0dc187b-9f22-4a0b-852f-4f386590e464" class="code"><code>async function foo2() {
  let p = new Promise((resolve, reject) =&gt; setTimeout(resolve, 1000, 3));
  p.then((res) =&gt; console.log(res));
  console.log(1);
}
foo2();
// 1  (ç«‹å³)
// 3  (1ç§’å)</code></pre></li></ul></li></ul><ul id="aedcd82a-1221-4710-a28c-2931f9eb3362" class="bulleted-list"><li style="list-style-type:disc"><code>await</code> å…³é”®å­—çš„ç”¨æ³•å’ŒJavaScriptçš„ä¸€å…ƒæ“ä½œä¸€æ ·ï¼Œå®ƒå¯ä»¥å•ç‹¬ä½¿ç”¨ï¼Œä¹Ÿå¯ä»¥åœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨ï¼Œå¦‚ä¸‹<pre id="b4bfb70d-708f-4374-8fdf-fa4dbc7a6d94" class="code"><code>// å•ç‹¬ä½¿ç”¨ï¼Œåœ¨è¡¨è¾¾å¼ä¸­ä½¿ç”¨éƒ½å¯ä»¥
async function printFoo() {
  console.log(await Promise.resolve(&quot;foo&quot;));
}
printFoo();

async function returnBar() {
  return await Promise.resolve(&quot;bar&quot;);
}
let a = returnBar();
console.log(a);
a.then(console.log);

// å¼‚æ­¥æ‰“å°
async function printBaz() {
  await new Promise((resolve, reject) =&gt; setTimeout(resolve, 1000));
  console.log(&quot;baz&quot;);
}
printBaz();
// æ‰“å°
// Promise { &lt;pending&gt; }
// foo
// bar
// baz (1så)</code></pre></li></ul><ul id="673c3e31-ff15-4c74-b442-e4ed1330dc56" class="bulleted-list"><li style="list-style-type:disc"><code>await</code> å…³é”®å­—æœŸå¾…ï¼ˆä½†å®é™…ä¸Šå¹¶ä¸è¦æ±‚ï¼‰ä¸€ä¸ªå®ç°<code>thenable</code> æ¥å£çš„å¯¹è±¡ï¼Œä½†æ˜¯å¸¸è§„çš„å€¼ä¹Ÿå¯ä»¥<ul id="5878aece-ef7a-47c0-a6e9-a27b543d4279" class="bulleted-list"><li style="list-style-type:circle">å¦‚æœæ˜¯å®ç°<code>thenable</code> æ¥å£çš„å¯¹è±¡ï¼Œåˆ™è¿™ä¸ªå¯¹è±¡å¯ä»¥ç”±<code>await</code> æ¥è§£åŒ…</li></ul><ul id="b07baa10-56c1-44c3-a408-7decf4603fb5" class="bulleted-list"><li style="list-style-type:circle">å¦‚æœä¸æ˜¯ï¼Œåˆ™è¿™ä¸ªå€¼å°±è¢«å½“ä½œå·²ç»è§£å†³çš„æœŸçº¦</li></ul><pre id="9d4456ad-d47a-4d6b-816e-a0e0485e474e" class="code"><code>// ç­‰å¾…ä¸€ä¸ªåŸå§‹å€¼
async function primaryType() {
  console.log(await &quot;foo&quot;);
}
primaryType();
// ç­‰å¾…ä¸€ä¸ªæ²¡æœ‰å®ç°thenableæ¥å£çš„å¯¹è±¡
async function obj() {
  console.log(await [&quot;bar&quot;]);
}
obj();
// ç­‰å¾…ä¸€ä¸ªå®ç°äº†thenableæ¥å£çš„éæœŸçº¦å¯¹è±¡
async function thenableObj() {
  console.log(
    await {
      then(callback) {
        callback(&quot;baz&quot;);
      },
    }
  );
}
thenableObj();

// ç­‰å¾…ä¸€ä¸ªæœŸçº¦
async function promiseType() {
  console.log(await Promise.resolve(&quot;qux&quot;));
}
promiseType();
// æ‰“å°
// foo
// [&#x27;bar&#x27;]
// qux
// baz</code></pre></li></ul><h3 id="548c14cd-01e3-46ae-be40-9e02493abec3" class="">3.1.2.2 awaitå¤„ç†æŠ›å‡ºå¼‚å¸¸çš„è¯­å¥</h3><ul id="b2788e5a-dfeb-4aa3-8a28-5a87509f2437" class="bulleted-list"><li style="list-style-type:disc"><strong>ç­‰å¾…</strong>ï¼ˆ<strong>Awaiting</strong>ï¼‰ä¼šæŠ›å‡ºé”™è¯¯çš„<strong>åŒæ­¥</strong>ï¼ˆ<strong>synchronous</strong>ï¼‰æ“ä½œï¼Œä¼šè¿”å›æ‹’ç»çš„æœŸçº¦ï¼Œè¯¥æœŸçº¦å¯ä»¥ä½¿ç”¨<code>catch()</code> å¯¹æŠ›å‡ºçš„å¼‚æ­¥é”™è¯¯è¿›è¡Œæ•è·<pre id="fbb2d534-6d69-4af7-a882-67b2bcf2679e" class="code"><code>// æŠ›å‡ºé”™è¯¯
async function throwError() {
  console.log(1);
  await (() =&gt; {
    throw 3;
  })();
}

let t1 = throwError();
console.log(t1)
t1.catch(console.log);
console.log(2);
// æ‰“å°
// 1
// PromiseÂ {&lt;rejected&gt;: 3}
// 2
// 3</code></pre><ul id="42045d02-8966-48d5-a49a-6d276ace791e" class="bulleted-list"><li style="list-style-type:circle">æ³¨æ„è¿™é‡Œç«‹å³æ‰“å°çš„<code>t1</code> promiseæ˜¯æ‹’ç»çŠ¶æ€çš„ï¼Œè¿™ä¸€å®šæ˜¯å’Œä¸Šè¿°ç›´æ¥åœ¨å¼‚æ­¥å‡½æ•°ä¸­æŠ›å‡ºé”™è¯¯<a href="3%20%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0%EF%BC%88ASYNC%20FUNCTIONS%EF%BC%89.html">ä¸€æ ·çš„è¡Œä¸º</a></li></ul></li></ul><ul id="627e4e4c-f931-453b-a65f-5f9753f78bbc" class="bulleted-list"><li style="list-style-type:disc">åœ¨å¼‚æ­¥å‡½æ•°ä¸­<a href="3%20%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0%EF%BC%88ASYNC%20FUNCTIONS%EF%BC%89.html">è·å–åˆ°äº†å•ç‹¬æ‹’ç»çš„promise</a> ï¼ˆè€Œéšå¼æŠ›å‡ºçš„é”™è¯¯ï¼‰ä¸ä¼šåœ¨å¼‚æ­¥å‡½æ•°å¤–éƒ¨è¢«æ•è·åˆ°ï¼Œä¸è¿‡ï¼Œå¦‚æœå¯¹æ‹’ç»çš„æœŸçº¦ä½¿ç”¨<code>await</code> åˆ™ä¼š<strong>é‡Šæ”¾</strong>ï¼ˆ<strong>unwrap</strong>ï¼‰é”™è¯¯å€¼ï¼Œå¹¶å°†æ‹’ç»æœŸçº¦è¿”å›<pre id="e0e057a1-a4cf-486b-84d8-4084fceb60d0" class="code"><code>async function throwError2() {
  console.log(1);
  await Promise.reject(3);
  console.log(4); // è¿™è¡Œä»£ç ä¸ä¼šæ‰§è¡Œ
}
let t2 = throwError2();
console.log(t2);
t2.catch(console.log);
console.log(2);
// æ‰“å°
// 1
// PromiseÂ {&lt;pending&gt;}
// 2
// 3</code></pre><ul id="21d07063-f163-44f2-b962-293fb32dca55" class="bulleted-list"><li style="list-style-type:circle">æ³¨æ„æ‰“å°4çš„ä»£ç ä¸ä¼šæ‰§è¡Œï¼Œå› ä¸ºä¸Šä¸€ä¸ªä»£ç å› ä¸ºpromiseæ‹’ç»è€Œç›´æ¥è¿”å›äº†æ‹’ç»çš„promise</li></ul><ul id="637b72e8-5f39-4a16-9e2d-76f33332a850" class="bulleted-list"><li style="list-style-type:circle">ç«‹å³æ‰“å°<code>t2</code> çŠ¶æ€ä¸ºpendingï¼Œè¿™ä¸ç›´æ¥æŠ›å‡ºé”™è¯¯ç«‹å³æ‰“å°çš„çŠ¶æ€ä¸ºrejectedä¸åŒ</li></ul></li></ul><h3 id="1e24c12a-13ef-4646-9c23-ac930d8e4063" class="">3.1.2.3 awaitçš„é™åˆ¶ï¼ˆRestrictions on awaitï¼‰</h3><ol type="1" id="172103f1-758b-4363-8962-d9e94fe4ba0d" class="numbered-list" start="1"><li><strong><code>await</code></strong><strong> å…³é”®å­—å¿…é¡»åœ¨å¼‚æ­¥å‡½æ•°ä¸­ä½¿ç”¨</strong>ï¼Œä¸èƒ½åœ¨é¡¶çº§ä¸Šä¸‹æ–‡å¦‚&lt;script&gt;æ ‡ç­¾æˆ–æ¨¡å—ä¸­ä½¿ç”¨<p id="61ae3967-fe21-4153-8368-dd1d8eb29167" class="">ä½†æ˜¯å®šä¹‰å¹¶ç«‹å³è°ƒç”¨å¼‚æ­¥å‡½æ•°æ˜¯æ²¡é—®é¢˜çš„ï¼Œå¦‚ä¸‹</p><pre id="97076dae-2b66-4828-a908-fe9c170780be" class="code"><code>async function normalAFunc() {
  console.log(await Promise.resolve(3));
}
normalAFunc(); // 3
(async function () {
  console.log(await Promise.resolve(3));
})(); // 3</code></pre></li></ol><ol type="1" id="031b79c2-db98-4ff6-9fc4-6110bcd87ba0" class="numbered-list" start="2"><li>å¼‚æ­¥å‡½æ•°çš„ç‰¹è´¨ä¸ä¼šæ‰©æ•£åˆ°åµŒå¥—å‡½æ•°ä¸­ï¼Œå› æ­¤<code>await</code> å…³é”®å­—ä¹Ÿåªèƒ½<strong>ç›´æ¥</strong>å‡ºç°åœ¨å¼‚æ­¥å‡½æ•°çš„å®šä¹‰ä¸­ï¼Œåœ¨åŒæ­¥å‡½æ•°å†…éƒ¨ä½¿ç”¨<code>await</code> ä¼šæŠ›å‡º<code>SyntaxError</code><pre id="0060c71c-fd87-4239-b2bf-1b3fe8d05d6c" class="code"><code>(async function () {
  for (let i = 0; i &lt; 3; i++) {
    console.log(await Promise.resolve(3)); // å¯è¡Œ
  }
  function syncFn() {
    return await Promise.resolve(&quot;bar&quot;); // ä¸å¯è¡Œ
  }
})();</code></pre></li></ol><h1 id="c3df8700-1ce4-4b15-a79e-be04cc47f776" class="">3.2 åœæ­¢å’Œæ¢å¤æ‰§è¡Œï¼ˆHalting and Resuming Executionï¼‰</h1><ul id="71a19ef8-d1f2-4ecb-9878-0d0e2fbfe71f" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨<code>await</code> å…³é”®å­—çš„<strong>æœ¬è´¨</strong>(<strong>nature</strong>)æ¯”ä¸Šè¿°çš„ä½¿ç”¨è¦<strong>ç»†è‡´å…¥å¾®çš„</strong>ï¼ˆ<strong>nuanced</strong>ï¼‰å¤šï¼›å¯¹ä¸åŒçš„è¯­å¥ä½¿ç”¨<code>await</code> å®ƒä»¬ä¹‹é—´çš„æ‰§è¡Œé¡ºåºç•¥æœ‰å·®å¼‚<pre id="ca0d6239-98e8-4119-98d0-8713a3223a1f" class="code"><code>async function foo() {
  console.log(await Promise.resolve(&quot;foo&quot;));
}

async function bar() {
  console.log(await &quot;bar&quot;);
}

async function baz() {
  console.log(&quot;baz&quot;);
}
foo();
bar();
baz();
// æ‰“å°
// baz
// foo
// bar</code></pre><p id="ba30e217-b18c-4b7b-8de0-cb7252a3ee28" class=""><mark class="highlight-red">æ³¨æ„åœ¨ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹ä¸­ï¼Œè¿™é‡Œçš„ç¤ºä¾‹æ‰“å°é¡ºåºæ˜¯ç›¸åçš„ï¼Œä½†æ˜¯å®é™…ä¸Šï¼Œ</mark><code><mark class="highlight-red">foo()</mark></code><mark class="highlight-red"> å’Œ</mark><code><mark class="highlight-red">bar()</mark></code><mark class="highlight-red"> äºŒè€…æ‰“å°çš„é¡ºåºå’Œè°ƒç”¨é¡ºåºä¸€æ ·ï¼Œä¸å­˜åœ¨å› ä¸ºawaitåé¢ä¸æ˜¯ä¸€ä¸ª</mark><code><mark class="highlight-red">thenable</mark></code><mark class="highlight-red">çš„å¯¹è±¡è€Œæœ‰æ‰€åŒºåˆ«ï¼Œä½†æ˜¯åŒæ­¥æ“ä½œçš„</mark><code><mark class="highlight-red">baz()</mark></code><mark class="highlight-red"> å³ä½¿åœ¨æœ€åè°ƒç”¨ï¼Œå› ä¸ºåŒæ­¥æ“ä½œçš„å…³ç³»ä»ç„¶é¦–å…ˆæ‰“å°</mark></p></li></ul><ul id="76f84881-b2b2-4e5b-862f-6a6626f429d6" class="bulleted-list"><li style="list-style-type:disc">async/awaitå…³é”®å­—ä¸­<strong>çœŸæ­£èµ·ä½œç”¨</strong>çš„æ˜¯awaitï¼›<ul id="d5b196ff-5eb7-4c3e-9a72-515fa08a4af6" class="bulleted-list"><li style="list-style-type:circle">asyncåªæ˜¯ä¸€ä¸ªæ ‡è¯†ç¬¦ï¼Œå®ƒè¡¨æ˜å‡½æ•°æ˜¯å¼‚æ­¥å‡½æ•°ï¼ˆå…è®¸ä½¿ç”¨awaitï¼‰</li></ul><ul id="1fd39f00-9d68-4167-afee-6ff4fba641e4" class="bulleted-list"><li style="list-style-type:circle">å¼‚æ­¥å‡½æ•°å¦‚æœä¸åŒ…å«awaitå…³é”®å­—ï¼Œå…¶æ‰§è¡Œ<strong>åŸºæœ¬ä¸Š</strong>å’Œæ™®é€šå‡½æ•°æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼ˆå”¯ä¸€åŒºåˆ«åœ¨äºè¿”å›å€¼ï¼‰</li></ul><pre id="7537d1b0-0d64-41d9-ac56-41d28e6fea01" class="code"><code>// å¼‚æ­¥å‡½æ•°åœ¨ä¸å…³å¿ƒè¿”å›å€¼æ—¶ï¼Œèµ·å…³é”®ä½œç”¨çš„å…¶å®æ˜¯awaitå…³é”®å­—
async function printOne() {
  console.log(2);
}
console.log(1);
printOne();
console.log(2);
// æ‰“å°
1
2
3</code></pre></li></ul><h2 id="a5f3a8a5-c02c-4a5a-ba31-8ec8b68d9d72" class="">3.2.1 ç†è§£await</h2><ul id="52ee7509-7ac4-4bdf-b6b7-517ba0ee7f81" class="bulleted-list"><li style="list-style-type:disc">awaitå…³é”®å­—å¹¶éåªæ˜¯ç­‰å¾…ä¸€ä¸ªå€¼å¯ç”¨é‚£ä¹ˆç®€å•ï¼Œåœ¨å¼‚æ­¥å‡½æ•°ä¸­ä½¿ç”¨awaitï¼Œç„¶åè°ƒç”¨å¼‚æ­¥å‡½æ•°ï¼Œä¼šæœ‰å¦‚ä¸‹è¿‡ç¨‹<ul id="a5a1bdbd-d734-47d2-a8e6-dbbc60fb6396" class="bulleted-list"><li style="list-style-type:circle">JavaScript<strong>è¿è¡Œæ—¶</strong>(<strong>runtime</strong>)åœ¨ç¢°åˆ°awaitå…³é”®å­—æ—¶ï¼Œä¼š<strong>è®°å½•(track)</strong>åœ¨å“ªé‡Œæš‚åœæ‰§è¡Œ</li></ul><ul id="265e67b7-4405-4c4c-ac46-84e4e946e830" class="bulleted-list"><li style="list-style-type:circle">æš‚åœæ‰§è¡ŒæœŸé—´ï¼Œå¼‚æ­¥å‡½æ•°awaitåçš„è¯­å¥ä¸ä¼šæ‰§è¡Œï¼Œè€Œå¼‚æ­¥å‡½æ•°å¤–çš„åŒæ­¥è¯­å¥ä¼šæ‰§è¡Œ</li></ul><ul id="a9b1638b-718d-4bb8-a7b0-7cbca9f49dc0" class="bulleted-list"><li style="list-style-type:circle">ç­‰åˆ°awaitå³è¾¹çš„å€¼å¯ç”¨äº†ï¼ŒJavaScriptè¿è¡Œæ—¶ä¼šå‘æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ¨é€ä¸€ä¸ªä»»åŠ¡ï¼Œè¿™ä¸ªä»»åŠ¡ä¼š<strong>æ¢å¤</strong>(<strong>resume</strong>)å¼‚æ­¥å‡½æ•°çš„æ‰§è¡Œ</li></ul><pre id="20d81e23-0eba-4631-970c-3879a8746e26" class="code"><code>// awaitä¼šæš‚åœå¼‚æ­¥å‡½æ•°çš„æ‰§è¡Œï¼Œè®°å½•ä½ç½®
async function test() {
  console.log(2);
  await null;
  console.log(4);
}
console.log(1);
test();
console.log(3);
// æ‰“å°
1
2
3
4</code></pre><ul id="aac19b45-eae3-47f2-bea5-eeaff9579abf" class="bulleted-list"><li style="list-style-type:circle">å³ä½¿<code>await</code>åé¢è·Ÿç€ä¸€ä¸ªç«‹å³å¯ç”¨çš„å€¼ï¼Œå‡½æ•°çš„å…¶ä½™éƒ¨åˆ†ä¹Ÿä¼šè¢«<strong>å¼‚æ­¥ï¼ˆasynchronouslyï¼‰</strong>æ±‚å€¼</li></ul><ul id="5645c4e2-ec6c-441d-b7cc-984cc6743c61" class="bulleted-list"><li style="list-style-type:circle">ä¸Šé¢ä¾‹å­çš„è¾“å‡ºçš„ç»“æœå¾ˆå¥½çš„è§£é‡Šäº†è¿è¡Œæ—¶çš„å·¥ä½œåŸç†<ol type="1" id="76339041-a6f7-452f-83fe-916209cd561c" class="numbered-list" start="1"><li><strong>æ‰“å°ï¼ˆPrintï¼‰</strong>1</li></ol><ol type="1" id="9144c465-e915-4d34-8dda-6fc6f3c5edda" class="numbered-list" start="2"><li>è°ƒç”¨å¼‚æ­¥å‡½æ•°<code>test()</code></li></ol><ol type="1" id="a00c1058-7805-4b47-b407-ac58c8cc9f7d" class="numbered-list" start="3"><li>ï¼ˆåœ¨<code>test()</code>ä¸­ï¼‰<strong>æ‰“å°ï¼ˆPrintï¼‰</strong>2</li></ol><ol type="1" id="c43d4900-e87e-446a-9e89-a25845150291" class="numbered-list" start="4"><li>ï¼ˆåœ¨<code>test()</code> ä¸­ï¼‰awaitå…³é”®å­—æš‚åœæ‰§è¡Œï¼Œä¸ºç«‹å³å¯ç”¨çš„å€¼nullå‘æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ·»åŠ ä¸€ä¸ªä»»åŠ¡</li></ol><ol type="1" id="1e90a311-cd8c-4c47-9f74-ee3283d7910e" class="numbered-list" start="5"><li><code>foo()</code> é€€å‡º</li></ol><ol type="1" id="5aaa9375-2d78-4045-acfd-dc971e278a90" class="numbered-list" start="6"><li><strong>æ‰“å°ï¼ˆPrintï¼‰</strong>3</li></ol><ol type="1" id="30198737-911f-4e5b-b5ff-93cc32e75657" class="numbered-list" start="7"><li>åŒæ­¥çº¿ç¨‹çš„ä»£ç æ‰§è¡Œå®Œæ¯•</li></ol><ol type="1" id="6c0d84db-8905-445d-aede-74967c730253" class="numbered-list" start="8"><li>JavaScriptè¿è¡Œæ—¶ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­<strong>å–å‡º</strong>ï¼ˆ<strong>dequeues</strong>ï¼‰ä»»åŠ¡ï¼Œæ¢å¤å¼‚æ­¥å‡½æ•°æ‰§è¡Œ</li></ol><ol type="1" id="3bdce71c-2320-4aec-a13e-4bdf6abb8bb3" class="numbered-list" start="9"><li>ï¼ˆåœ¨<code>test()</code> ä¸­ï¼‰æ¢å¤æ‰§è¡Œï¼Œ<code>await</code> å–å¾—nullå€¼ï¼ˆè¿™é‡Œæ²¡æœ‰ä½¿ç”¨ï¼‰</li></ol><ol type="1" id="85a843a1-4042-4845-b687-fa5f5af2cb5c" class="numbered-list" start="10"><li>ï¼ˆåœ¨<code>test()</code>ä¸­ï¼‰<strong>æ‰“å°ï¼ˆPrintï¼‰</strong>4</li></ol><ol type="1" id="85f54879-0f13-4105-9e8f-9a7b3ab1d27b" class="numbered-list" start="11"><li><code>test()</code> è¿”å›ï¼ˆä¸€ä¸ªæœŸçº¦ï¼‰</li></ol></li></ul></li></ul><ul id="d1827126-4b1f-4da3-b525-7c7d54e5af85" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœ<code>await</code>åé¢ä¸æ˜¯ç«‹å³å¯ç”¨çš„å€¼è€Œæ˜¯ä¸€ä¸ªæœŸçº¦ï¼Œåˆ™é—®é¢˜ä¼šç¨å¾®å¤æ‚ä¸€ç‚¹ï¼Œæ­¤æ—¶ä¼šæœ‰<mark class="highlight-orange"><em>ä¸¤ä¸ªä»»åŠ¡(?</em></mark><mark class="highlight-blue"><strong><em>å®é™…ä¸Šä»ç„¶æ˜¯ä¸€ä¸ª</em></strong></mark><mark class="highlight-orange"><em>)</em></mark>è¢«æ·»åŠ åˆ°æ¶ˆæ¯é˜Ÿåˆ—å¹¶è¢«å¼‚æ­¥æ±‚å€¼<pre id="205ce846-5226-4eea-ae74-8c5fb866a0da" class="code"><code>// å¼‚æ­¥å‡½æ•°ï¼Œawaitåé¢æ˜¯æœŸçº¦çš„æƒ…å†µ
async function test2() {
  console.log(2);
  console.log(await Promise.resolve(8));
  console.log(9);
}

async function test3() {
  console.log(4);
  console.log(await 6);
  console.log(7);
}
console.log(1);
test2();
console.log(3);
test3();
console.log(5);
// æ‰“å°
1
2
3
4
5
8
9
6
7</code></pre><p id="f8f52e61-ef68-4732-ba5b-1f9addeee1ae" class="block-color-red">æ³¨æ„åœ¨ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹ä¸­ï¼Œç¤ºä¾‹çš„æ‰“å°æ˜¯é¡ºåºçš„1-9ï¼Œä½†æ˜¯å®é™…æƒ…å†µå¹¶éå¦‚æ­¤ï¼Œè¿™æ˜¯å› ä¸ºTC39å¯¹awaitåé¢æ˜¯æœŸçº¦çš„æƒ…å†µå¦‚ä½•å¤„ç†åšäº†ä¸€æ¬¡ä¿®æ”¹ï¼Œä¿®æ”¹åï¼Œæœ¬ä¾‹ä¸­çš„<code>Promise.resolve(8)</code> åªä¼šç”Ÿæˆä¸€ä¸ªå¼‚æ­¥ä»»åŠ¡ï¼ˆå’Œä¸Šé¢çš„ç«‹å³å¯ç”¨å€¼ä¸€æ ·ï¼‰ï¼Œåœ¨æ–°ç‰ˆæµè§ˆå™¨ï¼ˆåŒ…æ‹¬nodeç¯å¢ƒï¼‰ä¸­è¾“å‡ºç»“æœä¸º123458967</p><ul id="64170cf4-eca6-4c1a-bde2-7ec70ab3ccd8" class="bulleted-list"><li style="list-style-type:circle">è¿è¡Œæ—¶ä¼šè¿™æ ·æ‰§è¡Œï¼ˆä¿®æ”¹äº†åŸä¹¦é”™è¯¯çš„åœ°æ–¹ï¼‰<ol type="1" id="2cb597a6-6161-4abc-87f6-3f798344850e" class="numbered-list" start="1"><li>æ‰“å°1</li></ol><ol type="1" id="580d2c5a-91d3-4c0a-bca3-294a50cd33e9" class="numbered-list" start="2"><li>è°ƒç”¨å¼‚æ­¥å‡½æ•°<code>test2()</code></li></ol><ol type="1" id="07a5606b-83bb-42f2-b057-3ed3f2ff6fc5" class="numbered-list" start="3"><li>ï¼ˆåœ¨<code>test2()</code> ä¸­ï¼‰æ‰“å°2</li></ol><ol type="1" id="470ac286-c32f-469b-b93b-88ac5f4399cd" class="numbered-list" start="4"><li>ï¼ˆåœ¨<code>test2()</code> ä¸­ï¼‰awaitå…³é”®å­—æš‚åœæ‰§è¡Œï¼Œå‘æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ·»åŠ ä¸€ä¸ªæœŸçº¦æ‰§è¡Œä»»åŠ¡</li></ol><ol type="1" id="24b1501d-dc99-47a0-b371-22ccd1817384" class="numbered-list" start="5"><li><code>test2()</code> é€€å‡º</li></ol><ol type="1" id="161db442-d158-4735-8df9-a1f2f960ae0a" class="numbered-list" start="6"><li>æ‰“å°3</li></ol><ol type="1" id="00692e6f-fa24-47d3-b77d-3bec23fcf77e" class="numbered-list" start="7"><li>è°ƒç”¨å¼‚æ­¥å‡½æ•°<code>test3()</code> </li></ol><ol type="1" id="fe123a17-edb7-424c-b0fa-bea8177d0a30" class="numbered-list" start="8"><li>ï¼ˆåœ¨<code>test3()</code> ä¸­ï¼‰æ‰“å°4</li></ol><ol type="1" id="41c2cb47-243d-46d7-807b-eadb7ca145ea" class="numbered-list" start="9"><li>ï¼ˆåœ¨<code>test3()</code> ä¸­ï¼‰awaitå…³é”®å­—æš‚åœæ‰§è¡Œï¼Œä¸ºç«‹å³å¯ç”¨çš„å€¼6å‘æ¶ˆæ¯é˜Ÿåˆ—ä¸­æ·»åŠ ä¸€ä¸ªä»»åŠ¡</li></ol><ol type="1" id="702ecde3-8694-4586-887a-4fc44018b234" class="numbered-list" start="10"><li><code>test3()</code> é€€å‡º</li></ol><ol type="1" id="4d51b790-a6bc-4d45-b790-ad91445de8d0" class="numbered-list" start="11"><li>æ‰“å°5</li></ol><ol type="1" id="c0adb3f7-3233-4318-af44-10d961afa8d1" class="numbered-list" start="12"><li><strong>é¡¶çº§çº¿ç¨‹æ‰§è¡Œ</strong>ï¼ˆ<strong>Top-level thread of execution</strong>ï¼‰å®Œæ¯•</li></ol><ol type="1" id="ee4a77f7-5094-4883-8b5f-77fb14de671b" class="numbered-list" start="13"><li>JavaScriptè¿è¡Œæ—¶ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å‡ºæ¢å¤æ‰§è¡Œ<code>test2()</code> çš„ä»»åŠ¡å’ŒæœŸçº¦çš„è§£å†³å€¼8</li></ol><ol type="1" id="168d82fb-4fbf-49a3-8191-09d8db4fd72f" class="numbered-list" start="14"><li>ï¼ˆåœ¨<code>test2()</code>ä¸­ï¼‰æ¢å¤æ‰§è¡Œï¼Œawaitå–å¾—8</li></ol><ol type="1" id="c37a4a3c-743d-408b-90b9-4aa528cc1286" class="numbered-list" start="15"><li>ï¼ˆåœ¨<code>test2()</code> ä¸­ï¼‰æ‰“å°8</li></ol><ol type="1" id="61f3227d-df76-47ea-a88c-b5eaddb1dd99" class="numbered-list" start="16"><li>ï¼ˆåœ¨<code>test2()</code> ä¸­ï¼‰æ‰“å°9</li></ol><ol type="1" id="69025177-c116-4a2c-ae7e-250b14633c3a" class="numbered-list" start="17"><li><code>test2()</code> è¿”å›</li></ol><ol type="1" id="d487d532-6d56-4560-b13a-dc05ce4fe81a" class="numbered-list" start="18"><li>JavaScriptè¿è¡Œæ—¶ä»æ¶ˆæ¯é˜Ÿåˆ—ä¸­å–å‡ºæ¢å¤æ‰§è¡Œ<code>test3()</code> çš„ä»»åŠ¡å’Œç«‹å³å¯ç”¨å€¼6</li></ol><ol type="1" id="50cab742-5ba5-466f-8087-5cca4e498740" class="numbered-list" start="19"><li>åœ¨<code>test3()</code>ä¸­ï¼‰æ¢å¤æ‰§è¡Œï¼Œawaitå–å¾—6</li></ol><ol type="1" id="5f79bc63-ab9c-4100-a565-1a7be03a92e4" class="numbered-list" start="20"><li>ï¼ˆåœ¨<code>test3()</code> ä¸­ï¼‰æ‰“å°6</li></ol><ol type="1" id="2fe47701-db34-4c3d-91f5-ff17489fd7a3" class="numbered-list" start="21"><li>ï¼ˆåœ¨<code>test3()</code> ä¸­ï¼‰æ‰“å°7</li></ol><ol type="1" id="21fbe4b1-d26a-4c3a-8c56-71d06e031d2c" class="numbered-list" start="22"><li><code>test3()</code> è¿”å›</li></ol></li></ul></li></ul><h1 id="ff47428a-94f8-4d36-b0c7-67f9c7ae97d5" class="">3.3 å¼‚æ­¥å‡½æ•°ç­–ç•¥ï¼ˆStrategies for Async Functionsï¼‰</h1><p id="104aa413-eff1-4a74-b78c-84c366e8650b" class="">å¼‚æ­¥å‡½æ•°ç®€å•å®ç”¨ï¼Œæ‰€ä»¥å¾ˆå¿«æˆä¸ºJavaScripté¡¹ç›®ä¸­ä½¿ç”¨æœ€å¹¿æ³›çš„ç‰¹æ€§ä¹‹ä¸€ï¼Œä¸è¿‡ä½¿ç”¨å¼‚æ­¥å‡½æ•°ä»ç„¶æœ‰ä¸€äº›éœ€è¦æ³¨æ„çš„é—®é¢˜å’Œæ‰©å±•</p><h2 id="d138a050-ff3f-4db8-9f09-36026ef67298" class="">3.3.1 å®ç°sleep()ï¼ˆImplementing Sleep()ï¼‰</h2><ul id="a88716c9-4c49-419f-bf37-b84427fadeef" class="bulleted-list"><li style="list-style-type:disc">åœ¨æ”¯æŒå¤šçº¿ç¨‹ï¼ˆJavaScriptæ˜¯å•çº¿ç¨‹ï¼‰çš„è¯­è¨€ï¼ˆå¦‚Javaï¼‰ä¸­ï¼Œå¯ä»¥ä½¿ç”¨<code>Thread.sleep()</code> ä¹‹ç±»çš„å‡½æ•°ï¼Œä»¥ä¾¿åœ¨ç¨‹åºä¸­åŠ å…¥<strong>éé˜»å¡çš„æš‚åœ</strong>ï¼ˆ<strong>non-blocking delay</strong>ï¼‰</li></ul><ul id="8804350f-57c5-4c87-bbf8-ae8d9b1383b0" class="bulleted-list"><li style="list-style-type:disc">åœ¨ä»¥å‰çš„JavaScriptä¸­ï¼Œè¿™ä¸ªéœ€æ±‚é€šè¿‡<code>setTimeout()</code> åˆ©ç”¨JavaScript<strong>è¿è¡Œæ—¶ï¼ˆruntimeï¼‰</strong>çš„è¡Œä¸ºæ¥å®ç°ï¼Œæœ‰äº†å¼‚æ­¥å‡½æ•°åï¼Œä¸€ä¸ªç®€å•çš„ç®­å¤´å‡½æ•°å°±å¯ä»¥å®ç°äº†<pre id="66783603-bd25-460c-8d7c-b180d5251454" class="code"><code>// éé˜»å¡æš‚åœ çº¿ç¨‹
async function sleep(delay) {
  return new Promise((resolve) =&gt; setTimeout(resolve, delay));
}

async function foo() {
  const t0 = Date.now();
  await sleep(1500); // æš‚åœçº¦1500æ¯«ç§’
  console.log(Date.now() - t0);
}
foo(); // 1509 (å¤§æ¦‚æ•°å­—ï¼Œå› ä¸ºå¼•æ“å’Œè®¾å¤‡ä¼šæœ‰å·®å¼‚)</code></pre><ul id="c891cb0e-8d0d-4815-b0c8-4288a662c5fc" class="bulleted-list"><li style="list-style-type:circle">åœ¨è¿™é‡Œ<code>sleep()</code> å°±ç›¸å½“äºéé˜»å¡çš„æš‚åœäº†1.5sçš„æ—¶é—´ï¼Œç­‰å¾…å®Œè¿™ä¸ªæ—¶é—´åå¼‚æ­¥å‡½æ•°æ‰å¼€å§‹ç»§ç»­æ‰§è¡Œ</li></ul><ul id="abbf01d4-d63d-4157-9adc-82957a5f1048" class="bulleted-list"><li style="list-style-type:circle">ä»¥çº¿ç¨‹çš„è§’åº¦çœ‹ï¼Œ<code>foo()</code> ç›¸å½“äºä¸€ä¸ªçº¿ç¨‹ï¼Œåœ¨é‡åˆ°<code>await sleep(1500)</code> çš„æ—¶å€™æš‚åœäº†1.5sï¼Œç„¶åç»§ç»­æ‰§è¡Œ</li></ul></li></ul><h2 id="01f7bf15-d53a-482c-b4d6-7007ebf7c5c4" class="">3.3.2 åˆ©ç”¨å¹³è¡Œæ‰§è¡Œï¼ˆMaximizing Parallelizationï¼‰</h2><p id="98aa982e-4fb0-43d0-b9fe-08777cbd0170" class="">Maximizing æ˜¯æœ€å¤§åŒ–ä¹‹æ„ï¼ŒParallelizationæ˜¯å¹¶è¡ŒåŒ–ä¹‹æ„ï¼Œè¿™ä¸€å°èŠ‚è®²è¿°äº†ä¸€ç§åˆ©ç”¨<strong>æœŸçº¦å¹¶è¡Œæ‰§è¡Œçš„æ–¹å¼</strong>å°†å¼‚æ­¥å‡½æ•°çš„<strong>æ‰§è¡Œæ—¶é—´ç¼©å°</strong>çš„æ¨¡å¼ï¼Œæ‰€è°“çš„æœ€å¤§åŒ–å¹¶è¡Œä¹‹æ„å°±æ˜¯å°½å¯èƒ½åœ¨å¼‚æ­¥å‡½æ•°ä¸­å¹¶è¡Œæ‰€æœ‰å¼‚æ­¥æ“ä½œ</p><hr id="4b5529bf-7dbe-4b80-8796-7ebc7a63f227"/><ul id="b89559a3-86ed-4ddb-9fb6-b204108f7e77" class="bulleted-list"><li style="list-style-type:disc">åœ¨ä½¿ç”¨awaitçš„æ—¶å€™ï¼Œéœ€è¦ç­‰å¾…åé¢çš„è¯­å¥æ‰§è¡Œå®Œæ¯•å†æ¥ç€æ‰§è¡Œä¹‹åçš„è¯­å¥ï¼ˆå³<a href="3%20%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0%EF%BC%88ASYNC%20FUNCTIONS%EF%BC%89.html">åœæ­¢å’Œæ¢å¤æ‰§è¡Œ</a>ï¼‰</li></ul><ul id="c56fefcf-d97d-4fc6-8597-7baa90ee1fdf" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœæ¯æ¬¡æ‰§è¡Œçš„å¼‚æ­¥æ“ä½œéƒ½ç›´æ¥æ”¾åœ¨awaitåï¼Œåˆ™è¿™äº›å¼‚æ­¥æ“ä½œéƒ½æ˜¯ä¸²è¡Œçš„ï¼Œä¸€ä¸ªæ‰§è¡Œå®Œæ¯•åæ‰å¼€å§‹æ‰§è¡Œå¦å¤–ä¸€ä¸ªï¼Œå¾ˆå¯èƒ½é”™è¿‡<strong>å¹³è¡ŒåŠ é€Ÿ</strong>ï¼ˆ<strong>parallelization speedups</strong>ï¼‰çš„æœºä¼š<pre id="deb859ec-bca8-4583-8048-61c97bb25e15" class="code"><code>async function randomDelay(id) {
  const delay = Math.random() * 1000;
  return new Promise((resolve) =&gt;
    setTimeout(() =&gt; {
      console.log(`${id} finished: ${delay}ms`);
      resolve();
    }, delay)
  );
}

async function foo1() {
  const t0 = Date.now();
  await randomDelay(0);
  await randomDelay(1);
  await randomDelay(2);
  await randomDelay(3);
  await randomDelay(4);
  console.log(`${Date.now() - t0}ms elapsed`);
}

foo1();
// æ‰“å°
0 finished: 214.19967228425307ms
1 finished: 119.86127024318205ms
2 finished: 993.3495744350952ms
3 finished: 94.76989928516267ms
4 finished: 35.69635694252315ms
1498ms elapsed
</code></pre><ul id="acbaeb64-58d0-4b27-885d-d3e9037361f0" class="bulleted-list"><li style="list-style-type:circle">å®šä¹‰äº†ä¸€ä¸ª<code>randomDelay()</code> å‡½æ•°ç”¨äºç”Ÿæˆå¼‚æ­¥çš„<code>Promise</code> ç¤ºä¾‹ï¼Œç„¶åä½¿ç”¨<code>await</code> ç­‰å¾…è¿™äº›æœŸçº¦è§£å†³ï¼Œæœ€åæ‰“å°æ‰§è¡Œæ—¶é—´</li></ul><ul id="d8f6bb83-d1cf-4f5c-a782-7e97b8497ba5" class="bulleted-list"><li style="list-style-type:circle">æ‰“å°çš„ç»“æœæ˜¯å˜åŒ–ï¼ˆç”Ÿæˆçš„æœŸçº¦æ‰§è¡Œæ—¶é—´éšæœºï¼‰çš„ï¼Œä½†æ˜¯æœ‰ä¸¤ç‚¹å§‹ç»ˆä¸å˜<ul id="a86770fe-8c30-4ca3-b5aa-33dff80e0e10" class="bulleted-list"><li style="list-style-type:square">æœŸçº¦æ‰“å°çš„é¡ºåºå§‹ç»ˆæ˜¯ä»0-5çš„ï¼ˆå› ä¸ºç­‰å¾…ç¬¬ä¸€ä¸ªæœŸçº¦è§£å†³åæ‰åˆ›å»ºç­‰å¾…å¦ä¸€ä¸ªæœŸçº¦æ‰§è¡Œå®Œæ¯•ï¼‰</li></ul><ul id="34e704d1-134a-4db0-a8ca-a0538224cfa2" class="bulleted-list"><li style="list-style-type:square">æœ€ç»ˆæ¶ˆè€—æ—¶é—´å¤§ä½“ä¸Šç­‰äºæ¯ä¸ªæœŸçº¦çš„è§£å†³çš„æ—¶é—´ä¹‹å’Œï¼ˆç•¥å¤§ï¼Œå› ä¸ºç®—ä¸Šäº†è¯­å¥æ‰§è¡Œæ—¶é—´ï¼‰</li></ul></li></ul><ul id="4e71194e-126c-464a-8426-aea222d6a1a6" class="bulleted-list"><li style="list-style-type:circle">å¦‚æœæœŸçº¦è¿‡å¤šï¼Œå¯ä»¥ä½¿ç”¨forå¾ªç¯ï¼Œå¦‚ä¸‹</li></ul><pre id="fbc9986f-c937-41b7-ae28-c1ef8265793a" class="code"><code>async function foo2() {
  const t0 = Date.now();
  for (let i = 0; i &lt; 5; i++) {
    await randomDelay(i);
  }
  console.log(`${Date.now() - t0}ms elapsed`);
}
foo2();
// æ‰“å°ç»“æœï¼ˆå¯èƒ½ï¼‰
0 finished: 546.2711688323944ms
1 finished: 762.0109712491126ms
2 finished: 9.054193227309714ms
3 finished: 930.0128971909828ms
4 finished: 1.1669204783719689ms
2292ms elapsed</code></pre></li></ul><ul id="289e5a93-579b-481d-8a36-930660467800" class="bulleted-list"><li style="list-style-type:disc">ä¸Šè¿°çš„è¿™ç§æ–¹å¼å¹¶æ²¡æœ‰åˆ©ç”¨æœŸçº¦çš„å¹¶è¡Œæ‰§è¡Œæ–¹å¼ï¼Œå³ä½¿è¿™äº›æœŸçº¦ä¹‹é—´æ²¡æœ‰ä¾èµ–ï¼Œå¼‚æ­¥å‡½æ•°ä¹Ÿä¼šä¾æ¬¡æš‚åœï¼Œç­‰å¾…æ¯ä¸ªæœŸçº¦æ‰§è¡Œå®Œæ¯•ï¼Œç„¶åå†åˆ›å»ºæ‰§è¡Œä¸‹ä¸€ä¸ªæœŸçº¦ï¼Œè¿™æ ·å¯ä»¥<strong>ä¿è¯æ‰§è¡Œé¡ºåºå’Œè·å–ç»“æœçš„é¡ºåº</strong></li></ul><ul id="3504c3b0-c8b0-4574-b499-ea6390ce3236" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœæ‰§è¡Œé¡ºåº<strong>ä¸æ˜¯</strong>å¿…é¡»ä¿è¯çš„ï¼ˆawaitè·å–ç»“æœçš„é¡ºåºè¿˜æ˜¯è¦ä¿è¯ï¼‰ï¼Œé‚£ä¹ˆå¯ä»¥ä¸€æ¬¡æ€§åˆå§‹åŒ–æ‰€æœ‰çš„æœŸçº¦ï¼Œç„¶å’Œåˆ†åˆ«ç­‰å¾…å®ƒä»¬çš„ç»“æœï¼Œè¿™æ ·å°±èƒ½è®©æ‰€æœ‰æœŸçº¦å¹¶è¡Œæ‰§è¡Œï¼Œä¼˜åŒ–å¼‚æ­¥å‡½æ•°çš„æ‰§è¡Œæ—¶é—´<pre id="418b56fe-c5e5-4885-8434-7ba85dcd7052" class="code"><code>async function foo3() {
  const t0 = Date.now();
  const p0 = randomDelay(0);
  const p1 = randomDelay(1);
  const p2 = randomDelay(2);
  const p3 = randomDelay(3);
  const p4 = randomDelay(4);

  await p0;
  await p1;
  await p2;
  await p3;
  await p4;

  console.log(`${Date.now() - t0}ms elapsed`);
}
foo3();
// å¯èƒ½çš„æ‰“å°
0 finished: 439.2154559340167ms
4 finished: 484.21195483601355ms
2 finished: 555.1757965519266ms
1 finished: 718.3955819162295ms
3 finished: 926.4098582123498ms
939ms elapsed</code></pre><ul id="39afbeff-3213-4d32-b4d4-3252042b16db" class="bulleted-list"><li style="list-style-type:circle">æœŸçº¦æ²¡æœ‰æŒ‰ç…§é¡ºåºæ‰“å°ï¼Œè€Œæ˜¯æŒ‰ç…§å®Œæˆçš„æ—¶é—´è¿›è¡Œæ‰“å°ï¼Œä½†æ˜¯await<strong>æŒ‰é¡ºåº</strong>æ”¶åˆ°äº†æ¯ä¸ªæœŸçº¦è§£å†³çš„å€¼</li></ul><ul id="cc78e965-eb6c-4092-983b-533467c62be2" class="bulleted-list"><li style="list-style-type:circle">æ‰“å°çš„ç»“æœæ˜¯å˜åŒ–çš„ï¼Œä½†æ˜¯è¿™ç§ä¸²è¡Œæ‰“å°æœ‰ä¸¤ç‚¹æ˜¯ä¸å˜çš„<ul id="0ecefc10-c1f0-4a9e-83b1-2e146bcc19a1" class="bulleted-list"><li style="list-style-type:square">æ‰“å°é¡ºåºæŒ‰ç…§éšæœºå¾—åˆ°çš„<code>delay</code> çš„å¤§å°æŒ‰ä»å°åˆ°å¤§è¿›è¡Œæ‰“å°</li></ul><ul id="c1b8181b-4d16-4895-8b03-678b7c8abb12" class="bulleted-list"><li style="list-style-type:square">æœ€ç»ˆæ¶ˆè€—çš„æ—¶é—´å¤§ä½“ç­‰äºæœ€åè§£å†³çš„æœŸçº¦èŠ±è´¹çš„æ—¶é—´ï¼ˆå¹¶è¡Œä¼˜åŒ–çš„ç»“æœä¼šä½¿å¾—å¼‚æ­¥å‡½æ•°æ‰§è¡Œæ—¶é—´æ¯”ä¸Šè¿°çš„è¦çŸ­ï¼‰</li></ul></li></ul><ul id="878213bf-9ee6-4c10-9676-aae1cc4e14bf" class="bulleted-list"><li style="list-style-type:circle">å¦‚æœå¼‚æ­¥æ‰§è¡Œçš„æ“ä½œè¿‡å¤šï¼Œå¯ä»¥ä½¿ç”¨forå¾ªç¯å’Œæ•°ç»„è§£å†³</li></ul><pre id="97eb9435-2283-4c55-8093-acb7d233966e" class="code"><code>async function foo4() {
  const t0 = Date.now();
  const promises = new Array(5).fill(0).map((v, i) =&gt; randomDelay(i));
  for (const promise of promises) {
    await promise;
  }
  console.log(`${Date.now() - t0}ms elapsed`);
}

foo4();
// å¯èƒ½çš„æ‰“å°
0 finished: 385.3511002437029ms
2 finished: 469.86862617835203ms
3 finished: 661.1382122053251ms
1 finished: 807.2015049467173ms
4 finished: 909.7679726941122ms
917ms elapsed</code></pre><ul id="05ccc5bc-7cf8-49b7-ab7b-93fbccd6cfe7" class="bulleted-list"><li style="list-style-type:circle">æ³¨æ„è¿™é‡Œçš„<code>promises</code> æ•°ç»„ä¸èƒ½ä½¿ç”¨<code>forEach</code> æ–¹æ³•éå†ï¼Œå› ä¸ºå¼‚æ­¥å‡½æ•°çš„å¼‚æ­¥æ€§ä¸æ‰©å±•åˆ°å†…éƒ¨çš„å‡½æ•°ä½œç”¨åŸŸï¼ˆä½¿ç”¨<code>forEach</code> å†…éƒ¨æ— æ³•ä½¿ç”¨<code>await</code>ï¼‰</li></ul></li></ul><h2 id="820a04f0-1d47-418b-b2f3-93ddae6cf286" class="">3.3.3 ä¸²è¡Œæ‰§è¡ŒæœŸçº¦ï¼ˆSerial Promise Executionï¼‰</h2><ul id="e8274964-3796-4b6f-819a-5eba37a93882" class="bulleted-list"><li style="list-style-type:disc">åœ¨<a href="2%20%E6%9C%9F%E7%BA%A6%EF%BC%88Promise%EF%BC%89.html">2.4.3 ä¸²è¡ŒæœŸçº¦åˆæˆï¼ˆSerial Promise Compositionï¼‰</a> çš„ä¸²è¡ŒæœŸçº¦åˆæˆä¸­ï¼Œè®¨è®ºè¿‡å¦‚ä½•æŠŠç›¸äº’ä¾èµ–çš„æœŸçº¦é€šè¿‡å‡½æ•°åˆæˆè¿›è¡Œä»£ç ä¼˜åŒ–ç¼–å†™ï¼Œæœ‰äº†async/awaitå…³é”®å­—åï¼ŒæœŸçº¦è¿é”ä¼šå˜å¾—æ›´ç®€å•ï¼Œä¸å†éœ€è¦é€šè¿‡æ˜¾å¼çš„ä¹¦å†™<code>Promise</code> ä¸€ä¸ªä¸ªè¿›è¡Œä¼ é€’<pre id="7c3acbb1-6cac-4723-ba58-0688b49deee8" class="code"><code>function addTwo(x) {
  return x + 2;
}

function addThree(x) {
  return x + 3;
}

function addFive(x) {
  return x + 5;
}

async function addTen(x) {
  for (const fn of [addTwo, addThree, addFive]) {
    x = await fn(x);
  }
  return x;
}
addTen(36).then(console.log); // 46</code></pre></li></ul><ul id="11f21a18-c2ae-48ba-863d-b5851fcf4b18" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœä½¿ç”¨<a href="2%20%E6%9C%9F%E7%BA%A6%EF%BC%88Promise%EF%BC%89.html">å‡½æ•°åˆæˆ</a>çš„æ–¹æ³•ï¼Œå¦‚ä¸‹<pre id="4a42e9e3-eb3c-4496-8d57-a8b2e389c683" class="code"><code>function compose(...fns) {
  return (x) =&gt;
    fns.reduce((promise, fn) =&gt; promise.then(fn), Promise.resolve(x));
}

let addFifteen = compose(addFive, addTwo, addThree, addFive);
addFifteen(22).then(console.log);</code></pre></li></ul><h2 id="75716273-3bf7-430e-a709-82dde8fba6db" class="">3.3.4 æ ˆè¿½è¸ªä¸å†…å­˜ç®¡ç†ï¼ˆStack Traces and Memory Managementï¼‰</h2><p id="12eb150c-a42f-42eb-9adf-92f5fcdc7665" class="">åœ¨JavaScriptè¿è¡Œä»£ç æ—¶ï¼Œå¦‚æœé‡åˆ°é”™è¯¯ï¼ŒæŠ›å‡ºé”™è¯¯ä¿¡æ¯ï¼Œè€Œé”™è¯¯ä¿¡æ¯å…·ä½“å‘ç”Ÿçš„ä½ç½®ä¼šç»™å‡ºå…·ä½“çš„æ ˆè¿½è¸ªä¿¡æ¯ï¼Œè¿™äº›æ ˆè¿½è¸ªä¿¡æ¯åº”è¯¥ç›´æ¥è¡¨ç¤ºå‡½æ•°ä¹‹é—´çš„å¥—ç”¨å…³ç³»ï¼Œå¦‚ä¸‹</p><pre id="3596ecf2-3349-429b-8471-06025c030e1a" class="code"><code>function getError() {
  if (arguments[0] === undefined) {
    throw new Error(&quot;need first argument&quot;);
  }
  return 2;
}

function foo() {
  let k = getError();
  return k + 1;
}

foo();
// æ‰“å°
Uncaught Error: need first argument
    at getError (&lt;anonymous&gt;:3:11)
    at foo (&lt;anonymous&gt;:9:11)
    at &lt;anonymous&gt;:13:1</code></pre><ul id="677730dc-1d4d-4f73-817b-67427d4454e5" class="bulleted-list"><li style="list-style-type:disc">è¿™é‡Œçš„é”™è¯¯ä¿¡æ¯æ˜¯<code><mark class="highlight-red"><strong>need first argument</strong></mark></code><mark class="highlight-red"><strong> </strong></mark>ï¼Œè€Œä¸‹é¢çš„ä¸‰æ¡å°±æ˜¯å…·ä½“æŠ›å‡ºé”™è¯¯çš„ä½ç½®ç»™å‡ºçš„æ ˆè¿½è¸ªä¿¡æ¯<ul id="af56b373-5375-42be-8745-4b05c6329cad" class="bulleted-list"><li style="list-style-type:circle">å®ƒæŒ‡å‡ºå‡ºç°é”™è¯¯çš„ä½ç½®åœ¨<code>getError()</code> å‡½æ•°ä¸­</li></ul><ul id="1352afbb-773b-4bca-92fb-63b35c494bcc" class="bulleted-list"><li style="list-style-type:circle">è€Œ<code>getError()</code> å‡½æ•°åœ¨<code>foo()</code> å‡½æ•°ä¸­è¢«è°ƒç”¨</li></ul><ul id="7a35ba0f-da72-4e38-92f8-06adc674eecb" class="bulleted-list"><li style="list-style-type:circle">è€Œå‡ºé”™çš„<code>foo()</code> å‡½æ•°åœ¨å…¨å±€çš„ç¬¬13:1ä½ç½®è¢«è°ƒç”¨</li></ul></li></ul><p id="f756bad8-aef0-4839-800a-77040161b961" class="">å¯¹äºå¼‚æ­¥å‡½æ•°å’ŒæœŸçº¦è€Œè¨€ï¼Œ<strong>äºŒè€…çš„æ ˆè¿½è¸ªä¿¡æ¯å¯èƒ½æœ‰æ‰€åŒºåˆ«</strong>ï¼Œè¿™ä¼šå¯¼è‡´å†…éƒ¨ç®¡ç†çš„å·®å¼‚</p><hr id="494af2ba-08f6-4f98-b5e0-0018e72c2668"/><ul id="304f6bd8-0315-4bf0-9040-612a8a1ef801" class="bulleted-list"><li style="list-style-type:disc">æœŸçº¦ä¸å¼‚æ­¥å‡½æ•°çš„åŠŸèƒ½æœ‰ç›¸å½“ç¨‹åº¦çš„é‡å ï¼ˆå¦‚ä¸Šè¿°çš„ä¸²è¡Œæ‰§è¡ŒæœŸçº¦ï¼‰ï¼Œä½†æ˜¯å®ƒä»¬åœ¨å†…å­˜ä¸­çš„è¡¨ç¤ºåˆ™å·®åˆ«å¾ˆå¤§,ä¸‹é¢æ˜¯ä½¿ç”¨æœŸçº¦çš„æ ˆè¿½è¸ªä¿¡æ¯ä¾‹å­<pre id="1d26bab6-e9e4-460e-a9d7-4ba49776b17f" class="code"><code>// æœŸçº¦
function barPromiseExecutor(resolve, reject) {
  setTimeout(reject, 1000, &quot;bar&quot;);
}
function bar() {
  new Promise(barPromiseExecutor);
}
bar();
// æŠ¥é”™æ‰“å°
// Uncaught (in promise) bar
// setTimeout (async)		
// barPromiseExecutor
// bar
// (anonymous)</code></pre><ul id="78385ad3-1e5b-47cb-8f4f-b8e6dbbd7974" class="bulleted-list"><li style="list-style-type:circle">æ ˆè¿½è¸ªä¿¡æ¯åº”è¯¥ç›´æ¥è¡¨ç°JavaScriptå¼•æ“<strong>å½“å‰</strong>æ ˆå†…å­˜ä¸­å‡½æ•°è°ƒç”¨ä¹‹é—´çš„åµŒå¥—å…³ç³»</li></ul><ul id="3767103a-d70d-4e65-89c2-90b15716b675" class="bulleted-list"><li style="list-style-type:circle">å¯ä»¥çœ‹åˆ°æŠ¥é”™ä¿¡æ¯åŒ…æ‹¬åµŒå¥—å‡½æ•°çš„æ ‡è¯†ç¬¦ï¼Œé‚£æ˜¯è¢«è°ƒç”¨ä»¥åˆ›å»ºæœ€åˆæœŸçº¦çš„æ‰§è¡Œå‡½æ•°ï¼ˆ<code>barPromiseExecutor</code> å’Œ<code>bar</code>ï¼‰ï¼Œä½†æ˜¯åœ¨æ‰§è¡Œ<code>bar()</code> ï¼Œè¿™äº›å‡½æ•°<strong>å·²ç»è¿”å›ï¼ˆalready returnï¼‰</strong>äº†ï¼Œå› æ­¤æ ˆè¿½è¸ªä¸­åº”è¯¥çœ‹ä¸åˆ°å®ƒä»¬</li></ul><ul id="bbf0c46d-ebc0-46a8-921a-0a1fe8109b57" class="bulleted-list"><li style="list-style-type:circle">ä½†æ˜¯JavaScriptå¼•æ“ä¼š<strong>åœ¨åˆ›å»ºæœŸçº¦æ—¶</strong>å°½å¯èƒ½ä¿ç•™<strong>å®Œæ•´çš„è°ƒç”¨æ ˆ</strong>ï¼Œåœ¨æŠ›å‡ºé”™è¯¯æ—¶ï¼Œ<strong>è°ƒç”¨æ ˆ</strong>ï¼ˆ<strong>call stack</strong>ï¼‰å¯ä»¥ç”±è¿è¡Œæ—¶çš„é”™è¯¯å¤„ç†é€»è¾‘<strong>å›æ”¶</strong>ï¼ˆ<strong>retrievable</strong>ï¼‰ï¼Œæ‰€ä»¥è¿™äº›æ ˆè¿½è¸ªä¿¡æ¯å°±ä¼šå‡ºç°åœ¨æŠ¥é”™çš„ä¿¡æ¯ä¸­ï¼Œè¿™ä¹Ÿæ„å‘³ç€æ ˆè¿½è¸ªä¿¡æ¯ä¼š<strong>å ç”¨å†…å­˜ï¼Œä»è€Œå¸¦æ¥</strong></li></ul></li></ul><ul id="5f4853b4-9930-4727-b3a1-beea3ce39f83" class="bulleted-list"><li style="list-style-type:disc">ä½†æ˜¯ä½¿ç”¨<code>await/async</code> å…³é”®å­—ä½¿å¾—barå˜ä¸ºå¼‚æ­¥å‡½æ•°ï¼Œç­‰å¾…åˆ›å»ºçš„æœŸçº¦è½åœ°çŠ¶æ€ï¼Œè¿™ä¸ªæ—¶å€™æ ˆè¿½è¸ªä¿¡æ¯å°±èƒ½å‡†ç¡®åœ°åæ˜ å½“å‰çš„è°ƒç”¨æ ˆ<pre id="7af7c5d8-2042-4490-84c9-87980089548c" class="code code-wrap"><code>async function bar2() {
  await new Promise(barPromiseExecutor);
}
bar2();
// Uncaught (in promise) bar
// bar2	
// await in bar2 (async)		
// (anonymous)</code></pre><ul id="2ff3fd06-3cac-47c4-880b-cfee7715a0de" class="bulleted-list"><li style="list-style-type:circle"><code>barPromiseExecutor</code> æ‰§è¡Œåå·²ç»è¿”å›ï¼Œæ‰€ä»¥å®ƒä¸åœ¨é”™è¯¯ä¿¡æ¯ä¸­ï¼Œä½†æ˜¯<code>bar2</code> å› ä¸º<code>await</code> çš„ç¼˜æ•…è¢«æŒ‚èµ·ï¼Œå¹¶æ²¡æœ‰é€€å‡ºï¼Œæ‰€ä»¥é”™è¯¯ä¿¡æ¯ä¸­æœ‰<code>bar2</code></li></ul><ul id="81935195-9e64-437c-a194-c36cbf2f0d0c" class="bulleted-list"><li style="list-style-type:circle">æ˜¯<code>bar2</code> ä¸­çš„<code>await</code> å…³é”®å­—æ‰€åœ¨è¯­å¥æŠ›å‡ºçš„å¼‚æ­¥é”™è¯¯ï¼Œæ‰€ä»¥æ ˆä¿¡æ¯åŒ…å«<code>await in bar2 (async)</code></li></ul><ul id="696dc6dd-9a45-498c-9d5f-485010f95931" class="bulleted-list"><li style="list-style-type:circle"><del>æœ€åçš„åŒ¿åå‡½æ•°å®é™…ä¸Šæ˜¯</del><del><code>reject</code></del><del> </del></li></ul><ul id="fe09a66d-1a94-4d6e-8cbb-7be223da9f9b" class="bulleted-list"><li style="list-style-type:circle">JavaScriptè¿è¡Œæ—¶å¯ä»¥ç®€å•åœ°åœ¨åµŒå¥—å‡½æ•°ä¸­å­˜å‚¨æŒ‡å‘<strong>åŒ…å«å‡½æ•°</strong>ï¼ˆ<strong>container function</strong>ï¼‰çš„æŒ‡é’ˆï¼Œå°±è·Ÿå¯¹å¾…åŒæ­¥å‡½æ•°è°ƒç”¨æ ˆä¸€æ ·ï¼Œè¿™ä¸ªæŒ‡é’ˆå®é™…ä¸Šå­˜å‚¨åœ¨å†…å­˜ä¸­ï¼Œå¯ç”¨äºåœ¨å‡ºé”™æ—¶ç”Ÿæˆæ ˆè¿½è¸ªä¿¡æ¯ï¼Œè¿™æ ·å°±ä¸ä¼šåƒä¹‹å‰ï¼ˆåªä½¿ç”¨æœŸçº¦ï¼‰çš„ä¾‹å­å¸¦æ¥é¢å¤–çš„æ¶ˆè€—ï¼Œå› æ­¤åœ¨é‡è§†æ€§èƒ½çš„åº”ç”¨ä¸­å¯ä»¥ä¼˜å…ˆè€ƒè™‘</li></ul></li></ul><p id="1012aaaf-c717-4842-9df6-f42eb4a7b801" class=""><div class="indented"><p id="aa6978f8-7c89-4e97-92a7-a39d1ee445e0" class="">
</p></div></p></div></div><p id="8371453d-adb7-4279-b6fb-df9cd9a0255b" class="">
</p></div></article></body></html>