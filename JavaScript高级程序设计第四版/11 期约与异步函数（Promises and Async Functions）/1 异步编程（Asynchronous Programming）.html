<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>1. å¼‚æ­¥ç¼–ç¨‹ï¼ˆAsynchronous Programmingï¼‰</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-opaquegray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style><link rel="stylesheet" href="../../style.css"></head><body><article id="4aaaf06c-276e-47f6-8403-929370786d6e" class="page sans"><header><div class="page-header-icon undefined"><span class="icon">ğŸ±</span></div><h1 class="page-title">1. å¼‚æ­¥ç¼–ç¨‹ï¼ˆAsynchronous Programmingï¼‰</h1></header><div class="page-body"><ul id="1c5d9dce-7114-48c5-8fa7-6ddbe6a4b281" class="bulleted-list"><li style="list-style-type:disc"><strong>åŒæ­¥è¡Œä¸º</strong>ï¼ˆ<strong>synchronous behavior</strong>ï¼‰å’Œ<strong>å¼‚æ­¥è¡Œä¸º</strong>ï¼ˆ<strong>asynchronous behavior</strong>ï¼‰çš„<strong>å¯¹ç«‹ç»Ÿä¸€</strong>ï¼ˆ<strong>dualityï¼Œ äºŒè±¡æ€§</strong>ï¼‰æ˜¯è®¡ç®—æœºç§‘å­¦ä¸­ä¸€ä¸ª<strong>åŸºç¡€æ¦‚å¿µ</strong>ï¼ˆ<strong>fundamental concept</strong>ï¼‰ï¼Œå°¤å…¶åƒJavaScriptè¿™ç§<strong>å•çº¿ç¨‹äº‹ä»¶å¾ªç¯æ¨¡å‹</strong>ï¼ˆ<strong>single-threaded event loop model</strong>ï¼‰ä¸­è¯­è¨€ä¸­ï¼ŒåŒæ­¥è¡Œä¸ºå’Œå¼‚æ­¥è¡Œä¸ºæ›´æ˜¯éœ€è¦ç†è§£çš„åŸºç¡€æ¦‚å¿µ<ul id="75555654-8d1b-4fca-a53e-95f79893881e" class="bulleted-list"><li style="list-style-type:circle">åŒæ­¥è¡Œä¸ºï¼šä¹‹å‰ç« èŠ‚å­¦ä¹ çš„æ‰€æœ‰ä¾‹å­éƒ½æ˜¯åŒæ­¥è¡Œä¸ºï¼Œå³æŒ‰ç…§ä»£ç é¡ºåºä»ä¸Šåˆ°ä¸‹å¼€å§‹è§£é‡Šæ‰§è¡Œï¼ˆä»£ç æå‡ä¹Ÿä»…ä»…æ˜¯åœ¨æå‡åæŒ‰é¡ºåºæ‰§è¡Œï¼Œä»ç„¶å±äºåŒæ­¥è¡Œä¸ºï¼‰</li></ul><ul id="f7ff3ba7-0c0c-4d07-a31a-9d0430bd4d7c" class="bulleted-list"><li style="list-style-type:circle">å¼‚æ­¥è¡Œä¸ºï¼šå¼‚æ­¥è¡Œä¸º<strong>æ‰¿æ‹…</strong>ï¼ˆ<strong>is borne out of</strong>ï¼‰äº†å› <strong>é«˜ååé‡è®¡ç®—</strong>ï¼ˆ<strong>higher computational throughput</strong>ï¼‰è€Œ<strong>é«˜å»¶è¿Ÿ</strong>ï¼ˆ<strong>high-latency</strong>ï¼‰çš„æ“ä½œçš„ <strong>ä¼˜åŒ–</strong>ï¼ˆ<strong>optimize</strong>ï¼‰éœ€æ±‚ï¼›å®ƒçš„æ ¸å¿ƒåœ¨äºï¼Œå¦‚æœåœ¨ç­‰å¾…å…¶å®ƒæ“ä½œå®Œæˆçš„åŒæ—¶ï¼Œå³ä½¿è¿è¡Œå…¶å®ƒ<strong>æŒ‡ä»¤</strong>ï¼ˆ<strong>instructions</strong>ï¼‰ï¼Œç³»ç»Ÿä¹Ÿèƒ½ä¿æŒç¨³å®šï¼Œé‚£ä¹ˆè¿™æ ·åšå°±æ˜¯åŠ¡å®çš„</li></ul></li></ul><ul id="a52bca9e-4996-4a0b-a9f3-3f55aa526bce" class="bulleted-list"><li style="list-style-type:disc">æ›´è¿›ä¸€æ­¥ï¼Œ<strong>å¼‚æ­¥æ“ä½œ</strong>ï¼ˆ<strong>asynchronous operations</strong>ï¼‰ä¸ä¸€å®šåªèƒ½åœ¨è®¡ç®—é‡<strong>å¯†é›†</strong>ï¼ˆ<strong>intensive</strong>ï¼‰è€Œå¯¼è‡´é«˜å»¶è¿Ÿä¸­ä½¿ç”¨ï¼›åªè¦ä½ ä¸æƒ³ä¸ºç­‰å¾…æŸä¸ªæ“ä½œè€Œ<strong>é˜»å¡çº¿ç¨‹æ‰§è¡Œ</strong>ï¼ˆ<strong>block a thread of execution</strong>ï¼‰ï¼Œé‚£ä¹ˆä»»ä½•æ—¶å€™éƒ½å¯ä»¥ä½¿ç”¨ï¼ˆå³å¯ä»¥å°†è¿™ä¸ªæ“ä½œå˜ä¸ºå¼‚æ­¥æ“ä½œï¼‰</li></ul><div id="d5930898-0ccf-4bd1-b9e8-eec132b43bf1" class="column-list"><div id="4650500e-ae08-480c-888f-9c92e4a2f724" style="width:18.75%" class="column"><nav id="e32800f4-c826-4422-9914-dab7431bc108" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#33531799-b1dd-4063-803b-e2c56f96fa1c">1.1 åŒæ­¥ä¸å¼‚æ­¥ï¼ˆSynchronous vs. Asynchronous JavaScriptï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#57163fb7-e0ad-4e92-928e-be7162ee6638">1.1.1 åŒæ­¥è¡Œä¸ºï¼ˆSynchronous Behaviorï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#6132b02f-29cb-4dd8-951b-a163eedf10f6">1.1.1.1 ç†è§£åŒæ­¥è¡Œä¸º</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#ae6a331d-945e-4760-992d-04138a0d91bb">1.1.1.2 ä¾‹å­</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#3e88f46e-2b40-45cd-9841-52b5095a82e7">1.1.2 å¼‚æ­¥è¡Œä¸ºï¼ˆ<strong>Asynchronous Behavior</strong>ï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#502d4f4a-3063-4df0-b5c8-946dd911a721">1.1.2.1 ç†è§£å¼‚æ­¥è¡Œä¸º</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#f1d54ae5-0e44-40b4-a908-762ec80d453b">1.1.2.2 ä¾‹å­</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#0f8c60c5-316a-4410-ab71-efd7c3a3931a">1.2 ä»¥å¾€çš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼ï¼ˆLegacy Asynchronous Programming Patternsï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#657eb0ff-3c75-4cc0-b47f-ba65566429bb">1.2.1 å¼‚æ­¥è¿”å›å€¼ï¼ˆReturn Asynchronous Valuesï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#dca0efbf-1350-47de-8fa7-3604fce17094">1.2.2 å¤±è´¥å¤„ç†ï¼ˆHandling Failureï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#eb27e0ab-e7a3-4366-8825-b71cf18abb66">1.2.3 åµŒå¥—å¼‚æ­¥å›è°ƒï¼ˆNesting Asynchronous Callbacksï¼‰</a></div></nav><p id="c1f8953f-4e17-4cd5-af3c-70e97bfdb509" class="">
</p></div><div id="8c0d5ba8-1705-492b-ad0a-d2e2e4dfd700" style="width:81.25%" class="column"><h1 id="33531799-b1dd-4063-803b-e2c56f96fa1c" class="">1.1 åŒæ­¥ä¸å¼‚æ­¥ï¼ˆSynchronous vs. Asynchronous JavaScriptï¼‰</h1><h2 id="57163fb7-e0ad-4e92-928e-be7162ee6638" class="">1.1.1 åŒæ­¥è¡Œä¸ºï¼ˆSynchronous Behaviorï¼‰</h2><h3 id="6132b02f-29cb-4dd8-951b-a163eedf10f6" class="">1.1.1.1 ç†è§£åŒæ­¥è¡Œä¸º</h3><ul id="38763831-a8f0-4214-a7c4-f7fe445a6648" class="bulleted-list"><li style="list-style-type:disc"><strong><em>åŒæ­¥è¡Œä¸º</em></strong>ç±»ä¼¼äºå†…å­˜ä¸­çš„é¡ºåºæ‰§è¡Œçš„å¤„ç†å™¨æŒ‡ä»¤ï¼ˆ<strong>sequential processor instructions</strong>ï¼‰<ul id="a9c73af4-4957-4e8c-bc8c-102e78ab64a2" class="bulleted-list"><li style="list-style-type:circle">æ¯æ¡æŒ‡ä»¤éƒ½ä¼šä¸¥æ ¼æŒ‰ç…§å®ƒä»¬å‡ºç°çš„é¡ºåºæ¥æ‰§è¡Œ</li></ul><ul id="9a5159f1-d11e-4c0a-9da1-c0657aeb6b89" class="bulleted-list"><li style="list-style-type:circle">æ¯æ¡æŒ‡ä»¤ä¹‹åä¹Ÿèƒ½ç«‹å³<strong>è·å–</strong>(<strong>retrieving</strong>)å­˜å‚¨åœ¨ç³»ç»Ÿæœ¬åœ°ï¼ˆå¦‚<strong>å¯„å­˜å™¨</strong>&lt;<strong>processeor register</strong>&gt;æˆ–ç³»ç»Ÿå†…å­˜ï¼‰çš„ä¿¡æ¯</li></ul></li></ul><ul id="0c4fcb78-b54e-4ba9-9425-03aa52bb1ccb" class="bulleted-list"><li style="list-style-type:disc">åŒæ­¥è¡Œä¸ºè¿™æ ·çš„æ‰§è¡Œæµç¨‹å®¹æ˜“åˆ†æç¨‹åºåœ¨æ‰§è¡Œåˆ°<strong>ä»£ç ä»»æ„ä½ç½®</strong>æ—¶ï¼ˆ<strong>given point in code</strong>ï¼‰çš„çŠ¶æ€ï¼ˆæ¯”å¦‚å˜é‡çš„å€¼ï¼‰</li></ul><h3 id="ae6a331d-945e-4760-992d-04138a0d91bb" class="">1.1.1.2 ä¾‹å­</h3><ul id="417d41c0-2184-43a0-8c76-e8d21cbe158b" class="bulleted-list"><li style="list-style-type:disc">ä¸‹è¿°æ‰§è¡Œä¸€ä¸ªç®€å•çš„æ•°å­¦è®¡ç®—å±äºåŒæ­¥è¡Œä¸º<pre id="904361af-8693-4486-8d2d-f080759d61ad" class="code code-wrap"><code>let x = 3;
x = x + 4;</code></pre><ul id="6933f77e-fe43-4721-b4c5-70f5e3c4d118" class="bulleted-list"><li style="list-style-type:circle">åœ¨ç¨‹åºçš„æ¯ä¸€æ­¥ï¼Œéƒ½å¯ä»¥æ¨æ–­å‡ºç¨‹åºçš„çŠ¶æ€ï¼Œå› ä¸ºåé¢çš„æŒ‡ä»¤æ€»æ˜¯åœ¨å‰é¢çš„æŒ‡ä»¤å®Œæˆåæ‰ä¼šæ‰§è¡Œ<ul id="0875a778-cbf6-4b94-9e40-98e76d56d58a" class="bulleted-list"><li style="list-style-type:square">åœ¨<code>let x = 3;</code> æ‰§è¡Œå‰ï¼Œç¨‹åºä¸­æ²¡æœ‰<code>x</code> å˜é‡</li></ul><ul id="1b8ff287-25ef-468e-a9e2-1ccc4bdac988" class="bulleted-list"><li style="list-style-type:square">åœ¨<code>let x = 3;</code> æ‰§è¡Œåï¼Œ<code>x = x + 4;</code> æ‰§è¡Œå‰ï¼Œç¨‹åºä¸­æœ‰ä¸€ä¸ª<code>x</code> å˜é‡ä¿å­˜åŸå§‹å€¼3ï¼Œå®ƒå¯ä»¥è¢«ç«‹å³ä½¿ç”¨</li></ul><ul id="364ba07d-d6a7-4e79-a3f9-a12b5de7e8c4" class="bulleted-list"><li style="list-style-type:square">åœ¨<code>x=x+4;</code> æ‰§è¡Œåï¼Œç¨‹åºä¸­çš„<code>x</code> å˜é‡ä¿å­˜åŸå§‹å€¼ 7ï¼Œå®ƒå¯ä»¥è¢«ç«‹å³ä½¿ç”¨</li></ul></li></ul><ul id="3d1ec31b-8529-49bf-b531-2f41c4a3f262" class="bulleted-list"><li style="list-style-type:circle">è¿™ä¸¤è¡ŒJavaScriptä»£ç å¯¹åº”çš„<strong>ä½çº§æŒ‡ä»¤</strong>ï¼ˆ<strong>low-level instructions</strong>ï¼‰ä¸éš¾ç¼–è¯‘å‡ºï¼ˆä¾‹å¦‚ï¼Œä»JavaScript&lt;ä»£ç &gt;åˆ°x86&lt;æŒ‡ä»¤&gt;ï¼‰ï¼Œä¸‹é¢ä¸‰ä¸ªæè¿°å¯¹åº”ä¸‰ä¸ªæŒ‡ä»¤<ul id="3bf80fcf-6b1d-45eb-b83f-39de8d21f14e" class="bulleted-list"><li style="list-style-type:square">é¦–å…ˆï¼Œæ“ä½œç³»ç»Ÿä¼šåœ¨æ ˆå†…å­˜ä¸Šåˆ†é…ä¸€ä¸ªå­˜å‚¨æµ®ç‚¹æ•°å€¼çš„ç©ºé—´ï¼ˆ<code>let x = 3</code>ï¼‰</li></ul><ul id="bc3abab2-433e-48d2-a796-8335d9541a9f" class="bulleted-list"><li style="list-style-type:square">ç„¶åé’ˆå¯¹è¿™ä¸ªå€¼åšä¸€æ¬¡æ•°å­¦è¿ç®—ï¼ˆ<code>x + 4</code>ï¼‰</li></ul><ul id="37251f98-bc0a-40e8-95f1-e41396fee1db" class="bulleted-list"><li style="list-style-type:square">å†æŠŠè®¡ç®—ç»“æœå†™å›ä¹‹å‰åˆ†é…çš„å†…å­˜ä¸­ï¼ˆ<code>x = res</code> ï¼Œreså°±æ˜¯ä¸Šä¸€ä¸ªæŒ‡ä»¤çš„è¿ç®—ç»“æœï¼‰</li></ul></li></ul><ul id="2933be7b-8c85-4498-b2f4-b501166899c2" class="bulleted-list"><li style="list-style-type:circle">æ‰€æœ‰è¿™äº›æŒ‡ä»¤éƒ½æ˜¯åœ¨å•çº¿ç¨‹ä¸­é¡ºåºæ‰§è¡Œçš„ï¼Œåœ¨ä½çº§æŒ‡ä»¤ç¨‹åºçš„æ¯ä¸ªæ—¶é—´ç‚¹ï¼ˆeach pointï¼‰ï¼Œæœ‰å……è¶³çš„å·¥å…·å¯ä»¥ç¡®å®šç³»ç»ŸçŠ¶æ€</li></ul></li></ul><h2 id="3e88f46e-2b40-45cd-9841-52b5095a82e7" class="">1.1.2 å¼‚æ­¥è¡Œä¸ºï¼ˆ<strong>Asynchronous Behavior</strong>ï¼‰</h2><h3 id="502d4f4a-3063-4df0-b5c8-946dd911a721" class="">1.1.2.1 ç†è§£å¼‚æ­¥è¡Œä¸º</h3><ul id="07e2c297-4d19-4c11-8de5-ccdf59b26430" class="bulleted-list"><li style="list-style-type:disc">ç›¸å¯¹çš„ï¼Œ<strong><em>å¼‚æ­¥è¡Œä¸º</em></strong>ç±»ä¼¼äº<strong>ç³»ç»Ÿä¸­æ–­</strong>ï¼ˆ<strong>interrupts</strong>ï¼‰,å³å½“å‰è¿›ç¨‹<strong>å¤–éƒ¨çš„å®ä½“</strong>ï¼ˆ<strong>entity external</strong>ï¼‰å¯ä»¥è§¦å‘ï¼ˆ<strong>trigger</strong>ï¼‰ä»£ç æ‰§è¡Œ<ul id="1b78a0f0-800a-4141-8e55-60b74138619f" class="bulleted-list"><li style="list-style-type:circle">å¼‚æ­¥æ“ä½œç»å¸¸æ˜¯å¿…è¦çš„ï¼Œå› ä¸ºå¼ºåˆ¶è¿›ç¨‹ç­‰å¾…ä¸€ä¸ªé•¿æ—¶é—´çš„æ“ä½œé€šå¸¸æ˜¯ä¸å¯è¡Œçš„ï¼ˆåŒæ­¥æ“ä½œå¿…é¡»è¦ç­‰ï¼‰</li></ul><ul id="578358b6-1471-4734-aba9-429b1f2f8398" class="bulleted-list"><li style="list-style-type:circle">å¦‚æœä»£ç è¦è®¿é—®ä¸€äº›<strong>é«˜å»¶è¿Ÿçš„èµ„æº</strong>ï¼ˆ<strong>high-latency resource</strong>ï¼‰ï¼Œæ¯”å¦‚è¿œç¨‹æœåŠ¡å™¨ï¼ˆremote serverï¼‰å‘é€è¯·æ±‚å¹¶ç­‰å¾…å“åº”ï¼Œé‚£ä¹ˆå°±ä¼šå‡ºç°é•¿æ—¶é—´çš„ç­‰å¾…</li></ul></li></ul><h3 id="f1d54ae5-0e44-40b4-a908-762ec80d453b" class="">1.1.2.2 ä¾‹å­</h3><ul id="16e099ec-6335-4eda-b88f-a0182d6aee8f" class="bulleted-list"><li style="list-style-type:disc">JavaScriptä¸­å¼‚æ­¥æ“ä½œçš„ä¾‹å­å¯ä»¥æ˜¯åœ¨<strong>å®šæ—¶å›è°ƒ</strong>ï¼ˆ<strong>timeout</strong>ï¼‰ä¸­æ‰§è¡Œä¸€æ¬¡ç®€å•çš„<strong>æ•°å­¦è®¡ç®—</strong>ï¼ˆ<strong>arithmetic operation</strong>ï¼‰<pre id="1e160633-1f91-4622-96f3-612ac38da17b" class="code"><code>let x = 3;
setTimeout(() =&gt; x = x + 4, 1000); </code></pre><ul id="a4cfd39a-178d-44e1-ae02-0b36ea53e114" class="bulleted-list"><li style="list-style-type:circle">è¿™æ®µç¨‹åºä¸<a href="1%20%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%EF%BC%88Asynchronous%20Programming%EF%BC%89.html">åŒæ­¥ä»£ç </a>æ‰§è¡Œçš„ä»»åŠ¡ä¸€æ ·ï¼Œéƒ½æ˜¯æŠŠä¸¤ä¸ªæ•°åŠ åœ¨ä¸€èµ·ï¼Œä½†è¿™ä¸€æ¬¡<strong>æ‰§è¡Œçº¿ç¨‹</strong>ï¼ˆ<strong>thread of execution</strong>ï¼‰ä¸çŸ¥é“xå€¼ä½•æ—¶ä¼šæ”¹å˜ï¼Œå› ä¸ºè¿™å–å†³äºå›è°ƒä½•æ—¶ä»<strong>æ¶ˆæ¯é˜Ÿåˆ—</strong>ï¼ˆ<strong>message queue</strong>ï¼‰å‡ºåˆ—å¹¶æ‰§è¡Œ</li></ul><ul id="95efd0e4-44f3-404d-9e8c-fd8adfd394d1" class="bulleted-list"><li style="list-style-type:circle">å¼‚æ­¥ä»£ç ä¸å®¹æ˜“æ¨æ–­<ul id="70f0f195-4ce0-49fe-aa81-c52481a07b66" class="bulleted-list"><li style="list-style-type:square">è™½ç„¶è¿™ä¸ªä¾‹å­å¯¹åº”çš„<strong>ä½çº§ä»£ç </strong>ï¼ˆ<strong>low-level instructions</strong>ï¼‰æœ€ç»ˆå’Œå‰é¢çš„ä¾‹å­æ²¡æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Œä½†<mark class="highlight-blue"><a href="1%20%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%EF%BC%88Asynchronous%20Programming%EF%BC%89.html">ç¬¬äºŒä¸ª</a></mark><mark class="highlight-purple"><a href="1%20%E5%BC%82%E6%AD%A5%E7%BC%96%E7%A8%8B%EF%BC%88Asynchronous%20Programming%EF%BC%89.html">æŒ‡ä»¤å—</a></mark>ï¼ˆ<strong>chunk of instructions</strong>ï¼Œ åŠ æ“ä½œåŠèµ‹å€¼æ“ä½œï¼‰æ˜¯ç”±ç³»ç»Ÿè®¡æ—¶å™¨è§¦å‘çš„ï¼Œè¿™ä¼šç”Ÿæˆä¸€ä¸ª<strong>å…¥é˜Ÿæ‰§è¡Œ</strong>ï¼ˆ<strong>enqueue execution</strong>ï¼‰çš„<strong>ä¸­æ–­</strong>ï¼ˆ<strong>interrupt</strong>ï¼‰</li></ul><ul id="70c7b5e1-f76c-41dd-a2cd-c1df0fc8f928" class="bulleted-list"><li style="list-style-type:square">åˆ°åº•ä»€ä¹ˆæ—¶å€™ä¼šè§¦å‘è¿™ä¸ªä¸­æ–­ï¼Œè¿™å¯¹JavaScriptè¿è¡Œæ—¶æ¥è¯´æ˜¯ä¸€ä¸ªé»‘ç›’ï¼Œå› æ­¤å®é™…ä¸Šæ— æ³•é¢„çŸ¥ï¼ˆå°½ç®¡å¯ä»¥ä¿è¯è¿™å‘ç”Ÿåœ¨<strong>å½“å‰çº¿ç¨‹çš„åŒæ­¥ä»£ç </strong>ï¼ˆ<strong>current thread of synchronous</strong>ï¼‰æ‰§è¡Œå®Œæˆ<strong>ä¹‹å</strong>ï¼Œå¦åˆ™å›è°ƒéƒ½æ²¡æœ‰æœºä¼šå‡ºåˆ—è¢«æ‰§è¡Œï¼‰</li></ul><ul id="339208ea-080e-4419-8af5-0d1213c533dd" class="bulleted-list"><li style="list-style-type:square">æ€»ä¹‹ï¼Œåœ¨<strong>æ’å®šå›è°ƒ</strong>ï¼ˆ<strong>scheduled callback</strong>ï¼‰ä»¥ååŸºæœ¬æ²¡åŠæ³•çŸ¥é“ç³»ç»ŸçŠ¶æ€ä½•æ—¶å˜åŒ–</li></ul></li></ul></li></ul><ul id="8f765cf5-6be2-4a44-a292-726c1e1266fd" class="bulleted-list"><li style="list-style-type:disc">ä¸ºäº†è®©åç»­ä»£ç èƒ½å¤Ÿä½¿ç”¨xï¼Œå¼‚æ­¥æ‰§è¡Œçš„å‡½æ•°éœ€è¦åœ¨æ›´æ–°xçš„å€¼ä»¥åé€šçŸ¥å…¶ä»–ä»£ç ï¼Œå¦‚æœç¨‹åºä¸éœ€è¦è¿™ä¸ªå€¼ï¼Œé‚£ä¹ˆå°±åªç®¡ç»§ç»­æ‰§è¡Œï¼Œä¸å¿…ç­‰å¾…è¿™ä¸ªç»“æœ</li></ul><ul id="7d6b29c2-12de-49ce-904a-dbb5661324f0" class="bulleted-list"><li style="list-style-type:disc">è®¾è®¡ä¸€ä¸ªèƒ½å¤ŸçŸ¥é“xä»€ä¹ˆæ—¶å€™å¯ä»¥è¯»å–çš„ç³»ç»Ÿæ˜¯éå¸¸éš¾çš„ï¼ŒJavaScriptåœ¨å®ç°è¿™æ ·çš„ç³»ç»Ÿçš„è¿‡ç¨‹ä¸­ä¹Ÿç»å†äº†å‡ æ¬¡<strong>è¿­ä»£</strong>ï¼ˆ<strong>iterations</strong>ï¼‰</li></ul><h1 id="0f8c60c5-316a-4410-ab71-efd7c3a3931a" class="">1.2 ä»¥å¾€çš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼ï¼ˆLegacy Asynchronous Programming Patternsï¼‰</h1><ul id="e1ec3e08-aaf6-4482-8c37-0a972ad24acb" class="bulleted-list"><li style="list-style-type:disc">å¼‚æ­¥è¡Œä¸ºæ˜¯JavaScriptçš„åŸºç¡€ï¼Œä½†ä»¥å‰çš„å®ç°ä¸ç†æƒ³</li></ul><ul id="b0e0c332-aeed-41de-81d1-475dd91cbb52" class="bulleted-list"><li style="list-style-type:disc">åœ¨æ—©æœŸçš„JavaScriptä¸­ï¼Œåªæ”¯æŒå®šä¹‰<strong>å›è°ƒå‡½æ•°</strong>ï¼ˆ<strong>callback function</strong>ï¼‰æ¥è¡¨æ˜å¼‚æ­¥æ“ä½œå®Œæˆï¼Œ<strong>ä¸²è”</strong>ï¼ˆ<strong>Serializing</strong>ï¼‰å¤šä¸ªå¼‚æ­¥æ“ä½œæ˜¯ä¸€ä¸ªå¸¸è§çš„é—®é¢˜ï¼Œé€šå¸¸éœ€è¦æ·±åº¦<strong>åµŒå¥—çš„å›è°ƒå‡½æ•°</strong>ï¼ˆ<strong>nested callback functions</strong>ï¼‰æ¥è§£å†³â€”â€”ä¿—ç§°â€œå›è°ƒåœ°ç‹±ï¼ˆcallback hellï¼‰â€<ul id="e35f7464-4fb7-4099-9ca2-54606d215647" class="bulleted-list"><li style="list-style-type:circle">å¼‚æ­¥ç¼–ç¨‹çš„å…³é”®åœ¨äºå¼‚æ­¥æ“ä½œä½•æ—¶æ‰§è¡Œå®Œæ¯•</li></ul><ul id="13cf31ff-1c0d-49e4-8dea-bef6b7c5f8a9" class="bulleted-list"><li style="list-style-type:circle">ä¹‹å‰çš„å¼‚æ­¥ç¼–ç¨‹æ¨¡å¼ä½¿ç”¨å›è°ƒå‡½æ•°è¡¨æ˜å¼‚æ­¥æ“ä½œå®Œæˆ</li></ul></li></ul><ul id="41f20606-85d3-4bc3-9616-7bbc2912955d" class="bulleted-list"><li style="list-style-type:disc">å‡è®¾æœ‰å¦‚ä¸‹çš„å¼‚æ­¥å‡½æ•°ï¼Œä½¿ç”¨äº†setTimeoutåœ¨1ç§’åæ‰§è¡ŒæŸäº›æ“ä½œ<pre id="4b6a0baa-bc1e-47af-ba71-85694340cfb2" class="code code-wrap"><code>// setTimeoutæ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°
function double(value) {
  setTimeout(() =&gt; setTimeout(console.log, 0, value * 2), 1000);
}

double(3); // å¤§çº¦1000msåæ‰§è¡Œ</code></pre><ul id="e7fa8dea-3962-482f-a07a-b74a5d41d71a" class="bulleted-list"><li style="list-style-type:circle"><code>double</code> æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œå…³é”®ç†è§£ä¸ºä»€ä¹ˆè¯´å®ƒæ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°</li></ul><ul id="8a24f942-6eed-4cd3-828b-0a1cddcc930f" class="bulleted-list"><li style="list-style-type:circle"><code>setTimeout</code>å¯ä»¥å®šä¹‰ä¸€ä¸ªåœ¨æŒ‡å®šæ—¶é—´ä¹‹åä¼šè¢«è°ƒç”¨æ‰§è¡Œçš„å›è°ƒå‡½æ•°</li></ul><ul id="6e513037-f0b3-4a7e-89d6-dd215fa7aaf6" class="bulleted-list"><li style="list-style-type:circle">å¯¹äºè¿™ä¸ªä¾‹å­è€Œè¨€ï¼Œ1000æ¯«ç§’åï¼ŒJavaScript<strong>è¿è¡Œæ—¶</strong>ï¼ˆ<strong>runtime</strong>ï¼‰ä¼šæŠŠå›è°ƒå‡½æ•°æ¨åˆ°JavaScriptçš„æ¶ˆæ¯é˜Ÿåˆ—ä¸Šå»ç­‰å¾…æ‰§è¡Œï¼›æ¨åˆ°é˜Ÿåˆ—åï¼Œå›è°ƒä»€ä¹ˆæ—¶å€™å‡ºåˆ—è¢«æ‰§è¡Œå¯¹JavaScriptä»£ç å°±å®Œå…¨ä¸å¯è§äº†</li></ul><ul id="f46c3ef5-5e06-4ab6-9ac8-73dc2accd41c" class="bulleted-list"><li style="list-style-type:circle"><code>double()</code> å‡½æ•°åœ¨<code>setTimeout</code>æˆåŠŸ<strong>è°ƒåº¦</strong>ï¼ˆ<strong>schedulingï¼Œ </strong>è¿™é‡ŒæŒ‡æŠŠå›è°ƒå‡½æ•°æ¨åˆ°æ¶ˆæ¯é˜Ÿåˆ—ï¼‰å¼‚æ­¥æ“ä½œä¹‹åä¼šç«‹å³<strong>é€€å‡º</strong>ï¼ˆ<strong>exits</strong>ï¼‰</li></ul></li></ul><h2 id="657eb0ff-3c75-4cc0-b47f-ba65566429bb" class="">1.2.1 å¼‚æ­¥è¿”å›å€¼ï¼ˆReturn Asynchronous Valuesï¼‰</h2><ul id="4e22ac11-7d2d-4378-b011-24b3fcf3238c" class="bulleted-list"><li style="list-style-type:disc">å‡è®¾<code>setTimeout</code> æ“ä½œä¼šè¿”å›ä¸€ä¸ªæœ‰ç”¨çš„å€¼ï¼Œä¸€ä¸ªéœ€è¦è€ƒè™‘çš„é—®é¢˜æ˜¯å¦‚ä½•æŠŠè¿™ä¸ªå€¼ä¼ é€’ç»™éœ€è¦å®ƒçš„åœ°æ–¹<ul id="4bd55333-832c-4a75-b646-804640ca85ce" class="bulleted-list"><li style="list-style-type:circle">å¹¿æ³›æ¥å—çš„ä¸€ä¸ª<strong>ç­–ç•¥</strong>ï¼ˆ<strong>strategy</strong>ï¼‰æ˜¯ç»™å¼‚æ­¥æ“ä½œæä¾›ä¸€ä¸ªå›è°ƒå‡½æ•°</li></ul><ul id="f9c59526-2c41-4055-8060-4f626e7e0c50" class="bulleted-list"><li style="list-style-type:circle">è¿™ä¸ªå›è°ƒå‡½æ•°ä¸­åŒ…å«è¦ä½¿ç”¨<strong>å¼‚æ­¥è¿”å›å€¼</strong>çš„ä»£ç ï¼ˆä½œä¸ºå›è°ƒçš„å‚æ•°ï¼‰</li></ul></li></ul><ul id="6a6c5a2e-2012-45c4-93ee-fabd66f3f5aa" class="bulleted-list"><li style="list-style-type:disc">ä¸€ä¸ªä½¿ç”¨<code>setTimeout</code> æ¨¡æ‹Ÿçš„ä¼ é€’å¼‚æ­¥æ“ä½œè¿”å›å€¼çš„å‡½æ•°<pre id="9e709df6-a398-4785-a867-c236d280e5ef" class="code code-wrap"><code>function asyncGetSomething(requestParameters, callback) {
  setTimeout(() =&gt; {
    // é€šè¿‡requestParameterså¼‚æ­¥æ“ä½œè·å–åˆ°ä¸€äº›ç»“æœ è¿™é‡Œåªæ˜¯ç®€å•æ¨¡æ‹Ÿ
    let res = requestParameters * 2;
    // å°†ç»“æœä¼ é€’ç»™å›è°ƒå‡½æ•°
    callback(res);
  }, 1000);
}</code></pre><ul id="dcef5ed1-0206-4e48-9d0e-a039274508a7" class="bulleted-list"><li style="list-style-type:circle"><code>asyncGetSomething</code> æ˜¯ä¸€ä¸ªå¼‚æ­¥å‡½æ•°ï¼Œç»™å®ƒä¼ é€’<code>requestParameters</code> ï¼ˆå¼‚æ­¥è¯·æ±‚å‚æ•°ï¼‰å’Œ<code>callback</code> ï¼ˆè¯·æ±‚å®Œæ¯•å›è°ƒå‡½æ•°ï¼‰</li></ul><ul id="cca8d553-cce8-4767-91ba-6673c7e25ea0" class="bulleted-list"><li style="list-style-type:circle">ä½¿ç”¨<code>setTimeout</code> å‡½æ•°æ¨¡æ‹Ÿè¯·æ±‚è¿‡ç¨‹ï¼ˆåœ¨1ç§’åè¯·æ±‚å®Œæˆï¼‰ï¼Œ<code>res</code> æ˜¯å¼‚æ­¥æ“ä½œå®Œæ¯•åè·å¾—çš„è¯·æ±‚å“åº”ï¼Œç„¶åè°ƒç”¨å›è°ƒå‡½æ•°ï¼ŒæŠŠå¼‚æ­¥æ“ä½œç»“æœ<code>res</code> ä½œä¸ºå¼‚æ­¥è¿”å›å€¼ä¼ é€’ï¼Œè¡¨ç¤ºå¼‚æ­¥æ“ä½œå’Œåç»­çš„é€šçŸ¥æ‰§è¡Œä»£ç æ‰§è¡Œå®Œæˆ</li></ul></li></ul><ul id="d8f9426b-18f1-4899-9687-bc9b1a3c0d1a" class="bulleted-list"><li style="list-style-type:disc">ä¹‹å‰çš„<code>double</code> å¼‚æ­¥å‡½æ•°ä¾ç…§æ­¤æ–¹æ³•å˜ä¸º<pre id="282f9089-1a3e-4405-8e27-12ece8c777e4" class="code"><code>function double2(value, callback) {
  console.log(callback);
  setTimeout(() =&gt; callback(value * 2), 1000);
}
double2(3, (x) =&gt; console.log(`I was given: ${x}`)); // I was given: 6</code></pre><ul id="653b5578-1014-4352-8bdb-3ab96bace9c8" class="bulleted-list"><li style="list-style-type:circle">è¿™é‡Œ<code>setTimeout</code>è°ƒç”¨ï¼ˆ<strong>invocation</strong>ï¼‰å‘Šè¯‰JavaScriptè¿è¡Œæ—¶åœ¨1000msä¹‹åæŠŠä¸€ä¸ªå‡½æ•°æ¨åˆ°æ¶ˆæ¯é˜Ÿåˆ—ä¸Š</li></ul><ul id="ebd3c188-7996-4c2b-8a4f-90b96794cc42" class="bulleted-list"><li style="list-style-type:circle">è¿™ä¸ªå‡½æ•°ï¼ˆcallbackï¼‰ä¼šç”±<strong>è¿è¡Œæ—¶</strong>ï¼ˆ<strong>runtime</strong>ï¼‰è´Ÿè´£å¼‚æ­¥è°ƒåº¦æ‰§è¡Œï¼Œè€Œä½äºå‡½æ•°é—­åŒ…ä¸­çš„å›è°ƒåŠå…¶å‚æ•°åœ¨å¼‚æ­¥æ‰§è¡Œæ—¶ä»æ˜¯å¯ç”¨çš„</li></ul></li></ul><h2 id="dca0efbf-1350-47de-8fa7-3604fce17094" class="">1.2.2 å¤±è´¥å¤„ç†ï¼ˆHandling Failureï¼‰</h2><ul id="0d2a44d9-29a2-4611-a191-3bdcf734c8b8" class="bulleted-list"><li style="list-style-type:disc">å¼‚æ­¥æ“ä½œçš„å¤±è´¥å¤„ç†åœ¨<strong>å›è°ƒæ¨¡å‹</strong>ï¼ˆ<strong>callback model</strong>ï¼‰ä¸­ä¹Ÿè¦è€ƒè™‘ï¼Œå› æ­¤å°±æœ‰äº†æˆåŠŸå›è°ƒå’Œå¤±è´¥å›è°ƒï¼Œä¸€èˆ¬å½¢å¼æ˜¯é€šè¿‡<code>tryâ€¦catch</code> è¯­å¥æ•è·å¯èƒ½çš„å¼‚æ­¥æ“ä½œå¼‚å¸¸<pre id="81671e13-2f98-443e-ab1e-199d53a2cf84" class="code"><code>function double(value, success, failure) {
  setTimeout(() =&gt; {
    try {
      if (typeof value !== &quot;number&quot;) {
        throw &quot;Must provide number as first arguments&quot;;
      }
      success(2 * value);
    } catch (error) {
      failure(error);
    }
  }, 1000);
}

const successCallback = (x) =&gt; console.log(`Success: ${x}`);
const failureCallback = (e) =&gt; console.log(`Failure: ${e}`);

double(3, successCallback, failureCallback); // Success: 6
double(&quot;2&quot;, successCallback, failureCallback); // Failure: Must provide number as first arguments</code></pre><ul id="d71f4dc6-a739-45a9-82ce-63aa607d7a1f" class="bulleted-list"><li style="list-style-type:circle">å¤±è´¥å¤„ç†åœ¨ä»¥å‰çš„å¼‚æ­¥æ¨¡å¼ä¸­ä¹Ÿä½¿ç”¨<strong>å›è°ƒæ¨¡å‹</strong>ï¼šå°†å¤±è´¥å¤„ç†çš„å‡½æ•°ä½œä¸ºä¸€ä¸ªå›è°ƒä¼ é€’ç»™å¼‚æ­¥æ“ä½œï¼Œå¼‚æ­¥æ“ä½œæ•è·åˆ°é”™è¯¯æ—¶è°ƒç”¨è¿™ä¸ªå¤±è´¥å¤„ç†çš„å›è°ƒå‡½æ•°ï¼Œå¦‚æœå¼‚æ­¥æ“ä½œæ­£å¸¸è·å–åˆ°æƒ³è¦çš„å€¼ï¼Œå°±å¯ä»¥åƒä¹‹å‰é‚£æ ·ä¼ é€’å¼‚æ­¥è¿”å›å€¼å¹¶è°ƒç”¨æˆåŠŸçš„å›è°ƒå‡½æ•°</li></ul></li></ul><ul id="9787fac4-9902-4f3d-890c-f847723b847d" class="bulleted-list"><li style="list-style-type:disc">è¿™ç§æ¨¡å¼å·²ç»<strong>ä¸å¯å–äº†</strong>ï¼ˆ<strong>undesirable</strong>ï¼‰ï¼Œå› ä¸ºå¿…é¡»åœ¨åˆå§‹åŒ–å¼‚æ­¥æ“ä½œæ—¶å®šä¹‰å›è°ƒï¼Œå¼‚æ­¥å‡½æ•°çš„è¿”å›å€¼åªåœ¨<strong>çŸ­æ—¶é—´å†…å­˜åœ¨</strong>ï¼ˆ<strong>transient</strong>ï¼‰,åªæœ‰é¢„å¤‡å¥½å°†è¿™ä¸ªçŸ­æ—¶é—´å†…å­˜åœ¨çš„å€¼ä½œä¸ºå‚æ•°çš„å›è°ƒæ‰èƒ½æ¥æ”¶åˆ°å®ƒ</li></ul><h2 id="eb27e0ab-e7a3-4366-8825-b71cf18abb66" class="">1.2.3 åµŒå¥—å¼‚æ­¥å›è°ƒï¼ˆNesting Asynchronous Callbacksï¼‰</h2><ul id="d889665e-735f-4bad-966f-2523cdd6639a" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœå¼‚æ­¥è¿”å›å€¼åˆä¾èµ–å¦ä¸€ä¸ªå¼‚æ­¥è¿”å›å€¼ï¼Œé‚£ä¹ˆå›è°ƒçš„æƒ…å†µè¿˜ä¼šè¿›ä¸€æ­¥è¾¹å¤æ‚ã€‚å‡è®¾æœ‰å¼‚æ­¥æ“ä½œAå’Œå¼‚æ­¥æ“ä½œBï¼Œå¼‚æ­¥æ“ä½œBéœ€è¦å°†å¼‚æ­¥æ“ä½œAçš„è¿”å›å€¼ä½œä¸ºå‚æ•°ä»¥è·å–å¼‚æ­¥æ“ä½œBçš„è¿”å›å€¼ï¼Œæ‰€ä»¥æƒ…å†µå°±å˜æˆäº†A â‡’ Açš„å¼‚æ­¥è¿”å›å€¼ â‡’ B â‡’ Bçš„å¼‚æ­¥è¿”å›å€¼</li></ul><ul id="f0421354-080a-4206-9c15-26eefa8b78bf" class="bulleted-list"><li style="list-style-type:disc">å®ç°è¿™ç§ä¾èµ–éœ€è¦åµŒå¥—å›è°ƒï¼Œå°†Açš„è¿”å›å€¼ä¼ é€’ç»™å¼‚æ­¥æ“ä½œBçš„å›è°ƒå‡½æ•°<pre id="fb208901-9b81-4ec2-999f-4d3f08456efd" class="code"><code>function double(value, success, failure) {
  setTimeout(() =&gt; {
    try {
      if (typeof value !== &quot;number&quot;) {
        throw &quot;Must provide number as first argument&quot;;
      }
      success(2 * value);
    } catch (error) {
      failure(error);
    }
  }, 1000);
}

const successCallback = (x) =&gt; {
  double(x, (y) =&gt; console.log(`Success: ${y}`));
};

const failureCallback = (e) =&gt; console.log(`Failure: ${e}`);

double(3, successCallback, failureCallback); // Success: 12 (ç­‰å¾…çº¦2ç§’)</code></pre><ul id="78732095-1b1f-4cdb-b72b-76b33d209943" class="bulleted-list"><li style="list-style-type:circle">è¿™é‡Œçš„<code>successCallback</code> å°±æ˜¯å¼‚æ­¥å‡½æ•°Bï¼Œå®ƒä¾èµ–<code>double()</code> å¼‚æ­¥æ“ä½œå®Œæ¯•åæ‰§è¡Œ<code>success()</code> å›è°ƒä¼ é€’å€¼æ‰èƒ½æ‰§è¡Œï¼Œä¸”<code>successCallback</code> è¢«è°ƒç”¨ä¹Ÿæ˜¯å¼‚æ­¥æ“ä½œï¼Œå®ƒå†æ¬¡è°ƒç”¨<code>double()</code> ï¼ˆå¦å¤–ä¸€æ¬¡è°ƒç”¨ï¼‰è·å–ç¬¬äºŒä¸ªå¼‚æ­¥è¿”å›å€¼ï¼ˆ12ï¼‰</li></ul></li></ul><ul id="08e1295e-0c79-4541-8aaf-4cc00a03aba4" class="bulleted-list"><li style="list-style-type:disc">æ˜¾ç„¶ï¼Œéšç€ä»£ç è¶Šæ¥è¶Šå¤æ‚ï¼Œå›è°ƒç­–ç•¥<strong>æ˜¯ä¸å…·æœ‰æ‰©å±•æ€§çš„</strong>ï¼ˆ<strong>not</strong> <strong>scale</strong>ï¼‰ã€‚â€œå›è°ƒåœ°ç‹±â€è¿™ä¸ªç§°å·å¯è°“å®è‡³åå½’ï¼ŒåµŒå¥—å›è°ƒçš„ä»£ç ç»´æŠ¤èµ·æ¥å°±æ˜¯å™©æ¢¦</li></ul><p id="6868c990-b3fe-4a7f-8b5c-ad8bd98d2472" class="">
</p></div></div></div></article></body></html>