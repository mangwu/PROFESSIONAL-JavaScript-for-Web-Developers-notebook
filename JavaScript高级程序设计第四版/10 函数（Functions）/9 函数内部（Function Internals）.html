<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>9. å‡½æ•°å†…éƒ¨ï¼ˆFunction Internalsï¼‰</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-opaquegray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="6e2d474e-3a57-4935-9cf6-9f2a0a7c186d" class="page sans"><header><img class="page-cover-image" src="https://www.notion.so/images/page-cover/gradients_11.jpg" style="object-position:center 40%"/><div class="page-header-icon page-header-icon-with-cover"><span class="icon">ğŸª‘</span></div><h1 class="page-title">9. å‡½æ•°å†…éƒ¨ï¼ˆFunction Internalsï¼‰</h1></header><div class="page-body"><div><p id="d7be2941-25a8-4c49-9b99-e93445f23d35" class="">åœ¨ES5æ ‡å‡†ä¸­ï¼Œå‡½æ•°å†…éƒ¨å­˜åœ¨ä¸¤ä¸ªç‰¹æ®Šçš„å¯¹è±¡ï¼š<code>arguments</code> å’Œ<code>this</code> ï¼ŒES6åˆæ–°å¢äº†<code>new.target</code>å±æ€§ï¼ˆå…³äºè¿™ä¸ªåœ¨ç¬¬å…«ç« æ—¶å°±ä»‹ç»è¿‡<a href="../8%20%E5%AF%B9%E8%B1%A1%E3%80%81%E7%B1%BB%E4%B8%8E%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/4%20%E7%B1%BB/new%20target.html"><span class="icon">ğŸŒ‘</span>new.target</a> ï¼‰</p></div><div id="1734f7f9-57f1-4e94-b9d3-d989b1fffa21" class="column-list"><div id="ce078931-b64b-43a5-a7af-94c58005cdc7" style="width:12.5%" class="column"><nav id="2afd640e-4fea-425a-bd0a-13f3ac80aa6b" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#4df9640f-f7f2-4a99-9d61-c7fb790bbb03">9.1 arguments</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#346e74dd-b542-459c-820d-8b5a0cdc0a14">9.2 this</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#9fed8917-0b29-4b02-86e2-8d515fffec0c">9.2.1 æ ‡å‡†å‡½æ•°ï¼ˆstandard functionï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#3d48938a-cd0e-4de3-af3e-b25e48f64263">9.2.2 ç®­å¤´å‡½æ•°</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#012dcbef-ad1c-4cba-a940-966a058ae5eb">9.3 caller</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#63d1166d-43a5-4a2c-943e-992b2ca5c919">9.4 new.target</a></div></nav><p id="e04c7fdc-5610-4693-bc47-6e6d1e06e0d9" class="">
</p></div><div id="bb17881a-45f9-42bb-aa18-9f4f22130427" style="width:87.5%" class="column"><h1 id="4df9640f-f7f2-4a99-9d61-c7fb790bbb03" class="">9.1 arguments</h1><ul id="29143ede-514c-4cff-95b0-ac1426488fdb" class="bulleted-list"><li style="list-style-type:disc"><code>arguments</code> å¯¹è±¡åœ¨<a href="3%20%E7%90%86%E8%A7%A3%E5%8F%82%E6%95%B0%EF%BC%88understanding%20arguments%EF%BC%89.html"><span class="icon">ğŸ†</span>3. ç†è§£å‚æ•°ï¼ˆunderstanding argumentsï¼‰</a> ä¸­å·²ç»è®¨è®ºè¿‡å¤šæ¬¡ï¼Œå®ƒæ˜¯ä¸€ä¸ªç±»æ•°ç»„å¯¹è±¡ï¼ŒåŒ…å«è°ƒç”¨å‡½æ•°æ—¶ä¼ å…¥çš„æ‰€æœ‰å‚æ•°ï¼Œè¿™ä¸ªå¯¹è±¡åªæœ‰ä»¥<code>function</code> å…³é”®å­—å®šä¹‰å‡½æ•°ï¼ˆé™¤äº†ç®­å¤´å‡½æ•°è¯­æ³•åˆ›å»ºçš„å‡½æ•°ï¼Œå…¶ä»–ä¸‰ç§æ–¹å¼åˆ›å»ºçš„éƒ½æœ‰<code>arguments</code>å¯¹è±¡ï¼‰æ—¶æ‰ä¼šæœ‰</li></ul><ul id="b58c42ae-cb46-4580-b3d3-7d2c6bf4e634" class="bulleted-list"><li style="list-style-type:disc">è™½ç„¶ä¸»è¦ç”¨äºåŒ…å«å‡½æ•°å‚æ•°ï¼Œä½†æ˜¯<code>arguments</code> å¯¹è±¡è¿˜æœ‰ä¸€ä¸ª<code>callee</code>å±æ€§ï¼Œæ˜¯ä¸€ä¸ªæŒ‡å‘<code>arguments</code>å¯¹è±¡<strong>æ‰€åœ¨å‡½æ•°</strong>çš„æŒ‡é’ˆï¼Œ<code>arguments.callee</code> æ˜¯é‚£äº›<strong>ä¸èƒ½</strong>åœ¨å‡½æ•°ä½“ä¸­ä½¿ç”¨å‡½æ•°æœ¬èº«è¿›è¡Œé€’å½’è°ƒç”¨çš„è§£å†³æ–¹æ¡ˆï¼ˆå¦‚ä½¿ç”¨<a href="%E5%87%BD%E6%95%B0%EF%BC%88Function%EF%BC%89.html"><code>Function</code></a><a href="%E5%87%BD%E6%95%B0%EF%BC%88Function%EF%BC%89.html"> æ„é€ å‡½æ•°</a>ï¼ŒåŒ¿åå‡½æ•°è¡¨è¾¾å¼ï¼Œå’Œç®­å¤´å‡½æ•°å¯èƒ½æ— æ³•é€šè¿‡å‡½æ•°åç§°é€’å½’è°ƒç”¨å‡½æ•°æœ¬èº«ï¼‰</li></ul><p id="3aef73a2-f0a3-41ab-a99f-6014efd13374" class=""><strong>ä¸€ä¸ªä¾‹å­</strong></p><ul id="c4dea636-8684-4237-a075-a6070ca39e7c" class="bulleted-list"><li style="list-style-type:disc">å¸¸è§çš„é˜¶ä¹˜å‡½æ•°éœ€è¦é€’å½’è°ƒç”¨æœ¬èº«<pre id="9ed2665b-1b6b-4d34-8eaa-388764565e6d" class="code"><code>function factorial(num) {
  if (num &lt;= 1) {
    return 1;
  }
  return num * factorial(num - 1);
}</code></pre><ul id="6dfead5c-daf3-4054-aa68-6d71a775f5d5" class="bulleted-list"><li style="list-style-type:circle">å‡½æ•°å£°æ˜åˆ›å»ºçš„å‡½æ•°å¯ä»¥ä½¿ç”¨å‡½æ•°åç§°åœ¨å‡½æ•°ä½“å†…å¼•ç”¨å‡½æ•°æœ¬èº«ï¼Œ<strong>åªè¦ç»™å‡½æ•°ä¸€ä¸ªåç§°å¹¶ä¸”è¿™ä¸ªåç§°ä¸ä¼šå˜</strong>ï¼Œè¿™æ ·å®šä¹‰å°±æ²¡æœ‰é—®é¢˜</li></ul><ul id="da0c8a6e-536b-4441-9657-08585ba71fd5" class="bulleted-list"><li style="list-style-type:circle">ä½†æ˜¯ä½¿ç”¨<code>Function</code> æ„é€ å‡½æ•°å½¢å¼åˆ›å»ºçš„å‡½æ•°æ— æ³•é€šè¿‡å‡½æ•°åç§°åœ¨å‡½æ•°ä½“ä¸­å¼•ç”¨è‡ªèº«ï¼ŒåŒç†ï¼Œ<strong>åŒ¿å</strong>å‡½æ•°è¡¨è¾¾å¼ä¼šå› ä¸ºä¿å­˜å‡½æ•°å¯¹è±¡çš„å˜é‡å¼•ç”¨æ”¹å˜è€Œæ— æ³•å†ä½¿ç”¨å˜é‡æ ‡è¯†ç¬¦ä½œä¸ºå‡½æ•°åç§°ï¼Œç®­å¤´å‡½æ•°å’ŒåŒ¿åå‡½æ•°è¡¨è¾¾å¼å…·æœ‰åŒæ ·çš„é—®é¢˜</li></ul><pre id="3a92adec-5aba-49a8-b596-baf6fe6b3cb7" class="code"><code>// åŒ¿åå‡½æ•°è¡¨è¾¾å¼å’Œç®­å¤´å‡½æ•°çš„é—®é¢˜
let factorial2 = function (num) {
  if (num &lt;= 1) {
    return 1;
  }
  return num * factorial2(num - 1);
};
let k = factorial2;
factorial2 = &quot;123&quot;;
try {
  k(3);
} catch (error) {
  console.log(error.toString()); // TypeError: factorial2 is not a function
}
let factorial3 = (num) =&gt; {
  if (num &lt;= 1) {
    return 1;
  }
  return num * factorial3(num - 1);
};
let g = factorial3;
factorial3 = &quot;123&quot;;
try {
  console.log(g(3));
} catch (error) {
  console.log(error.toString()); // TypeError: factorial2 is not a function
}</code></pre></li></ul><ul id="f2acbcbf-3ca0-452e-9274-be6a2b46c1be" class="bulleted-list"><li style="list-style-type:disc">å¯¹äºé€’å½’å‡½æ•°è€Œè¨€ï¼Œå‡½æ•°èƒ½æ­£å¸¸æ‰§è¡Œçš„å¿…è¦æ¡ä»¶æ˜¯ä¿è¯å‡½æ•°åç§°å¿…é¡»ä¸å†å˜åŒ–ï¼Œè¿™ä¼šå¯¼è‡´åç§°å’Œå‡½æ•°<strong>ç´§å¯†è€¦åˆ</strong>ï¼ˆ<strong>tightly coupled</strong>ï¼‰ï¼Œä½¿ç”¨<code>arguments.callee</code> å°±å¯ä»¥è®©å‡½æ•°é€»è¾‘ä¸å‡½æ•°å<strong>è§£è€¦ï¼ˆdecoupledï¼‰</strong><pre id="53bae781-ee68-4741-b899-53c9e6d505b8" class="code"><code>// è§£è€¦
function factorial(num) {
  if (num &lt;= 1) {
    return 1;
  }
  return num * arguments.callee(num - 1);
}
console.log(factorial(10)); // 3628800</code></pre></li></ul><ul id="4b98b225-8863-4a8a-922e-9ae1937a4454" class="bulleted-list"><li style="list-style-type:disc">è¿™ä¸ªé‡å†™åçš„<code>factorial()</code> å‡½æ•°å·²ç»ç”¨<code>arguments.callee</code> ä»£æ›¿äº†ä¹‹å‰ç¡¬ç¼–ç çš„<code>factorial</code> ï¼Œä¿è¯æ— è®ºå‡½æ•°å«ä»€ä¹ˆåç§°éƒ½å¯ä»¥å¼•ç”¨æ­£ç¡®çš„å‡½æ•°<pre id="8ee322f4-ac64-40cc-b0b4-d00e0f8ead7a" class="code"><code>let h = factorial;
factorial = &quot;123&quot;; // ä¿®æ”¹ä¿å­˜å‡½æ•°å¯¹è±¡çš„å˜é‡å¼•ç”¨
console.log(h(10)); // 3628800</code></pre></li></ul><p id="f04b14b5-15b2-4bad-bcf5-909cd8df4bab" class=""><strong>å…¶ä»–è§£å†³æ–¹æ¡ˆ</strong></p><ol type="1" id="7bfb15a0-3817-44a0-a197-8c4a4c738725" class="numbered-list" start="1"><li>ä½¿ç”¨<code>const</code> å£°æ˜å˜é‡ï¼Œé…åˆå‡½æ•°è¡¨è¾¾å¼å’Œç®­å¤´å‡½æ•°è¯­æ³•è¿›è¡Œåˆå§‹åŒ–ï¼Œè¿™æ ·å³ä½¿å‡½æ•°ä½“å†…éƒ¨ç»‘å®šå‡½æ•°åç§°ä¹Ÿä¸ä¼šå‡ºé”™ï¼Œå› ä¸ºä¿å­˜å‡½æ•°å¯¹è±¡çš„æ ‡è¯†ç¬¦ä¸ä¼šæ”¹å˜<pre id="ff04c83d-7a84-40cb-8263-990c35adabeb" class="code"><code>const f = (num) =&gt; {
  if (num &lt;= 1) {
    return 1;
  }
  return num * f(num - 1);
};
// fæ°¸è¿œä¿å­˜ä¸Šé¢ä½¿ç”¨ç®­å¤´å‡½æ•°å£°æ˜çš„å‡½æ•°å¯¹è±¡ï¼Œæ‰€ä»¥ä¸ç”¨æ‹…å¿ƒå†…éƒ¨ç»‘å®šå‡½æ•°åç§°ä¼šå‡ºé”™
console.log(f(10)); // 3628800</code></pre></li></ol><ol type="1" id="ed8f5d24-7442-4702-a062-856dd4e3323f" class="numbered-list" start="2"><li>åœ¨ä½¿ç”¨å‡½æ•°è¡¨è¾¾å¼å£°æ˜å˜é‡æ—¶ç¡®å®šå‡½æ•°åç§°<pre id="da679124-b382-4c4b-85da-8ca0c59527cf" class="code"><code>let a = function myFunc(num) {
  if (num &lt;= 1) {
    return 1;
  }
  return num * myFunc(num - 1);
};
console.log(a(10)); // 3628800
let b = a;
a = &quot;123&quot;;
console.log(b(10)); // 3628800</code></pre></li></ol><h1 id="346e74dd-b542-459c-820d-8b5a0cdc0a14" class="">9.2 this</h1><ul id="01f934b6-2409-43ab-95ea-02676302d891" class="bulleted-list"><li style="list-style-type:disc">å…³äº<code>this</code> åœ¨ä¸åŒä¸Šä¸‹æ–‡ä¸­çš„å€¼å¯ä»¥æŸ¥çœ‹<a href="https://www.notion.so/this-cb80ad0de9a74f5c999237ed645d9ef1"><span class="icon">ğŸ“</span>thisæ“ä½œç¬¦</a> </li></ul><ul id="cf4907dd-459a-487c-8694-b30ff34bdcf8" class="bulleted-list"><li style="list-style-type:disc">åœ¨å‡½æ•°ä¸Šä¸‹æ–‡ä¸­ï¼Œ<code>this</code> çš„å€¼åœ¨æ ‡å‡†å‡½æ•°å’Œç®­å¤´å‡½æ•°ä¸­æœ‰ä¸åŒçš„è¡Œä¸ºï¼Œä¸”åœ¨ä¸¥æ ¼æ¨¡å¼å’Œéä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ<code>this</code> å€¼åœ¨å‡½æ•°å‡½æ•°ä¸Šä¸‹æ–‡ä¸­ä¹Ÿæœ‰åŒºåˆ«</li></ul><h2 id="9fed8917-0b29-4b02-86e2-8d515fffec0c" class="">9.2.1 æ ‡å‡†å‡½æ•°ï¼ˆstandard functionï¼‰</h2><ul id="cba35bfe-94b8-4c47-88d0-288dd4d8a5fc" class="bulleted-list"><li style="list-style-type:disc">åœ¨æ ‡å‡†å‡½æ•°ä¸­ï¼Œ<code>this</code> å¼•ç”¨çš„æ˜¯æŠŠå‡½æ•°å½“æˆæ–¹æ³•è°ƒç”¨çš„<strong>ä¸Šä¸‹æ–‡å¯¹è±¡</strong>ï¼ˆ<strong>context object</strong>ï¼‰ï¼Œè¿™ä¸ªæ—¶å€™é€šå¸¸ç§°å…¶ä¸º<code>this</code> å€¼ï¼›å¦‚æœä¸ä½¿ç”¨ä»»ä½•å¯¹è±¡è°ƒç”¨æ ‡å‡†å‡½æ•°ï¼Œæ ‡å‡†å‡½æ•°çš„<code>this</code> å€¼é»˜è®¤ä¸ºå…¨å±€å¯¹è±¡ï¼ˆæµè§ˆå™¨ç¯å¢ƒä¸º<code>window</code>ï¼Œ<code>node</code> ç¯å¢ƒä¸ºglobal ï¼‰ï¼Œä½†æ˜¯ä¸¥æ ¼æ¨¡å¼ä¸‹é»˜è®¤å€¼ä¸º<code>undefined</code><pre id="f0f095d5-540e-4ed0-b5e4-a820d83eebf6" class="code"><code>color = &quot;red&quot;;
function sayColor() {
  console.log(this.color);
}
function sayColor2() {
  &quot;use strict&quot;;
  console.log(this);
}

sayColor(); // red
sayColor2(); // å› ä¸ºä¸¥æ ¼æ¨¡å¼ä¸‹é»˜è®¤thisæ˜¯undefinedï¼Œæ‰€ä»¥ä¸ä¼šæ‰“å°color
const o = {
  sayColor,
  color: &quot;blue&quot;,
};
o.sayColor(); // blue</code></pre><ul id="6c8fbd6a-6812-46e8-82b8-8977f2149b8c" class="bulleted-list"><li style="list-style-type:circle"><code>sayColor()</code> å®šä¹‰åœ¨å…¨å±€ä¸Šä¸‹æ–‡ï¼ˆnodeç¯å¢ƒä¸‹åªæ˜¯å®šä¹‰åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸Šä¸‹æ–‡ï¼‰ä¸­ï¼Œå…¶ä¸­å¼•ç”¨äº†ä¸€ä¸ª<code>this</code> å¯¹è±¡</li></ul><ul id="2f8d0f78-365a-43fe-8770-4602cd23f537" class="bulleted-list"><li style="list-style-type:circle"><code>this</code> å¯¹è±¡çš„å¼•ç”¨å€¼å¿…é¡»åˆ°å‡½æ•°è°ƒç”¨æ—¶æ‰èƒ½ç¡®å®šï¼ˆ<strong>è¿è¡Œæ—¶ç»‘å®š</strong>ï¼‰ï¼Œå› æ­¤åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­è°ƒç”¨<code>sayColor()</code> ä¼šè¾“å‡ºæŒ‚è½½åˆ°å…¨å±€å¯¹è±¡çš„<code>color</code> å±æ€§å€¼<code>red</code> ï¼Œè€Œé€šè¿‡<code>o.sayColor()</code> è°ƒç”¨å‡½æ•°ï¼Œ<code>this</code> ä¼šæŒ‡å‘<code>o</code> ï¼Œæ‰€ä»¥æ‰“å°çš„å°±æ˜¯<code>this.color</code> å±æ€§å€¼<code>blue</code></li></ul></li></ul><figure class="block-color-teal_background callout" style="white-space:pre-wrap;display:flex" id="1b2cdad4-d658-404f-822b-7b04c06c1c9b"><div style="font-size:1.5em"><span class="icon">ğŸ’¡</span></div><div style="width:100%">æ³¨æ„ï¼šå‡½æ•°ååªæ˜¯ä¿å­˜æŒ‡é’ˆçš„å˜é‡ï¼Œå› æ­¤å…¨å±€å®šä¹‰çš„<code>sayColor()</code> å‡½æ•°å’Œ<code>o.sayColor()</code> æ˜¯åŒä¸€ä¸ªå‡½æ•°ï¼Œåªæ˜¯æ‰§è¡Œæ—¶çš„ä¸Šä¸‹æ–‡ä¸åŒï¼ˆè°ƒç”¨è€…ä¸åŒï¼‰</div></figure><h2 id="3d48938a-cd0e-4de3-af3e-b25e48f64263" class="">9.2.2 ç®­å¤´å‡½æ•°</h2><ul id="bf7f2a7f-b75f-4d5a-ae02-c7ac8c47dc3a" class="bulleted-list"><li style="list-style-type:disc">åœ¨ç®­å¤´å‡½æ•°ä¸­ï¼Œ<code>this</code> <strong>å¼•ç”¨çš„æ˜¯å®šä¹‰ç®­å¤´å‡½æ•°çš„ä¸Šä¸‹æ–‡</strong></li></ul><ul id="a81e7c4d-3a20-4d56-b45d-ae3bc8174c10" class="bulleted-list"><li style="list-style-type:disc">ç®­å¤´å‡½æ•°å’Œè°ƒç”¨å®ƒçš„å¯¹è±¡æ— å…³ï¼Œå®ƒçš„<code>this</code> å°±æ˜¯å®šä¹‰ç®­å¤´å‡½æ•°æ‰€åœ¨ä½œç”¨åŸŸçš„<code>this</code>å€¼ï¼ˆè¯¦æƒ…æŸ¥çœ‹<a href="https://www.notion.so/4-3-arrow-functions-1531507bb31f444092b3f6f64c3f0e0c">4.3 ç®­å¤´å‡½æ•°ï¼ˆarrow functionsï¼‰</a> ï¼‰<pre id="488a7028-4be9-4637-9770-025f758c36d0" class="code"><code>// nodeç¯å¢ƒä¸‹
// ç®­å¤´å‡½æ•°this
this.color = &quot;red&quot;;
color = &quot;green&quot;;
const obj = {
  color: &quot;blue&quot;,
  sayColor: () =&gt; {
    console.log(this.color);
  },
  createSayColor: function () {
    const sayColor = () =&gt; {
      console.log(this.color);
    };
    return sayColor;
  },
};

// ç®­å¤´å‡½æ•°çš„thiså€¼å’Œè°ƒç”¨å¯¹è±¡æ— å…³
obj.sayColor(); // red
// ç®­å¤´å‡½æ•°çš„thiså€¼æ˜¯å®šä¹‰æ—¶æ‰€åœ¨ä½œç”¨åŸŸçš„thiså€¼
obj.createSayColor()(); // blue
const fn = obj.createSayColor;
fn()(); // green</code></pre><ul id="b904aa88-0796-4cd1-ac57-1de03e6108fa" class="bulleted-list"><li style="list-style-type:circle">ä¸Šè¿°æƒ…å†µæ˜¯åœ¨nodeç¯å¢ƒä¸‹æ‰§è¡Œæ–‡ä»¶ä¸­çš„ä»£ç çš„æ‰“å°ï¼Œjsæ–‡ä»¶ä¸Šä¸‹æ–‡ä¸­çš„<code>this</code> å€¼æ˜¯<a href="https://www.notion.so/var-node-d17d523c6e124c19a388e647232ecb8d"><code>module.exports</code></a> </li></ul><ul id="491e87de-0ceb-4d22-a54a-674b8200c389" class="bulleted-list"><li style="list-style-type:circle">æ‰§è¡Œ<code>obj.sayColor()</code> å› ä¸ºå®šä¹‰åœ¨<code>obj</code> çš„<code>sayColor</code> æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œæ‰€ä»¥å®ƒçš„<code>this</code> å°±æ˜¯<code>obj</code> æ‰€åœ¨ä½œç”¨åŸŸçš„<code>this</code> ï¼Œä¹‹å‰è®¾ç½®è¿‡<code>this.color = &quot;red&quot;;</code> æ‰€ä»¥è¿™é‡Œæ‰“å°<code>red</code></li></ul><ul id="2c753ee1-ff4d-43ff-93c9-481d1e7bf3eb" class="bulleted-list"><li style="list-style-type:circle">æ‰§è¡Œ<code>obj.createSayColor()()</code> å› ä¸º<code>createSayColor()</code> æ˜¯ä¸€ä¸ªæ ‡å‡†å‡½æ•°ï¼Œé€šè¿‡<code>obj</code> è°ƒç”¨æ‰€ä»¥å®ƒçš„<code>this</code> å°±æ˜¯<code>obj</code> ï¼Œè€Œåœ¨<code>createSayColor()</code> å‡½æ•°å†…å®šä¹‰çš„<code>sayColor()</code> æ˜¯ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œè¿™ä¸ªç®­å¤´å‡½æ•°ç»§æ‰¿æœ€è¿‘çš„ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥æ‰“å°å‡ºæ¥çš„å°±æ˜¯<code>obj.color</code> å³<code>blue</code></li></ul><ul id="a1d92912-4106-4eb7-9c21-287c68f67b31" class="bulleted-list"><li style="list-style-type:circle"><code>fn</code> è™½ç„¶ä¹Ÿæ˜¯<code>obj</code> ä¸­çš„<code>createSayColor()</code> æ ‡å‡†å‡½æ•°ï¼Œä½†æ˜¯åœ¨å¤–éƒ¨æ²¡æœ‰ä½¿ç”¨å¯¹è±¡æˆ–æŒ‡å®š<code>this</code> è¿›è¡Œè°ƒç”¨ï¼Œ<code>fn</code> çš„<code>this</code> å°±æ˜¯å…¨å±€å¯¹è±¡ï¼Œæ‰€ä»¥<code>fn</code> ä¸­çš„<code>sayColor()</code> ç®­å¤´å‡½æ•°ç»§æ‰¿æœ€è¿‘çš„ä¸Šä¸‹æ–‡ï¼Œæ‰“å°å‡ºå…¨å±€å¯¹è±¡çš„<code>color</code> ï¼Œä¹‹å‰è®¾ç½®è¿‡<code>color = &quot;green&quot;;</code> å³æ‰“å°<code>green</code></li></ul></li></ul><ul id="8253d0d9-c6e0-414a-8a9c-313e36e1b315" class="bulleted-list"><li style="list-style-type:disc">äº‹ä»¶å›è°ƒï¼ˆevent callbackï¼‰å’Œå®šæ—¶å›è°ƒï¼ˆtimeouts callbackï¼‰ä¸­çš„å‡½æ•°æ—¢å¯ä»¥æ˜¯æ™®é€šå‡½æ•°ä¹Ÿå¯ä»¥æ˜¯ç®­å¤´å‡½æ•°ï¼Œå®ƒä»¬çš„<code>this</code> å€¼æŒ‡å‘çš„<strong>å¹¶éæƒ³è¦çš„å¯¹è±¡</strong>ï¼ˆnot intended objectï¼‰ï¼Œå°†å…¶ä¸­çš„å›è°ƒå‡½æ•°å†™æˆç®­å¤´å‡½æ•°èƒ½ä¿è¯<code>this</code> ä¿ç•™ï¼ˆpreservedï¼‰ä¸ºå®šä¹‰è¯¥å‡½æ•°æ—¶çš„ä¸Šä¸‹æ–‡<pre id="08a50da1-e85c-48cd-9752-1f2ea911a5d0" class="code"><code>// å›è°ƒå‡½æ•°
function Queen() {
  this.name = &quot;Elizabeth&quot;;
  setTimeout(function () {
    console.log(this.name);
  }, 1000);
}

function King() {
  this.name = &quot;Henry&quot;;
  setTimeout(() =&gt; {
    console.log(this.name);
  }, 1000);
}

new Queen(); // undefined
new King(); // Henry</code></pre><ul id="b05c7e82-a779-4c6e-ae50-ef5ba2ff3bb5" class="bulleted-list"><li style="list-style-type:circle">æ ‡å‡†å›è°ƒå‡½æ•°<code>this</code>å¼•ç”¨é»˜è®¤å…¨å±€å¯¹è±¡ï¼Œå› ä¸ºå…¨å±€å¯¹è±¡ä¸Šæ²¡æœ‰<code>name</code> å±æ€§ï¼Œæ‰€ä»¥æ‰“å°<code>undefined</code></li></ul><ul id="42cd18a9-28f1-4925-943b-10d062f35ae9" class="bulleted-list"><li style="list-style-type:circle">ç®­å¤´å‡½æ•°ä¿ç•™å®šä¹‰è¯¥å‡½æ•°æ—¶çš„ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥<code>this</code> å°±æ˜¯<code>new King()</code> æ„é€ å‡½æ•°æ–°åˆ›å»ºçš„<code>this</code>  ï¼Œæ‰“å°<code>Henry</code></li></ul></li></ul><h1 id="012dcbef-ad1c-4cba-a940-966a058ae5eb" class="">9.3 caller</h1><ul id="5a5963ac-63c4-4766-9289-e730e29b7e9e" class="bulleted-list"><li style="list-style-type:disc">ES5è§„èŒƒçš„<code>caller</code> æ˜¯å‡½æ•°å¯¹è±¡çš„å±æ€§ï¼Œ<a href="%E5%87%BD%E6%95%B0%EF%BC%88Function%EF%BC%89.html"><code>Function.prototype.caller</code></a> ï¼›è™½ç„¶ES3å¹¶æ²¡æœ‰å®šä¹‰<code>caller</code> è¿™ä¸ªå±æ€§ï¼Œä½†æ‰€æœ‰æµè§ˆå™¨ï¼ˆé™¤äº†æ—©æœŸç‰ˆæœ¬çš„Operaï¼‰éƒ½æ”¯æŒè¿™ä¸ªå±æ€§ï¼Œè¿™ä¸ªå±æ€§å¼•ç”¨çš„æ˜¯è°ƒç”¨å½“å‰å‡½æ•°çš„å‡½æ•°ï¼Œæˆ–è€…å¦‚æœæ˜¯å…¨å±€ä½œç”¨åŸŸä¸­è°ƒç”¨çš„åˆ™ä¸º<code>null</code><pre id="b459ad14-c599-4ad5-8249-fc9174182488" class="code"><code>// nodeç¯å¢ƒ
function outer() {
  inner(arguments.callee);
  console.log(outer.caller);
  console.log(outer.caller === arguments[0]);
}

function inner() {
  console.log(inner.caller);
  console.log(inner.caller === arguments[0]);
}

outer(arguments.callee);
// æ‰“å°ç»“æœ
[Function: outer]
true
[Function (anonymous)]
true</code></pre><ul id="7db0443d-2459-4c45-8f93-8ccfead8ec87" class="bulleted-list"><li style="list-style-type:circle">å¯¹äº<code>inner()</code>è€Œè¨€ï¼Œå®ƒä¼šåœ¨<code>outer</code> å‡½æ•°ä¸­è¢«è°ƒç”¨ï¼Œæ‰€ä»¥<code>inner.caller</code> å¼•ç”¨<code>outer</code> å‡½æ•°å¯¹è±¡æœ¬èº«ï¼Œè€Œåœ¨<code>outer</code> ä¸­è°ƒç”¨<code>inner()</code> æ—¶ä¼ é€’äº†<code>arguments.callee</code> å³è§£è€¦ä½¿ç”¨çš„<code>outer</code> å‡½æ•°å¯¹è±¡æœ¬èº«ï¼Œæ‰€ä»¥ä¹Ÿä¼šæ‰“å°å‡º<code>true</code> å€¼ï¼›å¦‚æœè¦æƒ³è¿›ä¸€å‡ä½è€¦åˆåº¦ï¼ˆlooser couplingï¼‰ï¼Œå¯ä»¥ä½¿ç”¨<code>arguments.callee.caller</code> æ¥å¼•ç”¨è°ƒç”¨<code>inner</code> çš„æ‰€åœ¨ä½œç”¨åŸŸçš„å‡½æ•°æœ¬èº«</li></ul><ul id="8c24964d-4ce9-4b2d-9695-1de62aa5f193" class="bulleted-list"><li style="list-style-type:circle">å¯¹äº<code>outer()</code> è€Œè¨€ï¼Œå› ä¸º<code>node</code>ç¯å¢ƒä¸‹jsæ–‡ä»¶è¿è¡Œå°±æ˜¯åœ¨ä¸€ä¸ª<a href="https://www.notion.so/var-node-d17d523c6e124c19a388e647232ecb8d">é—­åŒ…ç¯å¢ƒ</a>ï¼Œæ‰€ä»¥<code>outer</code> æœ¬èº«åœ¨ä¸€ä¸ªåŒ¿åå‡½æ•°ä¸­è¢«è°ƒç”¨ï¼Œå®ƒçš„<code>caller</code> å±æ€§å€¼è‚¯å®šæ‰“å°é™¤äº†ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œå¯ä»¥é€šè¿‡ç»™<code>outer</code> ä¼ é€’<code>arguments.callee</code> ä»¥ç¡®å®šè¿™ä¸ªåŒ¿åå‡½æ•°çš„å­˜åœ¨</li></ul></li></ul><ul id="f1d07683-d8ee-42f6-a3ed-0cd6616c3213" class="bulleted-list"><li style="list-style-type:disc">åœ¨ä¸¥æ ¼æ¨¡å¼ä¸‹ï¼Œ<code>arguments.callee</code> æ˜¯ä¸èƒ½è¢«è®¿é—®çš„ï¼Œä¼šæŠ›å‡ºTypeErrorå¼‚å¸¸ï¼›åŒæ—¶ï¼Œå‡½æ•°å¯¹è±¡çš„<code>caller</code>å±æ€§ä¸èƒ½è¢«èµ‹å€¼ï¼Œä¹Ÿä¼šæŠ›å‡ºå¼‚å¸¸</li></ul><ul id="ba95c80e-410e-4f2d-a73e-500001ae93e2" class="bulleted-list"><li style="list-style-type:disc">åŒæ—¶ES5ä¹Ÿå®šä¹‰äº†<code>arguments.caller</code> å±æ€§ï¼Œåœ¨éä¸¥æ ¼æ¨¡å¼ä¸‹å§‹ç»ˆæ˜¯<code>undefined</code> ï¼Œä¸¥æ ¼æ¨¡å¼ä¸‹æŠ¥é”™ï¼Œè¿™æ˜¯ä¸ºäº†åˆ†æ¸…æ¥š<code>arguments.caller</code> å’Œå‡½æ•°å¯¹è±¡çš„<code>caller</code> è€Œæœ‰æ„ä¸ºä¹‹ï¼ŒåŒæ—¶ä½œä¸ºå¯¹è¿™é—¨è¯­è¨€çš„å®‰å…¨é˜²æŠ¤ï¼Œè¿™ä¸ªæ”¹åŠ¨ä¹Ÿè®©ç¬¬ä¸‰æ–¹ä»£ç æ— æ³•æ£€æµ‹åŒä¸€ä¸Šä¸‹æ–‡ä¸­è¿è¡Œçš„å…¶ä»–ä»£ç </li></ul><h1 id="63d1166d-43a5-4a2c-943e-992b2ca5c919" class="">9.4 new.target</h1><ul id="d2ad2398-9226-4e99-b065-386eecaa8af2" class="bulleted-list"><li style="list-style-type:disc"><code>new.target</code> æ˜¯ES6æ–°å¢çš„ç”¨äºæ£€æµ‹å‡½æ•°æ˜¯å¦ä½¿ç”¨<code>new</code>å…³é”®å­—è¿›è¡Œè°ƒç”¨çš„<strong>ä¼ªå±æ€§</strong><ul id="7452a7d7-b300-4daf-8e39-fce129144480" class="bulleted-list"><li style="list-style-type:circle">å¦‚æœä¸æ˜¯ä½¿ç”¨<code>new</code> å…³é”®å­—è¿›è¡Œè°ƒç”¨ï¼Œ<code>new.target</code> å°±æ˜¯<code>undefined</code></li></ul><ul id="6cc104b0-4bcb-4b00-98c1-dc04e9f34fd9" class="bulleted-list"><li style="list-style-type:circle">å¦‚æœä½¿ç”¨<code>new</code> å…³é”®å­—è¿›è¡Œè°ƒç”¨ï¼ˆå‰ææ˜¯å‡½æ•°ä¸æ˜¯ç®­å¤´å‡½æ•°ï¼‰ï¼Œ<code>new.target</code> å¼•ç”¨è¢«è°ƒç”¨çš„æ„é€ å‡½æ•°</li></ul></li></ul><ul id="f76d9196-924b-42fb-8ec0-44c3c086ca95" class="bulleted-list"><li style="list-style-type:disc"><code>new.target</code> èƒ½ç”¨äºä¿è¯æ„é€ å‡½æ•°é€šè¿‡<code>new</code> è¿›è¡Œè°ƒç”¨ï¼Œæœç»ç®€å•çš„å‡½æ•°è°ƒç”¨ï¼Œé€šè¿‡åˆ¤æ–­<code>new.target</code> æ˜¯å¦ä¸º<code>undefined</code> ï¼Œä½¿ç”¨ç®€å•å‡½æ•°è°ƒç”¨çš„æ–¹å¼æŠ›å‡ºå¼‚å¸¸å³å¯</li></ul><ul id="3b450842-04ae-4e14-9654-10f359eb25fb" class="bulleted-list"><li style="list-style-type:disc">ç±»çš„æ„é€ å‡½æ•°ä¸­ä¹Ÿå¯ä»¥ä½¿ç”¨<code>new.target</code> ï¼ˆå› ä¸ºç±»åº•å±‚ä½¿ç”¨å‡½æ•°å’ŒåŸå‹é“¾å®ç°ï¼‰,åŒç†<code>new.target</code> ä¼šå¼•ç”¨ç±»æœ¬èº«ï¼Œé€šè¿‡<code>super()</code> è°ƒç”¨çˆ¶ç±»ï¼Œçˆ¶ç±»çš„æ„é€ å‡½æ•°ä¸­åŒæ ·å…·æœ‰<code>new.target</code> å±æ€§ï¼Œä¸”ä¸ºå­ç±»æœ¬èº«ï¼Œæ›´å¤šå¯ä»¥æŸ¥çœ‹<a href="../8%20%E5%AF%B9%E8%B1%A1%E3%80%81%E7%B1%BB%E4%B8%8E%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1%E7%BC%96%E7%A8%8B/4%20%E7%B1%BB/new%20target.html"><span class="icon">ğŸŒ‘</span>new.target</a> <pre id="7584c4c5-80ba-4aa1-aacb-b17498e530a4" class="code"><code>// åˆ›å»ºæŠ½è±¡ç±»
function Person(name, age) {
  if (new.target === Person) {
    throw new Error(&quot;æŠ½è±¡ç±»ä¸èƒ½è¢«newæ“ä½œç¬¦è¿›è¡Œè°ƒç”¨&quot;);
  }
  this.name = name;
  this.age = age;
}

function King(name, age, generation) {
  if (!new.target) {
    throw new Error(&quot;å¿…é¡»ä½¿ç”¨newæ“ä½œç¬¦å®ä¾‹åŒ–Kingæ„é€ å‡½æ•°&quot;);
  }
  Person.call(this, name, age);
  this.generation = generation;
}

// å¯„ç”Ÿå¼ç»„åˆç»§æ‰¿
function parasiticCompositeInheritance(subType, superType) {
  const prototype = Object.create(superType.prototype);
  prototype.sayName = function () {
    console.log(`${this.name} ${this.generation}`);
  };
  prototype.constructor = subType;
  subType.prototype = prototype;
}
parasiticCompositeInheritance(King, Person);
const king = new King(&quot;Henry&quot;, 26, &quot;III&quot;);
king.sayName(); // Henry III

try {
  King(&quot;Henry&quot;, 26, &quot;III&quot;);
} catch (error) {
  console.log(error.toString()); // Error: å¿…é¡»ä½¿ç”¨newæ“ä½œç¬¦å®ä¾‹åŒ–Kingæ„é€ å‡½æ•°
}

try {
  new Person(&quot;Henry&quot;, 26);
} catch (error) {
  console.log(error.toString()); // Error: æŠ½è±¡ç±»ä¸èƒ½è¢«newæ“ä½œç¬¦è¿›è¡Œè°ƒç”¨
}</code></pre></li></ul><p id="dec5fa57-aa96-46b4-9df2-8995f74e4dd7" class="">
</p></div></div></div></article></body></html>