<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>4. èŒƒå›´</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

.simple-table {
	margin-top: 1em;
	font-size: 0.875rem;
	empty-cells: show;
}
.simple-table td {
	height: 29px;
	min-width: 120px;
}

.simple-table th {
	height: 29px;
	min-width: 120px;
}

.simple-table-header-color {
	background: rgb(247, 246, 243);
	color: black;
}
.simple-table-header {
	font-weight: 500;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	max-height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
	color: rgba(55, 53, 47, 1);
}
.highlight-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.highlight-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.highlight-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.highlight-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.highlight-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.highlight-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.highlight-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.highlight-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.highlight-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.highlight-gray_background {
	background: rgba(241, 241, 239, 1);
}
.highlight-brown_background {
	background: rgba(244, 238, 238, 1);
}
.highlight-orange_background {
	background: rgba(251, 236, 221, 1);
}
.highlight-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.highlight-teal_background {
	background: rgba(237, 243, 236, 1);
}
.highlight-blue_background {
	background: rgba(231, 243, 248, 1);
}
.highlight-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.highlight-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.highlight-red_background {
	background: rgba(253, 235, 236, 1);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(120, 119, 116, 1);
	fill: rgba(120, 119, 116, 1);
}
.block-color-brown {
	color: rgba(159, 107, 83, 1);
	fill: rgba(159, 107, 83, 1);
}
.block-color-orange {
	color: rgba(217, 115, 13, 1);
	fill: rgba(217, 115, 13, 1);
}
.block-color-yellow {
	color: rgba(203, 145, 47, 1);
	fill: rgba(203, 145, 47, 1);
}
.block-color-teal {
	color: rgba(68, 131, 97, 1);
	fill: rgba(68, 131, 97, 1);
}
.block-color-blue {
	color: rgba(51, 126, 169, 1);
	fill: rgba(51, 126, 169, 1);
}
.block-color-purple {
	color: rgba(144, 101, 176, 1);
	fill: rgba(144, 101, 176, 1);
}
.block-color-pink {
	color: rgba(193, 76, 138, 1);
	fill: rgba(193, 76, 138, 1);
}
.block-color-red {
	color: rgba(212, 76, 71, 1);
	fill: rgba(212, 76, 71, 1);
}
.block-color-gray_background {
	background: rgba(241, 241, 239, 1);
}
.block-color-brown_background {
	background: rgba(244, 238, 238, 1);
}
.block-color-orange_background {
	background: rgba(251, 236, 221, 1);
}
.block-color-yellow_background {
	background: rgba(251, 243, 219, 1);
}
.block-color-teal_background {
	background: rgba(237, 243, 236, 1);
}
.block-color-blue_background {
	background: rgba(231, 243, 248, 1);
}
.block-color-purple_background {
	background: rgba(244, 240, 247, 0.8);
}
.block-color-pink_background {
	background: rgba(249, 238, 243, 0.8);
}
.block-color-red_background {
	background: rgba(253, 235, 236, 1);
}
.select-value-color-pink { background-color: rgba(245, 224, 233, 1); }
.select-value-color-purple { background-color: rgba(232, 222, 238, 1); }
.select-value-color-green { background-color: rgba(219, 237, 219, 1); }
.select-value-color-gray { background-color: rgba(227, 226, 224, 1); }
.select-value-color-opaquegray { background-color: rgba(255, 255, 255, 0.0375); }
.select-value-color-orange { background-color: rgba(250, 222, 201, 1); }
.select-value-color-brown { background-color: rgba(238, 224, 218, 1); }
.select-value-color-red { background-color: rgba(255, 226, 221, 1); }
.select-value-color-yellow { background-color: rgba(253, 236, 200, 1); }
.select-value-color-blue { background-color: rgba(211, 229, 239, 1); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style><link rel="stylesheet" href="../../style.css"></head><body><article id="fbe83bee-23a1-4854-b56c-5bb653249197" class="page sans"><header><img class="page-cover-image" src="https://www.notion.so/images/page-cover/nasa_fingerprints_of_water_on_the_sand.jpg" style="object-position:center 60%"/><div class="page-header-icon page-header-icon-with-cover"><span class="icon">ğŸ“‚</span></div><h1 class="page-title">4. èŒƒå›´</h1></header><div class="page-body"><p id="08c84a65-2e0c-4de1-8f3e-323be84cf7b5" class="">ä¸ºäº†æ”¯æŒå¯¹é¡µé¢æ›´ç²¾ç»†çš„æ§åˆ¶ï¼ŒDOM2 Traversal and Rangeæ¨¡å—å®šä¹‰äº†èŒƒå›´ï¼ˆRangeï¼‰æ¥å£</p><ul id="d329fc09-9f97-41b8-97b2-1d1c05973bd4" class="bulleted-list"><li style="list-style-type:disc">ç”¨äºåœ¨æ–‡æ¡£ä¸­<strong>é€‰æ‹©å†…å®¹</strong>ï¼Œè€Œä¸ç”¨è€ƒè™‘èŠ‚ç‚¹ä¹‹é—´çš„ç•Œé™</li></ul><ul id="7d4705cf-1dd6-4e1d-83a8-9864db193418" class="bulleted-list"><li style="list-style-type:disc">èŒƒå›´é€‰æ‹©åœ¨åå°å‘ç”Ÿï¼Œç”¨æˆ·ä¸å¯è§</li></ul><p id="ebe7573a-17bf-40fa-a424-3138e71f3431" class="">èŒƒå›´åœ¨å¸¸è§„DOMæ“ä½œçš„ç²’åº¦ä¸å¤Ÿæ—¶å¯ä»¥å‘æŒ¥ä½œç”¨</p><p id="9b684868-dde1-4b69-9d1b-76cb9a7b8468" class="">æœ‰å…³èŒƒå›´ï¼ˆRangeï¼‰çš„è§„èŒƒï¼Œå¯ä»¥å‚è€ƒ<strong>DOMè§„èŒƒç¬¬5.5.Â InterfaceÂ </strong><strong><a href="https://dom.spec.whatwg.org/#range"><code>Range</code></a></strong><strong>ã€DOM Parsing and Serialization ç¬¬2.5Â Extensions to theÂ </strong><a href="https://w3c.github.io/DOM-Parsing/#dom-range"><code><strong>Range</strong></code></a><strong>Â interfaceã€CSSOM View Module ç¬¬9.Â Extensions to theÂ </strong><a href="https://dom.spec.whatwg.org/#range"><code><strong>Range</strong></code></a><strong>Â Interface</strong></p><div id="293ccaff-9e84-4bb8-b224-f8297e43f068" class="column-list"><div id="921c22b2-c94c-497f-8af1-ca91ee3b7da6" style="width:18.75%" class="column"><nav id="9fdefa3c-70f8-4a01-8b03-0330ca601c92" class="block-color-gray table_of_contents"><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#b2ae9ebf-9b26-43fc-84dc-576e3db22b9e">4.1 DOMèŒƒå›´ï¼ˆRanges in the DOMï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#bc6ea2b9-5902-42a2-b116-0d9c2ee52488">4.1.0 è¡¥å……ï¼ˆçº¯ä¸ªäººç†è§£ï¼Œå¯èƒ½æœ‰ä¸å¯¹çš„åœ°æ–¹ï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#eaf47642-bbfd-4271-b077-9866e52fb1d8">4.1.0.1 ä¸ºä»€ä¹ˆæœ‰Range</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#69a1182e-0011-424f-af8c-cbf63d235049">4.1.0.2 é€‰æ‹©å†…å®¹</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#70f4c943-7296-42f9-b255-5da761a1f549">4.1.0.3 ç¡®å®šé€‰æ‹©å†…å®¹çš„æ–¹æ³•</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#31b95cdb-13af-4ee2-8153-cc3501b15d47">4.1.0.4 æ“ä½œèŒƒå›´å’Œé€‰æ‹©å†…å®¹</a></div><div class="table_of_contents-item table_of_contents-indent-2"><a class="table_of_contents-link" href="#052188cc-45da-4c18-b70a-e328f5d1cd40">4.1.0.5 èŒƒå›´çš„å…³ç³»</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#9a30abbe-2cea-4664-ba6d-69ad838bef3e">4.2 ç®€å•é€‰æ‹©ï¼ˆSimple Selection in DOM Rangesï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#a7ca2718-6756-46b9-81f7-0c5b0697d9c8">4.3 å¤æ‚é€‰æ‹©ï¼ˆComplex Selection in DOM Rangesï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#2d70870a-2a35-41b3-8e9a-b80073843899">4.4 æ“ä½œèŒƒå›´ï¼ˆInteracting with DOM Range Contentï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#8ab4d410-5a73-4664-b634-5a0f82692b34">4.4.1 <code>deleteContents()</code></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#2fa2bed1-715b-42ef-8c32-0c4580f003cc">4.4.2 <code>extractContents()</code> </a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#923f9125-a94d-49cb-971d-ff82103ef573">4.4.3 <code>cloneContents()</code> </a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#c0e3d511-c608-418e-9b70-d8b7fdc9d610">4.5 èŒƒå›´æ’å…¥ï¼ˆInserting DOM Range Contentï¼‰</a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#770e6e16-ed1c-4bf8-a061-06cfe1407828">4.5.1 <code>insertNode()</code></a></div><div class="table_of_contents-item table_of_contents-indent-1"><a class="table_of_contents-link" href="#5dba2bc2-2960-4be1-a3ed-817791224a11">4.5.2 <code>surroundContents()</code> </a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#647e74c7-391e-4745-b90b-243a41566b83">4.6 èŒƒå›´æŠ˜å (Collapsing a DOM Range)</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#6536b907-435f-4b5b-bc9e-47039fd99cfb">4.7 èŒƒå›´æ¯”è¾ƒ(Comparing DOM Ranges)</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#19045a7a-72e7-4e15-bcd2-fe7dacbe2eaa">4.8 å¤åˆ¶èŒƒå›´(Cloning DOM Ranges)</a></div><div class="table_of_contents-item table_of_contents-indent-0"><a class="table_of_contents-link" href="#29167558-e292-4ece-a65e-e25f308d6132">ğŸš«4.9 æ¸…ç†(Cleanup)</a></div></nav><p id="ca8f2dab-d7d6-4587-be05-081e13d8258b" class="">
</p></div><div id="973fd8a7-2024-4717-903f-b35dcec55a05" style="width:81.25%" class="column"><h1 id="b2ae9ebf-9b26-43fc-84dc-576e3db22b9e" class="">4.1 DOMèŒƒå›´ï¼ˆRanges in the DOMï¼‰</h1><ul id="f901fcf3-be26-4978-a692-796188d306ef" class="bulleted-list"><li style="list-style-type:disc">DOM2åœ¨Documentç±»å‹ä¸Šå®šä¹‰äº†ä¸€ä¸ª<code>createRange()</code> æ–¹æ³•ï¼Œæš´éœ²åœ¨<code>document</code> å¯¹è±¡ä¸Šï¼Œä½¿ç”¨æ•´ä¸ªæ–¹æ³•å¯ä»¥åˆ›å»ºä¸€ä¸ªDOMèŒƒå›´å¯¹è±¡ï¼Œåœ¨DOMè§„èŒƒçš„<strong><strong>4.5.Â InterfaceÂ </strong></strong><a href="https://dom.spec.whatwg.org/#document"><code><strong><strong>Document</strong></strong></code></a><strong><strong> </strong></strong>ä¸­å®šä¹‰å¦‚ä¸‹<pre id="53bb2a98-e4e3-4ab5-8831-253f3a0ad42f" class="code code-wrap"><code>[Exposed=Window]
interface Document : Node {
  constructor();
	...
	[NewObject] Range createRange();
	...
}</code></pre></li></ul><ul id="fd56f432-a615-4d4e-9124-30759af85093" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨è¿™ä¸ª<code>createRange()</code>æ–¹æ³•å¯ä»¥åˆ›å»ºä¸€ä¸ªDOMèŒƒå›´å¯¹è±¡ï¼Œå¦‚ä¸‹æ‰€ç¤º<pre id="6d50fd74-ec34-488e-94aa-b6f72ebaea4c" class="code code-wrap"><code>let range = document.createRange();</code></pre><ul id="3a5abafa-34af-4d33-80b5-c63d3175fc23" class="bulleted-list"><li style="list-style-type:circle">ä¸èŠ‚ç‚¹ç±»ä¼¼ï¼Œè¿™ä¸ªæ–°åˆ›å»ºçš„èŒƒå›´å¯¹è±¡ä¸åˆ›å»ºå®ƒçš„æ–‡æ¡£å…³è”ï¼Œä¸èƒ½åœ¨å…¶å®ƒæ–‡æ¡£ä¸­ä½¿ç”¨</li></ul><ul id="5ffbe25d-a666-4bde-be71-4ad0c6774d50" class="bulleted-list"><li style="list-style-type:circle">åˆ›å»ºè¿‡ç¨‹ä¸éœ€è¦ä¼ é€’ä»»ä½•å‚æ•°ï¼Œå¾—åˆ°èŒƒå›´å¯¹è±¡ååœ¨ä½¿ç”¨å®ƒåœ¨åå°é€‰æ‹©æ–‡æ¡£ç‰¹å®šéƒ¨åˆ†å³å¯</li></ul><ul id="c8701a1f-1d0d-4ee8-a726-c4d8b6c2b7ee" class="bulleted-list"><li style="list-style-type:circle">åœ¨èŒƒå›´å¯¹è±¡æŒ‡å®šä½ç½®åï¼Œå¯ä»¥å¯¹èŒƒå›´çš„å†…å®¹æ‰§è¡Œä¸€äº›æ“ä½œï¼Œä»è€Œå®ç°å¯¹åº•å±‚DOMæ ‘æ›´ç²¾ç»†çš„æ§åˆ¶</li></ul></li></ul><ul id="10346398-1523-4fcf-a8ac-20649bcd309e" class="bulleted-list"><li style="list-style-type:disc">æ¯ä¸ªèŒƒå›´å¯¹è±¡éƒ½æ˜¯<code>Range</code> ç±»å‹çš„å®ä¾‹ï¼Œæ‹¥æœ‰ç›¸åº”çš„å±æ€§å’Œæ–¹æ³•ï¼Œ<code>Range</code> æ¥å£çš„åŸºæœ¬å®šä¹‰åœ¨<a href="https://dom.spec.whatwg.org/#range">DOMè§„èŒƒ</a>ä¸­ï¼Œå¦‚ä¸‹<pre id="55e5b569-50d7-41d8-b82c-b70a7103c9e6" class="code code-wrap"><code>[Exposed=Window]
interface AbstractRange {
  readonly attribute Node startContainer;
  readonly attribute unsigned long startOffset;
  readonly attribute Node endContainer;
  readonly attribute unsigned long endOffset;
  readonly attribute boolean collapsed;
};

[Exposed=Window]
interface Range : AbstractRange {
  constructor();

  readonly attribute Node commonAncestorContainer;

  undefined setStart(Node node, unsigned long offset);
  undefined setEnd(Node node, unsigned long offset);
  undefined setStartBefore(Node node);
  undefined setStartAfter(Node node);
  undefined setEndBefore(Node node);
  undefined setEndAfter(Node node);
  undefined collapse(optional boolean toStart = false);
  undefined selectNode(Node node);
  undefined selectNodeContents(Node node);

  const unsigned short START_TO_START = 0;
  const unsigned short START_TO_END = 1;
  const unsigned short END_TO_END = 2;
  const unsigned short END_TO_START = 3;
  short compareBoundaryPoints(unsigned short how, Range sourceRange);

  [CEReactions] undefined deleteContents();
  [CEReactions, NewObject] DocumentFragment extractContents();
  [CEReactions, NewObject] DocumentFragment cloneContents();
  [CEReactions] undefined insertNode(Node node);
  [CEReactions] undefined surroundContents(Node newParent);

  [NewObject] Range cloneRange();
  undefined detach();

  boolean isPointInRange(Node node, unsigned long offset);
  short comparePoint(Node node, unsigned long offset);

  boolean intersectsNode(Node node);

  stringifier;
};</code></pre><ul id="ed7769cd-f691-4941-b0c6-78f410665831" class="bulleted-list"><li style="list-style-type:circle"><code>stringifier</code> è¡¨ç¤º<code>Range</code> å¯¹è±¡å…·æœ‰å­—ç¬¦ä¸²åŒ–çš„è¡Œä¸ºï¼Œå‚è€ƒ<a href="https://dom.spec.whatwg.org/#dom-range-stringifier"><strong>DOMè§„èŒƒdom-range-stringifier</strong></a></li></ul><p id="71e30250-b08f-4f4c-a666-43b60880e624" class=""><strong>ç»§æ‰¿è‡ª</strong><strong><code>AbstractRange</code></strong><strong> çš„å±æ€§å¦‚ä¸‹</strong></p><ul id="7a1584a4-a8bf-405f-8068-4b756752cc63" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>startContainer</code>  ï¼ŒèŒƒå›´èµ·ç‚¹æ‰€åœ¨çš„èŠ‚ç‚¹ï¼ˆé€‰åŒºä¸­ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼‰</span></li></ul><ul id="66038772-f11a-42d5-b436-4055f5ab9ae2" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>endContainer</code> ,èŒƒå›´ç»ˆç‚¹æ‰€åœ¨çš„èŠ‚ç‚¹ï¼ˆé€‰åŒºä¸­æœ€åä¸€ä¸ªå­èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ï¼‰</span></li></ul><ul id="e8a51ac6-fb3d-434d-b149-ec751899f5d1" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>startOffset</code> ï¼ŒèŒƒå›´èµ·ç‚¹åœ¨<code>startContainer</code> ä¸­çš„åç§»é‡ï¼Œå¦‚æœ<code>startContainer</code> æ˜¯æ–‡æœ¬èŠ‚ç‚¹ã€æ³¨é‡ŠèŠ‚ç‚¹æˆ–CDataåŒºå—èŠ‚ç‚¹ï¼Œåˆ™<code>startOffset</code> æŒ‡èŒƒå›´èµ·ç‚¹ä¹‹å‰è·³è¿‡çš„å­—ç¬¦æ•°ï¼›å¦åˆ™ï¼Œè¡¨ç¤ºèŒƒå›´ä¸­ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„ç´¢å¼•</span></li></ul><ul id="be814432-2dac-47f4-8df7-8fab3e013bef" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>endOffset</code> ï¼ŒèŒƒå›´èµ·ç‚¹<code>startContainer</code> ä¸­çš„åç§»é‡ï¼ˆä¸startOffsetä¸­åç§»é‡çš„å«ä¹‰ç›¸åŒï¼‰</span></li></ul><ul id="49769d26-46e8-4163-b928-e3bbc58d09e9" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>collapsed</code> ï¼Œå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºèŒƒå›´çš„èµ·å§‹ç‚¹å’Œç»“æŸç‚¹æ˜¯å¦ä¸ºåŒä¸€ä¸ªä½ç½®ï¼›collapsedåœ¨è‹±è¯­ä¸­æœ‰æ”¶ç¼©ä¹‹æ„ï¼Œå¦‚æœä¸º<code>true</code> ï¼Œåˆ™<code>Range</code> èŒƒå›´æ˜¯æ”¶ç¼©çš„ï¼ŒæŠ˜å çš„ï¼Œä¸åŒ…å«å†…å®¹çš„ï¼Œè¡¨ç¤ºDOMæ ‘ä¸­çš„ä¸€ä¸ªç‚¹</span></li></ul><p id="f5881836-2255-49e4-8600-bc5e559ca1fa" class=""><strong><code>Range</code></strong><strong> æ¥å£å®šä¹‰çš„å±æ€§å’Œæ–¹æ³•</strong></p><ul id="a77e50a9-cd3a-4883-bd5c-3f64a3238fc9" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>commonAncestorContainer</code> ï¼Œæ–‡æ¡£ä¸­ä»¥<code>startContainer</code>å’Œ<code>endContainer</code> ä¸ºåä»£çš„æœ€æ·±çš„èŠ‚ç‚¹ï¼ˆå°±æ˜¯æœ€è¿‘å…¬å…±çˆ¶èŠ‚ç‚¹ï¼‰</span><hr id="6852a91c-b8ee-4ded-a29f-42b720311a62"/></li></ul><ul id="893ee4f3-e01a-444b-8ad1-a23bfae8f454" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>setStart(node, offset)</code> ï¼Œç”¨äºè®¾ç½®èŒƒå›´çš„å¼€å§‹ä½ç½®ï¼ˆå³<code>startContainer</code>ï¼‰,é™¤äº†ä¼ é€’èŒƒå›´èµ·å§‹ç‚¹æ‰€åœ¨èŠ‚ç‚¹å¤–ï¼Œè¿˜éœ€è¦ä¼ é€’èŒƒå›´èµ·ç‚¹åœ¨å®¹å™¨èŠ‚ç‚¹ä¸­çš„åç§»é‡ï¼Œå¦‚æœä¼ é€’çš„èµ·å§‹ç‚¹æ‰€åœ¨èŠ‚ç‚¹æ˜¯æ–‡æœ¬å‡ ç‚¹ã€æ³¨é‡ŠèŠ‚ç‚¹ã€CDataåŒºå—èŠ‚ç‚¹ï¼Œé‚£ä¹ˆ<code>offset</code> å°±åº”è¯¥æ˜¯ä»èµ·å§‹ç‚¹æ‰€åœ¨èŠ‚ç‚¹ç®—èµ·å­—ç¬¦çš„åç§»é‡ï¼Œå¦åˆ™å°±æ˜¯ä»èµ·å§‹ç‚¹æ‰€åœ¨èŠ‚ç‚¹å¼€å§‹ç®—èµ·<strong>å­èŠ‚ç‚¹</strong>çš„åç§»é‡ï¼›å¦‚æœè®¾ç½®çš„èµ·å§‹ç‚¹åœ¨ç»“æŸç‚¹ä¹‹ä¸‹ï¼ˆåœ¨HTMLæ–‡æ¡£ä¸­çš„ä½ç½®ï¼‰ï¼Œå°†ä¼šå¯¼è‡´é€‰åŒºæŠ˜å ï¼Œèµ·å§‹ç‚¹å’Œç»“æŸç‚¹éƒ½ä¼šè¢«è®¾ç½®ä¸ºæŒ‡å®šçš„èµ·å§‹ä½ç½®</span></li></ul><ul id="3702fe49-32c9-4582-b88d-fca3a60350a3" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>setStartAfter(refNode)</code> ï¼Œç”¨äºè®¾ç½®èŒƒå›´ç›¸å¯¹äº<code>refNode</code> èŠ‚ç‚¹çš„å¼€å§‹ä½ç½®ï¼ŒèŒƒå›´çš„å¼€å§‹ä½ç½®çš„èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹å°†ä¸<code>refNode</code> çš„çˆ¶èŠ‚ç‚¹ç›¸åŒ</span></li></ul><ul id="9f593776-dccc-435e-9f00-09ab1b54f8dd" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>setStartBefore(refNode)</code> ï¼Œç”¨äºè®¾ç½®èŒƒå›´ç›¸å¯¹äºå¦ä¸€ä¸ª<code>Node</code> çš„å¼€å§‹ä½ç½®ï¼ŒèŒƒå›´çš„å¼€å§‹ä½ç½®çš„èŠ‚ç‚¹ï¼ˆ<strong>focusNode</strong>ï¼‰çš„çˆ¶èŠ‚ç‚¹å°†ä¸<code>refNode</code> çš„çˆ¶èŠ‚ç‚¹ç›¸åŒ</span><p id="6a18d624-df81-4d93-8f28-75fcb382c13c" class=""><em>æ³¨ï¼š</em><code><em>setStartAfter</em></code><em>å’Œ</em><code><em>setStartBefore</em></code><em> åŠŸèƒ½ç±»ä¼¼ï¼Œéƒ½æ˜¯ä¸ºäº†è®¾ç½®ä¸€ä¸ªå…·ä½“çš„èµ·å§‹ä½ç½®è€Œå¯¹æ–‡æ¡£èŠ‚ç‚¹è¿›è¡Œå‚ç…§çš„æ–¹æ³•ï¼Œåªæ˜¯å‚ç…§å…·ä½“çš„æ–‡æ¡£èŠ‚ç‚¹æ—¶ï¼Œå‚ç…§æ–¹å‘ä¸ä¸€æ ·ï¼›å‚ç…§çš„æ–‡æ¡£èŠ‚ç‚¹å¹¶é</em><code><em>startContainer</em></code><em> ï¼Œè€Œæ˜¯å…¶ä¸­çš„å­èŠ‚ç‚¹</em></p></li></ul><ul id="8779601f-d6d0-4e1b-8c3c-133af078d296" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>setEnd(node, offset)</code> ï¼Œç”¨äºè®¾ç½®èŒƒå›´çš„ç»“æŸä½ç½®ï¼ˆå³<code>startContainer</code>ï¼‰,é™¤äº†ä¼ é€’èŒƒå›´ç»ˆç‚¹æ‰€åœ¨èŠ‚ç‚¹å¤–ï¼Œè¿˜éœ€è¦ä¼ é€’èŒƒå›´ç»ˆç‚¹æ‰€åœ¨å®¹å™¨èŠ‚ç‚¹ä¸­çš„åç§»é‡ï¼›å…³äº<code>node</code> çš„èŠ‚ç‚¹ç±»å‹å’Œ<code>offset</code> çš„å•ä½çš„å…³ç³»ä»¥åŠç»“æŸç‚¹å’Œèµ·å§‹ç‚¹çš„ä½ç½®å…³ç³»å¯ä»¥æŸ¥çœ‹ä¸Šé¢<code>setStart()</code> çš„æ–¹æ³•ä»‹ç»</span></li></ul><ul id="b902c7fc-ebd7-4102-b52c-112b7c9e38b1" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>setEndAfter(refNode)</code> ï¼Œç”¨äºè®¾ç½®èŒƒå›´ç›¸å¯¹äº<code>refNode</code> èŠ‚ç‚¹çš„ç»“æŸä½ç½®ï¼ŒèŒƒå›´çš„ç»“æŸä½ç½®çš„èŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹å°†ä¸<code>refNode</code> çš„çˆ¶èŠ‚ç‚¹ç›¸åŒ</span></li></ul><ul id="d82b6df4-f9cb-40b1-a4a0-e8728c2184ed" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>setEndBefore(refNode)</code> ï¼Œç”¨äºè®¾ç½®èŒƒå›´ç›¸å¯¹äºå¦ä¸€ä¸ª<code>Node</code> çš„ç»“æŸä½ç½®ï¼ŒèŒƒå›´çš„ç»“æŸä½ç½®çš„èŠ‚ç‚¹ï¼ˆ<strong>focusNode</strong>ï¼‰çš„çˆ¶èŠ‚ç‚¹å°†ä¸<code>refNode</code> çš„çˆ¶èŠ‚ç‚¹ç›¸åŒ</span></li></ul><ul id="ced41d82-c800-4037-8925-3f0f2083b991" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>collapse([toStart])</code> ï¼Œå‘è¾¹ç•Œç‚¹æŠ˜å èŒƒå›´ï¼ŒæŠ˜å åèŒƒå›´ä¸ºç©ºï¼Œä¸åŒ…å«ä»»ä½•å†…å®¹ï¼Œ<code>toStart</code> æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŠ˜å åèµ·å§‹ç‚¹å’Œç»ˆç‚¹é‡åˆçš„ä½ç½®ï¼Œ<code>true</code> åˆ™æŠ˜å åˆ°<code>start</code> èŠ‚ç‚¹ï¼Œ<code>false</code> åˆ™æŠ˜å åˆ°<code>end</code>èŠ‚ç‚¹ï¼Œçœç•¥ï¼Œé»˜è®¤ä¸º<code>false</code> </span></li></ul><ul id="4da06c34-39a7-45fd-bf4d-2c7d2063aaa1" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>selectNode(refNode)</code> ï¼Œ<code>refNode</code> æ˜¯èŒƒå›´è¦åŒ…å«çš„èŠ‚ç‚¹ï¼Œç”¨äºè®¾ç½®èŒƒå›´åº”è¯¥åŒ…å«çš„æ•´ä¸ª<code>refNode</code> åŠå…¶å†…å®¹ï¼ŒèŒƒå›´çš„èµ·å§‹èŠ‚ç‚¹å’Œç»“æŸèŠ‚ç‚¹çš„çˆ¶èŠ‚ç‚¹ä¸<code>refNode</code> çš„çˆ¶èŠ‚ç‚¹ç›¸åŒ</span></li></ul><ul id="45f56ddb-98c1-4b8d-8dfc-60c033b42587" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>selectNodeContents(refNode)</code> ï¼Œç”¨äºè®¾ç½®èŒƒå›´ï¼Œä½¿å…¶åŒ…å«ä¸€ä¸ª<code>Node</code>å†…å®¹ï¼ŒåŒæ—¶ä¼šè®¾ç½®èŒƒå›´çš„èµ·å§‹å®¹å™¨èŠ‚ç‚¹ï¼ˆ<code>startContainer</code>ï¼‰å’Œç»“æŸå®¹å™¨èŠ‚ç‚¹ï¼ˆ<code>endContainer</code>ï¼‰ä¸º<code>refNode</code> çš„çˆ¶èŠ‚ç‚¹,<code>startOffset</code> ä¸º0ï¼Œ<code>endOffset</code> åˆ™æ˜¯å¼•ç”¨èŠ‚ç‚¹åŒ…å«çš„å­—ç¬¦æ•°æˆ–å­èŠ‚ç‚¹ä¸ªæ•°</span><hr id="f39b0505-7d41-43e1-bfcb-25b5d36f456d"/></li></ul><ul id="575b3c7f-3d4f-42a2-8a7d-61e248b8625b" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>compareBoundaryPoints(how, sourceRange)</code> ç”¨äºå°†ä¸€ä¸ªèŒƒå›´çš„è¾¹ç•Œç‚¹å’Œå¦ä¸€ä¸ªèŒƒå›´çš„è¾¹ç•Œç‚¹è¿›è¡Œæ¯”è¾ƒ </span><ul id="30f74f7c-b4b4-4025-9f0e-a1cc93d5c240" class="bulleted-list"><li style="list-style-type:disc"><code>how</code> ï¼šä¸€ä¸ªå¸¸é‡ï¼Œè¡¨ç¤ºä¸¤ä¸ªèŒƒå›´çš„æ¯”è¾ƒæ–¹å¼ï¼Œä¹Ÿå¯ä»¥ç†è§£æˆ<code>Range</code> ç•™ä¸‹çš„å‡ ç§<strong>comparison methodï¼ˆæ¯”è¾ƒæ–¹æ³•ï¼‰</strong>çš„é€‰æ‹©ï¼ŒRangeä¸­å®šä¹‰äº†å¦‚ä¸‹4ç§å¸¸é‡ç”¨äºé€‰æ‹©4ç§ä¸åŒçš„æ¯”è¾ƒæ–¹å¼<table id="0c9cb0d5-338c-4ba2-b52f-3d696b260463" class="simple-table"><tbody><tr id="7bc282b3-04b4-4e03-824e-d8e1a50d7b39"><td id="kRNM" class="">å±æ€§å¸¸é‡å</td><td id="w}Gi" class="">å€¼</td><td id="vlHI" class="" style="width:309px">æè¿°</td></tr><tr id="86e6fd1d-3392-4fc4-acf7-b6bcfb3b507a"><td id="kRNM" class=""><code>Range.START_TO_START</code></td><td id="w}Gi" class="">0</td><td id="vlHI" class="" style="width:309px">å°†<code>sourceRange</code>çš„å¼€å§‹è¾¹ç•Œç‚¹ä¸è°ƒç”¨è€…ï¼ˆ<code>Range</code> èŒƒå›´ï¼‰ çš„å¼€å§‹è¾¹ç•Œç‚¹è¿›è¡Œæ¯”è¾ƒ</td></tr><tr id="10f69e41-fd8a-4d90-a977-fc7d0b497107"><td id="kRNM" class=""><code>Range.START_TO_END</code></td><td id="w}Gi" class="">1</td><td id="vlHI" class="" style="width:309px">å°†<code>sourceRange</code>çš„å¼€å§‹è¾¹ç•Œç‚¹ä¸è°ƒç”¨è€…ï¼ˆ<code>Range</code> èŒƒå›´ï¼‰ çš„ç»“æŸè¾¹ç•Œç‚¹è¿›è¡Œæ¯”è¾ƒ</td></tr><tr id="e1513fc1-60e9-419e-be49-b26a464d5f3d"><td id="kRNM" class=""><code>Range.END_TO_START</code></td><td id="w}Gi" class="">2</td><td id="vlHI" class="" style="width:309px">å°†<code>sourceRange</code>çš„ç»“æŸè¾¹ç•Œç‚¹ä¸è°ƒç”¨è€…ï¼ˆ<code>Range</code> èŒƒå›´ï¼‰ çš„å¼€å§‹è¾¹ç•Œç‚¹è¿›è¡Œæ¯”è¾ƒ</td></tr><tr id="c09fb72f-55a5-4b09-97a6-24b49530a973"><td id="kRNM" class=""><code>Range.END_TO_END</code></td><td id="w}Gi" class="">3</td><td id="vlHI" class="" style="width:309px">å°†<code>sourceRange</code>çš„ç»“æŸè¾¹ç•Œç‚¹ä¸è°ƒç”¨è€…ï¼ˆ<code>Range</code> èŒƒå›´ï¼‰ çš„ç»“æŸè¾¹ç•Œç‚¹è¿›è¡Œæ¯”è¾ƒ</td></tr></tbody></table></li></ul><ul id="1cc564eb-a13c-46b3-ad54-c5d7ab5b4219" class="bulleted-list"><li style="list-style-type:disc"><code>sourceRange</code> ï¼šå’Œè°ƒç”¨è€…ï¼ˆ<code>Range</code>å¯¹è±¡ï¼‰è¿›è¡Œæ¯”è¾ƒçš„å…¶å®ƒ<code>Range</code> å¯¹è±¡</li></ul><ul id="2de13e85-8a20-4bf1-bc88-520f3056ec72" class="bulleted-list"><li style="list-style-type:disc">è¿”å›å€¼ï¼Œæ•°å­—ï¼Œè¡¨ç¤ºè°ƒç”¨è€…ï¼ˆ<code>Range</code>å¯¹è±¡ï¼‰çš„ç›¸åº”è¾¹ç•Œç‚¹åˆ†åˆ«åœ¨<code>sourceRange</code>çš„ç›¸åº”è¾¹ç•Œç‚¹ä¹‹å‰ã€ç­‰äºæˆ–ä¹‹å<ul id="c625ff51-bda7-4938-86f9-f255385e0be0" class="bulleted-list"><li style="list-style-type:circle"><code>-1</code> ï¼š ç¬¬ä¸€ä¸ªèŒƒå›´ï¼ˆè°ƒç”¨è€…ï¼‰çš„è¾¹ç•Œç‚¹ä½äºç¬¬äºŒä¸ªèŒƒå›´ï¼ˆ<code>sourceRange</code>ï¼‰çš„è¾¹ç•Œç‚¹ä¹‹å‰</li></ul><ul id="6e77657c-56f7-4077-a6e2-d9ccb092cc7b" class="bulleted-list"><li style="list-style-type:circle"><code>0</code> ï¼š ç¬¬ä¸€ä¸ªèŒƒå›´ï¼ˆè°ƒç”¨è€…ï¼‰çš„è¾¹ç•Œç‚¹ç­‰äºç¬¬äºŒä¸ªèŒƒå›´ï¼ˆ<code>sourceRange</code>ï¼‰çš„è¾¹ç•Œç‚¹</li></ul><ul id="e35e540f-6cb2-4321-bc92-e7f9d58e8330" class="bulleted-list"><li style="list-style-type:circle"><code>1</code> ï¼š ç¬¬ä¸€ä¸ªèŒƒå›´ï¼ˆè°ƒç”¨è€…ï¼‰çš„è¾¹ç•Œç‚¹ä½äºç¬¬äºŒä¸ªèŒƒå›´ï¼ˆ<code>sourceRange</code>ï¼‰çš„è¾¹ç•Œç‚¹ä¹‹å</li></ul></li></ul><hr id="739a4664-1e15-4afe-8653-fb45d4a95f8c"/></li></ul><ul id="486aedbf-cc9d-4bed-86d1-aa77b8311cf5" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>cloneContents()</code> ï¼Œè¿”å›ä¸€ä¸ª<code>DocumentFragment</code> å¯¹è±¡ï¼Œå®ƒæ˜¯ä¸€ä¸ª<code>Range</code> ä¸­æ‰€æœ‰çš„Nodeå¯¹è±¡çš„<strong>å‰¯æœ¬</strong></span><ul id="a10633cb-0b0d-4613-8a53-3204c5b0fcc8" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨DOMäº‹ä»¶æ·»åŠ åˆ°çš„äº‹ä»¶ç›‘å¬å™¨ï¼ˆ<a href="https://developer.mozilla.org/en-US/docs/Web/API/EventTarget/addEventListener"><code>addEventListener()</code></a>ï¼‰åœ¨å…‹éš†è¿‡ç¨‹ä¸­ä¸ä¼šè¢«å¤åˆ¶</li></ul><ul id="f8daf887-0bfc-4a8a-bba7-eb9b9d294415" class="bulleted-list"><li style="list-style-type:disc">HTMLå±æ€§äº‹ä»¶ä¸ä½¿ç”¨DOM Core çš„<code>Node.cloneNode</code> æ–¹æ³•æ—¶ä¸€æ ·ï¼Œä¹Ÿä¼šè¢«å¤åˆ¶</li></ul><ul id="e65a9f90-1ee2-44be-a995-4ce11f863636" class="bulleted-list"><li style="list-style-type:disc">HTML id å±æ€§ä¹Ÿä¼šè¢«å…‹éš†ï¼Œè¿™å¯èƒ½å¯¼è‡´é€šè¿‡å…‹éš†ç”Ÿæˆæ— æ•ˆçš„æ–‡æ¡£</li></ul></li></ul><ul id="50b1c0f0-dad2-49e0-9258-ea984f53c563" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>extractContents()</code> ï¼Œè¿”å›ä¸€ä¸ª<code>DocumentFragment</code> å¯¹è±¡ï¼Œå®ƒå°†èŒƒå›´çš„å†…å®¹ä»æ–‡æ¡£æ ‘ç§»åˆ°æ–‡æ¡£å¯¹è±¡å˜é‡ä¸­ï¼ŒèŒƒå›´ä¸­çš„å†…å®¹å°†ä»æ–‡æ¡£æ ‘ä¸­ç§»é™¤</span></li></ul><ul id="0393758f-ab0d-4f6d-97e7-d33593832c4a" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>deleteContents()</code> ï¼Œä»æ–‡æ¡£ä¸­ç§»é™¤<code>Range</code> å¯¹è±¡é€‰å–çš„å†…å®¹ï¼Œä¸åƒ<code>extractContents()</code> ï¼Œæœ¬æ–¹æ³•ä¸è¿”å›è¢«ç§»é™¤çš„æ–‡æœ¬ç‰‡æ®µ</span></li></ul><ul id="e91a6ccb-3866-4157-b678-b4a4147c8ec5" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>insertNode(node)</code> ï¼Œåœ¨èŒƒå›´çš„èµ·å§‹ä½ç½®æ’å…¥èŠ‚ç‚¹ï¼Œå¦‚æœæ–°èŠ‚ç‚¹æ·»åŠ åˆ°æ˜¯ä¸€ä¸ªæ–‡æœ¬èŠ‚ç‚¹ï¼ˆ<code>Range</code> å¯¹è±¡é€‰å–çš„å†…å®¹æ˜¯æ–‡æœ¬èŠ‚ç‚¹çš„ä¸€éƒ¨åˆ†ï¼‰ï¼Œåˆ™è¯¥èŠ‚ç‚¹åœ¨æ’å…¥ç‚¹å¤„è¢«æ‹†åˆ†ï¼Œæ’å…¥å‘ç”Ÿåœ¨ä¸¤ä¸ªæ–‡æœ¬èŠ‚ç‚¹ä¹‹é—´ï¼›å¦‚æœæ–°èŠ‚ç‚¹æ˜¯ä¸€ä¸ªæ–‡æ¡£ç‰‡æ®µï¼Œåˆ™æ’å…¥æ–‡æ¡£ç‰‡æ®µçš„æ‰€æœ‰å­èŠ‚ç‚¹</span></li></ul><ul id="a5695945-9267-41aa-b299-597c7db58157" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>surroundContents(newParent)</code> ï¼Œå°†<code>Range</code> å¯¹è±¡é€‰å–çš„å†…å®¹ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹ä¸Šï¼Œå¹¶å°†è¿™ä¸ªæ–°èŠ‚ç‚¹æ”¾åˆ°è¿™ä¸ªèŒƒå›´çš„èµ·å§‹å¤„ï¼›è¿™ä¸ªæ–¹æ³•å¯ä»¥ç­‰ä»·äº<code>newNode.appendChild(range.extractContents()); range.insertNode(newNode);</code> åº”ç”¨ä»¥å<code>newNode</code> åŒ…å«åœ¨èŒƒå›´çš„è¾¹ç•Œç‚¹ä¸­</span><hr id="dce06201-c46f-4c57-91b5-ea0a8aaa1f76"/></li></ul><ul id="007d9abe-8e70-4049-8aae-1d77ce763ae3" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>cloneRange()</code> ï¼Œè¿”å›ä¸€ä¸ª<code>range</code>å¯¹è±¡ï¼Œæ–°çš„èŒƒå›´ä¸æºèŒƒå›´çš„è¾¹ç•Œç‚¹ï¼Œèµ·å§‹å®¹å™¨å’Œç»ˆç‚¹å®¹å™¨ï¼Œåç§»é‡ç­‰éƒ½ç›¸åŒï¼Œé™¤äº†ä¿®æ”¹å…·ä½“çš„DOMç»“æ„ï¼Œè¿™ä¸¤ä¸ªèŒƒå›´å¯¹è±¡äº’ä¸å½±å“</span></li></ul><ul id="2448d9fa-c4a9-478b-8dd3-649244df2417" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>detach()</code> ï¼Œ<code>detach</code> æœ‰åˆ†ç¦»ï¼Œè„±ç¦»ä¹‹æ„ï¼ŒåŸæœ¬æ˜¯ç”¨æ¥æ— æ•ˆåŒ–èŒƒå›´çš„ï¼Œç°åœ¨å·²ç»ç§»é™¤è¿™ä¸ªæ–¹æ³•çš„åŠŸèƒ½ï¼Œ<strong>ä»…ä¸ºäº†ä¿å­˜å…¼å®¹æ€§è€Œç•™å­˜</strong>ï¼Œè°ƒç”¨å®ƒä¸ä¼šæ‰§è¡Œä»»ä½•æ“ä½œ</span><hr id="a0fe6a43-acf2-44b0-9dd3-e15129198c74"/></li></ul><ul id="46fec72f-ab34-40b3-bba8-496a456adf44" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>isPointInRange(refNode, offset)</code> ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤º<strong>ç»™å®šç‚¹</strong>ï¼ˆ<strong>given point</strong>ï¼‰æ˜¯å¦åœ¨èŒƒå›´å†…ï¼Œå¦‚æœ<code>refNode</code> å†…<code>offset</code> å¤„çš„ç‚¹ï¼ˆæ¸¸æ ‡ä½ç½®ï¼Œcursor positionï¼‰åœ¨èŒƒå›´ä¸­å°±è¿”å›<code>true</code> </span></li></ul><ul id="6939c177-4165-48e6-9abe-a97954e50c99" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>comparePoint(refNode, offset)</code> ï¼Œè¿”å›ä¸€ä¸ªæ•°å­—ï¼Œè¡¨ç¤º<code>refNode</code> å†…<code>offset</code> å¤„çš„ç‚¹æ˜¯åœ¨èŒƒå›´ä¹‹å‰ï¼ˆ-1ï¼‰ï¼Œä¹‹ä¸­ï¼ˆ0ï¼‰è¿˜æ˜¯ä¹‹åï¼ˆ1ï¼‰ï¼›å¦‚æœå¼•ç”¨èŠ‚ç‚¹æ˜¯Textã€Commentæˆ–CDATASectionç±»å‹çš„èŠ‚ç‚¹ï¼Œåˆ™offsetæ˜¯ä»å¼•ç”¨èŠ‚ç‚¹å¼€å§‹çš„å­—ç¬¦æ•°ã€‚å¯¹äºå…¶ä»–èŠ‚ç‚¹ç±»å‹ï¼Œåç§»é‡æ˜¯å‚è€ƒèŠ‚ç‚¹ï¼ˆrefNodeï¼‰å¼€å§‹ä¹‹é—´çš„å­èŠ‚ç‚¹æ•°</span><hr id="514f102c-38c6-4cac-bf45-99970468f2eb"/></li></ul><ul id="47c850da-7e47-4adb-9bd9-6e8922c1fb76" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>intersectsNode(refNode)</code> ï¼Œè¿”å›ä¸€ä¸ªå¸ƒå°”å€¼ï¼ŒæŒ‡ç¤ºç»™å®šçš„<code>refNode</code> æ˜¯å¦ä¸èŒƒå›´<strong>ç›¸äº¤</strong>ï¼ˆ<strong>intersects</strong>ï¼‰</span><hr id="9361f410-b70d-4faa-a68a-65eaa14de295"/></li></ul><ul id="0fc9a14a-09da-42ee-a5f1-90f2f7fde8cd" class="to-do-list"><li><div class="checkbox checkbox-off"></div> <span class="to-do-children-unchecked"><code>stringifier</code> ï¼šèŒƒå›´çš„<code>toString()</code> æ–¹æ³•ç»§æ‰¿é‡å†™äº†ï¼Œå®ƒä¼šè¿”å›èŒƒå›´å†…çš„å­—ç¬¦ä¸²å†…å®¹</span></li></ul></li></ul><h2 id="bc6ea2b9-5902-42a2-b116-0d9c2ee52488" class="">4.1.0 è¡¥å……ï¼ˆçº¯ä¸ªäººç†è§£ï¼Œå¯èƒ½æœ‰ä¸å¯¹çš„åœ°æ–¹ï¼‰</h2><ul id="82f9d30c-5126-4865-ae42-f1ca302db1ff" class="bulleted-list"><li style="list-style-type:disc">ä¸Šé¢å¤§éƒ¨åˆ†çš„ä»‹ç»éƒ½åŸºäºDOMè§„èŒƒå’ŒMDNæ–‡æ¡£ï¼Œå¹¶éã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹</li></ul><ul id="8d31ca3a-5651-41e6-aae1-edab2e0a7cbb" class="bulleted-list"><li style="list-style-type:disc">è¦ç†è§£<code>Range</code> ï¼ˆæˆ–è€…è¯´èŒƒå›´ï¼‰æ˜¯ä»€ä¹ˆï¼Œå°±è¦ç†è§£å®ƒå¦‚ä½•åœ¨æ–‡æ¡£ä¸­<strong>é€‰æ‹©å†…å®¹</strong>ï¼Œ<code>Range</code>çš„æ‰€æœ‰æ–¹æ³•å’Œå±æ€§éƒ½å›´ç»•è¿™ä¸ª<strong>é€‰æ‹©å†…å®¹</strong>è¿›è¡Œå±•å¼€çš„</li></ul><h3 id="eaf47642-bbfd-4271-b077-9866e52fb1d8" class="">4.1.0.1 ä¸ºä»€ä¹ˆæœ‰Range</h3><ul id="bb068612-9b7c-4ba9-b574-44effcc64a76" class="bulleted-list"><li style="list-style-type:disc">DOMæ˜¯å‰ç«¯æ¸²æŸ“æ˜¾ç¤ºå†…å®¹çš„åŸºç¡€ï¼Œå®ƒæä¾›äº†åŸºæœ¬çš„APIå’Œç»“æ„è®©å¼€å‘è€…è¿›è¡Œæ“ä½œï¼Œä»¥åˆ°è¾¾åœ¨ç½‘ç»œæµè§ˆå™¨ä¸Šæ˜¾ç¤ºæƒ³è¦å†…å®¹çš„ç›®çš„</li></ul><ul id="2caa1a79-4e96-400b-b8df-c387e082bf99" class="bulleted-list"><li style="list-style-type:disc">å¯ä»¥æŠŠDOMæƒ³è±¡æˆä¸€ä¸ª<strong>è§„å®šå¥½ç»“æ„</strong>çš„<strong>å¯äº¤äº’</strong>ä¸€ç§æ–‡æ¡£å®šä¹‰æ¨¡å¼ï¼š<ul id="f031a37b-512f-4d0c-8b2e-aba72be6064e" class="bulleted-list"><li style="list-style-type:circle">åœ¨ç¬¬14ç« æˆ‘ä»¬ä»‹ç»äº†è¿™ä¸ªæ¨¡å¼çš„åŸºç¡€æ„é€ ï¼ˆDOM Coreï¼‰ï¼Œå³DOMçš„ç»“æ„æ ‘ï¼Œå±‚çº§ç»“æ„ï¼Œç»“æ„å˜åŒ–ç›‘å¬APIç­‰</li></ul><ul id="e6fe247f-eb1a-43c2-912a-9cd7f5892853" class="bulleted-list"><li style="list-style-type:circle">åœ¨ç¬¬15ç« æˆ‘ä»¬éœ€è¦äº†è§£DOMçš„æ‰©å±•ï¼Œå³éœ€è¦æœ‰æ›´å¥½çš„æ–¹æ³•è·å–DOMç»“æ„æ ‘ä¸­çš„èŠ‚ç‚¹ï¼Œå¦‚ä½•éå†ç»“æ„æ ‘ï¼Œå¯¹ç»“æ„æ ‘çš„ä¿®æ”¹ï¼Œä»¥åŠç°ä»£çš„HTML5å¯¹ä¸DOMç›¸å…³çš„æ¸²æŸ“ï¼Œæ“ä½œæ–°å¢çš„ä¸€äº›æ–¹æ³•</li></ul><ul id="13d3f293-48f9-4885-a1d3-1281291337ad" class="bulleted-list"><li style="list-style-type:circle">åœ¨ç¬¬16ç« æˆ‘ä»¬è¦äº†è§£DOMçš„æ¼”è¿›ï¼Œå› ä¸ºDOMçš„ç›¸å…³APIä¸æ˜¯ä¸€è¹´è€Œå°±çš„ï¼Œè€Œæ˜¯ä¸€æ­¥æ­¥å‘å±•çš„ï¼Œä¸ºæ­¤åˆ†ä¸ºæ ·å¼ã€éå†ã€èŒƒå›´ä¸‰ä¸ªéƒ¨åˆ†è¿›è¡Œä»‹ç»</li></ul></li></ul><ul id="43746cbe-ec22-40f8-ac20-313bde28be55" class="bulleted-list"><li style="list-style-type:disc">äº†è§£è¿‡DOMç»“æ„ä¹‹åï¼ŒçŸ¥é“DOMç»“æ„æ ‘çš„åŸºæœ¬å•å…ƒå°±æ˜¯<strong>èŠ‚ç‚¹ï¼ˆNodeï¼‰</strong>ï¼ŒèŠ‚ç‚¹æœ‰å¤šç§ç±»å‹ï¼Œå¯¹å®ƒä»¬çš„æ“ä½œã€æ¸²æŸ“ã€ä¿®æ”¹éƒ½éœ€è¦å¤§é‡çš„API<ul id="046888ce-51c2-4761-af56-fd9692d58fb4" class="bulleted-list"><li style="list-style-type:circle">ä½†æ˜¯<strong>èŠ‚ç‚¹ä¹‹é—´æ˜¯æœ‰ç•Œé™</strong>çš„</li></ul><ul id="ea132f54-22a6-4578-b8ac-7c5a29b72a4b" class="bulleted-list"><li style="list-style-type:circle">æ¯ä¸ªèŠ‚ç‚¹è™½ç„¶å¯èƒ½æœ‰çˆ¶å­å…³ç³»ï¼ŒåŒèƒå…³ç³»æˆ–æ²¡æœ‰å…³ç³»ï¼Œä½†æ˜¯æ¯æ¬¡æ“ä½œéƒ½æ˜¯å¯¹ä¸€ä¸ªèŠ‚ç‚¹è¿›è¡Œå•ç‹¬çš„æ“ä½œ</li></ul><ul id="92381532-38ae-4fa7-8dca-c7a01b09077e" class="bulleted-list"><li style="list-style-type:circle">ä¸ºäº†æ”¯æŒå¯¹<strong>é¡µé¢æ›´ç²¾ç»†çš„æ§åˆ¶</strong>ï¼ŒDOMå¼•å…¥äº†<code>Range</code> è¿™ä¸ªæ¦‚å¿µï¼ŒèŒƒå›´å°±æ˜¯æ–‡æ¡£ä»»æ„ä¸€éƒ¨åˆ†çš„é€‰æ‹©ï¼Œè¿™ä¸€éƒ¨åˆ†å¯ä»¥æ˜¯ä¸€äº›èŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥æ˜¯æ˜¯ä¸€ä¸ªèŠ‚ç‚¹ä¸­çš„éƒ¨åˆ†å†…å®¹</li></ul></li></ul><h3 id="69a1182e-0011-424f-af8c-cbf63d235049" class="">4.1.0.2 é€‰æ‹©å†…å®¹</h3><ul id="9825a148-00d3-42cb-8f42-1a09446cc596" class="bulleted-list"><li style="list-style-type:disc">ç†è§£äº†é€‰æ‹©å†…å®¹ï¼Œå°±èƒ½å¾ˆå¥½ç†è§£<strong><code>AbstractRange</code></strong><strong> </strong>å®šä¹‰çš„å±æ€§</li></ul><ul id="6cffdc7a-5b94-4762-b491-0bd05c8aad4e" class="bulleted-list"><li style="list-style-type:disc">å‡è®¾æœ‰å¦‚ä¸‹æ–‡æ¡£<pre id="818b290c-560e-4e93-ae47-7cec6421b5a6" class="code code-wrap"><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
    &lt;title&gt;DOM Content&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;header&gt;
      &lt;h2&gt;Hello, world&lt;/h2&gt;
    &lt;/header&gt;
    &lt;main&gt;
      &lt;article&gt;
        &lt;h4&gt;Range&lt;/h4&gt;
        &lt;div class=&quot;section-content&quot;&gt;
          &lt;p&gt;
            &lt;strong&gt;&lt;code&gt;Range&lt;/code&gt;&lt;/strong&gt;
            æ¥å£è¡¨ç¤ºä¸€ä¸ªåŒ…å«èŠ‚ç‚¹ä¸æ–‡æœ¬èŠ‚ç‚¹çš„ä¸€éƒ¨åˆ†çš„æ–‡æ¡£ç‰‡æ®µã€‚
          &lt;/p&gt;
          &lt;p&gt;
            å¯ä»¥ä½¿ç”¨
            &lt;a href=&quot;/zh-CN/docs/Web/API/Document/createRange&quot;
              &gt;&lt;code&gt;Document.createRange&lt;/code&gt;&lt;/a
            &gt;
            æ–¹æ³•åˆ›å»º Rangeã€‚ä¹Ÿå¯ä»¥ç”¨
            &lt;a href=&quot;/zh-CN/docs/Web/API/Selection&quot;&gt;&lt;code&gt;Selection&lt;/code&gt;&lt;/a&gt;
            å¯¹è±¡çš„
            &lt;a
              href=&quot;/zh-CN/docs/Web/API/Selection/getRangeAt&quot;
              title=&quot;getRangeAt()&quot;
              &gt;&lt;code&gt;getRangeAt()&lt;/code&gt;&lt;/a
            &gt;
            æ–¹æ³•æˆ–è€…
            &lt;a href=&quot;/zh-CN/docs/Web/API/Document&quot;&gt;&lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;
            å¯¹è±¡çš„
            &lt;a
              href=&quot;/zh-CN/docs/Web/API/Document/caretRangeFromPoint&quot;
              title=&quot;caretRangeFromPoint()&quot;
              &gt;&lt;code&gt;caretRangeFromPoint()&lt;/code&gt;&lt;/a
            &gt;
            æ–¹æ³•è·å– Range å¯¹è±¡ã€‚
          &lt;/p&gt;
          &lt;p&gt;
            è¿˜å¯ä»¥ç”¨
            &lt;a href=&quot;/zh-CN/docs/Web/API/Range/Range&quot; title=&quot;Range()&quot;
              &gt;&lt;code&gt;Range()&lt;/code&gt;&lt;/a
            &gt;
            æ„é€ å‡½æ•°ã€‚
          &lt;/p&gt;
        &lt;/div&gt;
      &lt;/article&gt;
    &lt;/main&gt;
    &lt;footer&gt;@mangwu&lt;/footer&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre></li></ul><ul id="9f6b8a56-644b-4c37-88eb-044e6001a5b2" class="bulleted-list"><li style="list-style-type:disc">è¿™ä¸ªæ–‡æ¡£æ¥æºäºMDNï¼Œæ˜¯å¯¹<code>Range</code> æ¥å£çš„åŸºæœ¬ä»‹ç»ï¼Œå› ä¸ºåˆ†æ®µå’Œè¶…é“¾æ¥çš„åŸå› ï¼Œä¸€ç¯‡æ–‡ç« ï¼ˆ&lt;article&gt;ï¼‰é‡Œæœ‰è®¸å¤šç›¸ä¼¼çš„æ ‡ç­¾ï¼Œæ„æˆå¤šä¸ªèŠ‚ç‚¹ï¼Œæ¯ä¸ªèŠ‚ç‚¹å®Œæˆè‡ªå·±çš„åŠŸèƒ½ï¼Œæœ€ç»ˆæ¸²æŸ“å¦‚ä¸‹<figure id="96ddcf45-ce6c-4a81-93b5-78debe97b40f" class="image"><a href="4%20%E8%8C%83%E5%9B%B4/range.png"><img style="width:1064px" src="4%20%E8%8C%83%E5%9B%B4/range.png"/></a></figure></li></ul><ul id="a01d7022-8440-416a-a7b9-e404bd869156" class="bulleted-list"><li style="list-style-type:disc">ç°åœ¨å¼€å‘è€…æƒ³è¦ä¿®æ”¹å…¶ä¸­æŸä¸€å°æ®µè¯çš„æ ·å¼ï¼Œâ€œÂ <a href="http://localhost:8000/zh-CN/docs/Web/API/Selection"><code>Selection</code></a>Â å¯¹è±¡çš„Â <a href="http://localhost:8000/zh-CN/docs/Web/API/Selection/getRangeAt"><code>getRangeAt()</code></a>Â æ–¹æ³•æˆ–è€…Â <a href="http://localhost:8000/zh-CN/docs/Web/API/Document"><code>Document</code></a>Â å¯¹è±¡çš„Â <a href="http://localhost:8000/zh-CN/docs/Web/API/Document/caretRangeFromPoint"><code>caretRangeFromPoint()</code></a>æ–¹æ³•â€ï¼Œæœ‰å¦‚ä¸‹å‡ ç§æ–¹å¼<ul id="bc435ec1-3cd7-485c-a4ee-ed1d99308131" class="bulleted-list"><li style="list-style-type:circle">ç›´æ¥ä¿®æ”¹HTMLæ–‡æ¡£ï¼Œè¿™ç§æ–¹å¼æ˜¯å¯è¡Œçš„ï¼Œä½†æ˜¯å¦‚æœæƒ³è¦åŠ¨æ€å˜åŒ–è¿™æ®µè¯çš„æ ·å¼ï¼Œå°±éš¾ä»¥å®ç°äº†</li></ul><ul id="8f06d8a7-ecc0-4229-b483-9b4e85626dcd" class="bulleted-list"><li style="list-style-type:circle">ä½¿ç”¨DOMæä¾›çš„è·å–èŠ‚ç‚¹çš„APIï¼Œä»¥åŠèŠ‚ç‚¹çš„å±æ€§ï¼Œä¸€ä¸ªä¸ªçš„è¿›è¡ŒæŸ¥å¢åˆ æ”¹ï¼Œæ¯”è¾ƒç¹çï¼Œä½†æ˜¯ä¹Ÿèƒ½å®Œæˆ</li></ul><ul id="d280782d-91e4-4d1e-a055-30bfb45204e9" class="bulleted-list"><li style="list-style-type:circle">æœ€åä¸€ç§æ–¹å¼å°±æ˜¯ä½¿ç”¨Range</li></ul></li></ul><ul id="f92ece99-43e5-4c08-a26d-f0d24361b22a" class="bulleted-list"><li style="list-style-type:disc">é¦–å…ˆï¼ŒæŠŠé€‰æ‹©å†…å®¹æ ‡è¯†å‡ºæ¥ï¼Œå¦‚ä¸‹<pre id="491f301f-8d2e-436d-9ed3-8f18da8192c5" class="code code-wrap"><code>&lt;p&gt;
  å¯ä»¥ä½¿ç”¨
  &lt;a href=&quot;/zh-CN/docs/Web/API/Document/createRange&quot;
    &gt;&lt;code&gt;Document.createRange&lt;/code&gt;&lt;/a
  &gt;
  æ–¹æ³•åˆ›å»º Rangeã€‚ä¹Ÿå¯ä»¥ç”¨
  &lt;a href=&quot;/zh-CN/docs/Web/API/Selection&quot;&gt;&lt;code&gt;Selection&lt;/code&gt;&lt;/a&gt;
  å¯¹è±¡çš„
  &lt;a
    href=&quot;/zh-CN/docs/Web/API/Selection/getRangeAt&quot;
    title=&quot;getRangeAt()&quot;
    &gt;&lt;code&gt;getRangeAt()&lt;/code&gt;&lt;/a
  &gt;
  æ–¹æ³•æˆ–è€…
  &lt;a href=&quot;/zh-CN/docs/Web/API/Document&quot;&gt;&lt;code&gt;Document&lt;/code&gt;&lt;/a&gt;
  å¯¹è±¡çš„
  &lt;a
    href=&quot;/zh-CN/docs/Web/API/Document/caretRangeFromPoint&quot;
    title=&quot;caretRangeFromPoint()&quot;
    &gt;&lt;code&gt;caretRangeFromPoint()&lt;/code&gt;&lt;/a
  &gt;
  æ–¹æ³•è·å– Range å¯¹è±¡ã€‚
&lt;/p&gt;</code></pre></li></ul><ul id="d55fd9e7-8499-4ec9-a06b-73aa3950a491" class="bulleted-list"><li style="list-style-type:disc">ç„¶ååˆ›å»ºä¸€ä¸ªèŒƒå›´ï¼Œå®ƒè¡¨ç¤ºä¸Šé¢<strong>åŠ ç²—è“ä½çš„æ–‡æ¡£å†…å®¹</strong></li></ul><ul id="8c023cf3-ab42-47fd-85b2-35978d24f77e" class="bulleted-list"><li style="list-style-type:disc">è€Œ<strong>é€‰æ‹©å†…å®¹</strong>æŠ½è±¡è¡¨ç¤ºå°±æ˜¯<strong><code>AbstractRange</code></strong><strong> </strong>çš„ä¸»è¦ä»»åŠ¡<ol type="1" id="88812811-b009-4241-99a8-a7b5ece9e58f" class="numbered-list" start="1"><li>ç¡®å®š<strong>é€‰æ‹©å†…å®¹</strong>æ‰€åœ¨çš„å…¬å…±ç¥–å…ˆèŠ‚ç‚¹ï¼Œä¸€èˆ¬è€Œè¨€ï¼Œé€‰æ‹©å†…å®¹éƒ½æ˜¯<code>document.body</code> ä¸Šçš„ï¼Œå¦‚æœä¸åŠ ä»¥è®¾ç½®ï¼Œé»˜è®¤å°±æ˜¯&lt;body&gt;ï¼Œåœ¨ä¸Šé¢è¿™æ®µé€‰æ‹©å†…å®¹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©å¤–å±‚æœ€è¿‘çš„&lt;p&gt;ä½œä¸ºå…¬å…±ç¥–å…ˆèŠ‚ç‚¹<ul id="bab782f9-e313-40bf-a159-a6c308ab2cc3" class="bulleted-list"><li style="list-style-type:disc"><code>startContainer</code> å’Œ<code>endContainer</code> å°±æ˜¯æ ¹æ®å…¬å…±ç¥–å…ˆèŠ‚ç‚¹ç¡®å®šçš„ï¼Œå®ƒä»¬å¯ä»¥æ˜¯å¤§çš„ç¥–å…ˆèŠ‚ç‚¹ï¼Œä¹Ÿå¯ä»¥æ˜¯å°çš„ç¥–å…ˆèŠ‚ç‚¹ï¼Œåªæ˜¯åˆ†æˆäº†ä¸¤ä¸ªéƒ¨åˆ†</li></ul><ul id="88312ab3-bcdc-4d19-b928-3414a67d950b" class="bulleted-list"><li style="list-style-type:disc">åˆ†æˆä¸¤ä¸ªéƒ¨åˆ†æ˜¯ä¸ºäº†<strong>æ›´ç²¾ç»†åœ°è¡¨ç¤ºé€‰æ‹©å†…å®¹æ‰€åœ¨çš„èŠ‚ç‚¹ä½ç½®</strong><ul id="8763f94f-4184-44ca-b7e8-3eeb2ea7e8cb" class="bulleted-list"><li style="list-style-type:circle"><code>startContainer</code> å°±æ˜¯é€‰æ‹©å†…å®¹èµ·å§‹ç‚¹ï¼ˆè“åº•&lt;a&gt;æ ‡ç­¾å¼€å¤´ï¼‰æ‰€åœ¨å®¹å™¨èŠ‚ç‚¹ï¼Œå…¶çˆ¶èŠ‚ç‚¹å°±æ˜¯å¤–å±‚çš„&lt;p&gt;</li></ul><ul id="bea9286e-1ab3-4c29-a066-8646f0eceaf5" class="bulleted-list"><li style="list-style-type:circle">ç±»ä¼¼çš„<code>endContainer</code> å°±æ˜¯é€‰æ‹©å†…å®¹ç»“æŸç‚¹ï¼ˆè“åº•æ–‡æœ¬ï¼‰æ‰€åœ¨çš„å®¹å™¨èŠ‚ç‚¹ï¼Œå…¶çˆ¶èŠ‚ç‚¹æ˜¯<mark class="highlight-blue_background"><strong> </strong></mark>â€ æ–¹æ³•è·å– Range å¯¹è±¡ã€‚â€œè¿™ä¸ª<strong>æ–‡æœ¬èŠ‚ç‚¹</strong></li></ul></li></ul><ul id="3714196e-7488-4e6e-9646-e7b31bc1176a" class="bulleted-list"><li style="list-style-type:disc">è¿™ä¸¤ä¸ªå±æ€§éƒ½æ˜¯åªè¯»å±æ€§ï¼Œæ‰€ä»¥éœ€è¦<code>Range</code> æ¥å£ä¸­å®šä¹‰æ–¹æ³•è®¾ç½®</li></ul></li></ol><ol type="1" id="ba346fa0-d9ec-482d-bfc9-d8524c8db6b9" class="numbered-list" start="2"><li>ç¡®å®š<strong>åç§»é‡</strong>ï¼Œæ‰€è°“åç§»é‡å°±æ˜¯é€‰æ‹©å†…å®¹åœ¨å®¹å™¨èŠ‚ç‚¹ä¸­çš„<strong>ä½ç½®ç¡®å®š</strong><ul id="1421fb89-f73c-4bf7-97b0-44e34a88bdef" class="bulleted-list"><li style="list-style-type:disc">å› ä¸ºé€‰æ‹©å†…å®¹æ‰€åœ¨çš„å®¹å™¨èŠ‚ç‚¹è¢«åˆ†ä¸ºæ¥èµ·å§‹ç‚¹å’Œç»“æŸç‚¹ï¼Œæ‰€ä»¥<strong>åç§»é‡</strong>å°±æœ‰äº†èµ·å§‹ç‚¹åç§»é‡å’Œç»“æŸç‚¹åç§»é‡</li></ul><ul id="76369318-9b57-4f2c-b4ba-637cf4a92ce2" class="bulleted-list"><li style="list-style-type:disc"><code>startOffset</code> å°±æ˜¯é€‰æ‹©å†…å®¹çš„èµ·å§‹ç‚¹åœ¨èµ·å§‹ç‚¹å®¹å™¨ä¸­çš„<strong>åç§»é‡</strong>ï¼Œåç§»é‡çš„å•ä½è¦çœ‹å®¹å™¨èŠ‚ç‚¹çš„ç±»å‹ï¼Œå¦‚æœå®¹å™¨ç±»å‹æ˜¯å…ƒç´ èŠ‚ç‚¹ï¼Œå¦‚<code>startContainer</code> ï¼Œåªéœ€è¦ç¡®å®šå…ƒç´ èŠ‚ç‚¹çš„å­èŠ‚ç‚¹ï¼ˆ<code>childNodes</code>ï¼‰ä»ç¬¬å‡ ä¸ªå­èŠ‚ç‚¹å¼€å§‹å³å¯ï¼Œè¦è€ƒè™‘åˆ°HTMLæ–‡æ¡£ä¹¦å†™æ—¶çš„ç©ºç™½æ–‡æœ¬å­èŠ‚ç‚¹ï¼Œ<code>startOffset</code> åº”è¯¥æ˜¯3ï¼Œå¦‚ä¸‹<figure id="89b29edd-51d1-4149-8d72-e099fbca358c" class="image"><a href="4%20%E8%8C%83%E5%9B%B4/startOffset.png"><img style="width:1134px" src="4%20%E8%8C%83%E5%9B%B4/startOffset.png"/></a></figure></li></ul><ul id="c4be3829-c27b-4196-8288-978c43d8d0c9" class="bulleted-list"><li style="list-style-type:disc"><code>endOffset</code> å°±æ˜¯é€‰æ‹©å†…å®¹çš„ç»“æŸç‚¹åœ¨ç»“æŸç‚¹å®¹å™¨ä¸­çš„åç§»é‡ï¼Œå¦‚æœå®¹å™¨ç±»å‹æ˜¯æ–‡æœ¬èŠ‚ç‚¹ï¼ˆæ³¨é‡ŠèŠ‚ç‚¹ï¼ŒCDataåŒºå—èŠ‚ç‚¹ï¼‰ï¼Œå¦‚<code>endContainer</code> ï¼Œéœ€è¦ç¡®å®šæ–‡æœ¬èŠ‚ç‚¹å†…å®¹ä¸­åœ¨å“ªä¸€ä¸ªå­—ç¬¦ç»“æŸå³å¯ï¼Œè€ƒè™‘åˆ°HTMLæ–‡æ¡£ä¹¦å†™æ—¶çš„ç©ºç™½å­—ç¬¦ï¼Œ<code>endOffset</code> åº”è¯¥æ˜¯15ï¼Œå¦‚ä¸‹<figure id="ae18a2a9-81ba-472e-be48-ae8c9c67b602" class="image"><a href="4%20%E8%8C%83%E5%9B%B4/endOffset.png"><img style="width:414px" src="4%20%E8%8C%83%E5%9B%B4/endOffset.png"/></a></figure></li></ul></li></ol><ol type="1" id="13f46fb1-c23a-4d24-bd96-9cc254bbdd32" class="numbered-list" start="3"><li>è€ƒè™‘<strong>ç‰¹æ®Šæƒ…å†µ</strong>ï¼Œé€‰æ‹©å†…å®¹çš„ç‰¹æ®Šæƒ…å†µå°±æ˜¯èµ·å§‹ç‚¹å’Œç»“æŸç‚¹é‡åˆï¼Œå³é€‰æ‹©å†…å®¹æ˜¯â€œ<strong>æŠ˜å çš„</strong>â€ï¼Œéœ€è¦ä¸€ä¸ªå±æ€§æ¥åæ˜ è¿™ç§ç‰¹æ®Šæƒ…å†µï¼Œæ‰€ä»¥å®ç°äº†<code>collapsed</code> </li></ol></li></ul><h3 id="70f4c943-7296-42f9-b255-5da761a1f549" class="">4.1.0.3 ç¡®å®šé€‰æ‹©å†…å®¹çš„æ–¹æ³•</h3><ul id="000f37da-e011-4e76-b110-66152c1a5722" class="bulleted-list"><li style="list-style-type:disc">ä¸Šé¢æˆ‘ä»¬å®šä¹‰äº†é€‰æ‹©å†…å®¹çš„5ä¸ªå±æ€§ï¼Œå®ƒå®šä¹‰åœ¨<strong>æŠ½è±¡èŒƒå›´</strong>ï¼ˆ<strong>AbstractRange</strong>ï¼‰</li></ul><ul id="8289c624-a540-424e-b362-22728e587dcb" class="bulleted-list"><li style="list-style-type:disc">å› ä¸ºè¿™äº›ç¡®å®šé€‰æ‹©å†…å®¹ä½ç½®æˆ–è€…è¯´èŒƒå›´ä½ç½®çš„å±æ€§éƒ½æ˜¯åªè¯»çš„ï¼Œæ‰€ä»¥éœ€è¦æ–¹æ³•æ¥è®¾ç½®è¿™äº›å±æ€§å€¼</li></ul><ul id="627333f3-eb3a-408a-a699-357e6da6bd57" class="bulleted-list"><li style="list-style-type:disc">äºæ˜¯å°±æœ‰äº†<code>Range</code> æ¥å£ä¸­å®šä¹‰çš„ä¸‰å¥—è®¾ç½®èµ·ç‚¹ï¼Œç»ˆç‚¹ç›¸å…³ä¿¡æ¯çš„æ–¹æ³•<ol type="1" id="91e3d2cd-0b9a-4210-9650-9b2f188adda3" class="numbered-list" start="1"><li><strong>ç›´æ¥è®¾ç½®</strong>ï¼šç›´æ¥ç»™<code>start/endContainer</code> ï¼Œ<code>start/endOffset</code> å±æ€§èµ‹å€¼æ˜¯æœ€ç®€å•ä¹Ÿæœ€ç›´æ¥çš„è®¾ç½®æ–¹å¼ï¼Œæ‰€ä»¥<code>Range</code> ç»™å‡ºäº†<code>setStart(node, offset)</code> å’Œ<code>setEnd(node, offset)</code> è¿™ä¸¤ä¸ªæ–¹æ³•ç”¨äºç¡®å®šé€‰æ‹©å†…å®¹ï¼›ä¸Šé¢çš„ä¾‹å­ä¸­æˆ‘ä»¬å·²ç»å¾—å‡ºäº†å…·ä½“çš„å®¹å™¨èŠ‚ç‚¹å’Œåç§»é‡ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥ä½¿ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•ç¡®å®šé€‰æ‹©å†…å®¹<pre id="e1d52111-a483-40e9-9134-8ef6f9c605b9" class="code code-wrap"><code>const range = document.createRange();
const articleContent = document.querySelector(&quot;.section-content&quot;);
const p = articleContent.children[1];
range.setStart(p, 3);
range.setEnd(p.childNodes[10], 15);</code></pre></li></ol><ol type="1" id="9cf23416-a0bd-440b-a657-0c2b83c58a97" class="numbered-list" start="2"><li><strong>é—´æ¥è®¾ç½®</strong>ï¼šè™½ç„¶é€šè¿‡è§‚å¯Ÿï¼Œç¡®å®šé€‰æ‹©å†…å®¹çš„èŠ‚ç‚¹å®¹æ˜“ï¼Œä½†æ˜¯ç¡®å®šé€‰æ‹©å†…å®¹çš„åç§»é‡å¹¶ä¸æ˜¯ä¸€ä»¶å®¹æ˜“çš„äº‹æƒ…ï¼›è¿™ä¸ªæ—¶å€™å°±éœ€è¦ä¾é <strong>é€‰æ‹©å†…å®¹è¾¹ç•Œç›¸å…³çš„èŠ‚ç‚¹</strong>æ¥ç¡®å®šé€‰æ‹©å†…å®¹çš„ä½ç½®äº†<ul id="28925802-89f3-4457-a357-23938de8868a" class="bulleted-list"><li style="list-style-type:disc">é€‰æ‹©å†…å®¹æœ‰2ä¸ªè¾¹ç•Œï¼Œè¾¹ç•Œæœ‰å·¦å³ä¹‹åˆ†ï¼Œæ‰€ä»¥ç†è®ºä¸Šåº”è¯¥æœ‰å››ä¸ªå¯ä»¥å‚ç…§çš„èŠ‚ç‚¹</li></ul><ul id="e282cf53-033e-4c54-9ed0-4d4de14bc056" class="bulleted-list"><li style="list-style-type:disc">è¿™4ä¸ªå‚ç…§çš„èŠ‚ç‚¹ä¸èµ·å§‹ç‚¹æˆ–ç»“æŸç‚¹æœ‰ä¸€ä¸ªä½ç½®å…³ç³»ï¼Œå³èµ·å§‹ç‚¹/ç»“æŸç‚¹ä¹‹å‰æˆ–ä¹‹å</li></ul><ul id="24f80702-31bc-4def-ab5d-49c8cb3837c1" class="bulleted-list"><li style="list-style-type:disc">æ‰€ä»¥å¯ä»¥å®šä¹‰<code>setStartAfter(node)</code> ï¼Œ<code>setStartBefore(node)</code> ï¼Œ<code>setEndAfter(node)</code> ,<code>setEndBefore(node)</code> è¿™å››ä¸ªæ–¹æ³•</li></ul><ul id="b8b4164c-122a-4385-9a03-be11d3a1e0b3" class="bulleted-list"><li style="list-style-type:disc">è¿™äº›ä¸ªæ–¹æ³•<strong>é€‚ç”¨äºèµ·å§‹ç‚¹å’Œç»“æŸç‚¹æ°å¥½åœ¨èŠ‚ç‚¹çš„è¾¹ç•Œä½ç½®çš„æƒ…å†µ</strong>ï¼Œå¦‚æœèµ·å§‹ç‚¹å’Œç»“æŸç‚¹åœ¨åˆ†å‰²èŠ‚ç‚¹çš„ä½ç½®ï¼Œè¿˜æ˜¯ä½¿ç”¨<code>setStart/End</code> æ›´ç²¾ç»†</li></ul></li></ol><ol type="1" id="fcae8d49-82cd-419d-a3dd-cd21f4458fc7" class="numbered-list" start="3"><li><strong>è®¾ç½®å†…å®¹ï¼š</strong>å‰é¢ä¸¤å¥—æ–¹å¼éƒ½æ˜¯é€šè¿‡<strong>è®¾ç½®è¾¹ç•Œ</strong>æ¥ç¡®å®šï¼Œå¦‚æœç›¸å¯¹äºè¾¹ç•Œï¼Œé€‰æ‹©å†…å®¹å†…çš„èŠ‚ç‚¹æ›´å¥½ç¡®å®šï¼Œé‚£ç›´æ¥è®¾ç½®é€‰æ‹©å†…å®¹çš„èŠ‚ç‚¹æ˜¯ä¸€ä¸ªæ›´å¥½çš„æ–¹æ¡ˆï¼›ä¸è¿‡æƒ…å†µä¹Ÿåˆ†ä¸ºä¸¤ç§<ul id="514e1042-7ce8-43cd-94dc-7cfe352437ea" class="bulleted-list"><li style="list-style-type:disc"><strong>è®¾ç½®çš„å†…å®¹å°±æ˜¯èŠ‚ç‚¹æœ¬èº«</strong>ï¼Œå³èŒƒå›´çš„èµ·å§‹ç‚¹å’Œç»“æŸç‚¹å°±æ˜¯èŠ‚ç‚¹çš„è¾¹ç•Œï¼Œé‚£ä¹ˆ<code>selectNode(refNode)</code> å°±å®ç°äº†è¿™ä¸ªæ–¹æ¡ˆï¼Œå…¶ä¸­èµ·ç‚¹å’Œç»“æŸç‚¹çš„å®¹å™¨å°±æ˜¯<code>refNode</code> çš„çˆ¶èŠ‚ç‚¹</li></ul><ul id="65355ede-7825-4baf-b6f1-b9a6e5c42e7f" class="bulleted-list"><li style="list-style-type:disc"><strong>è®¾ç½®çš„å†…å®¹æ˜¯èŠ‚ç‚¹çš„å†…å®¹</strong>ï¼Œå³èŠ‚ç‚¹æ ‡ç­¾ä¸åŒ…æ‹¬åœ¨é€‰æ‹©å†…å®¹ä¸­ï¼Œä½¿ç”¨<code>selectNodeContents(refNode)</code> ï¼›èŒƒå›´çš„èµ·å§‹ç‚¹æ˜¯èŠ‚ç‚¹å¼€å§‹æ ‡ç­¾çš„ç»“æŸå¤„ï¼ŒèŒƒå›´çš„ç»“æŸç‚¹å°±æ˜¯èŠ‚ç‚¹ç»“æŸæ ‡ç­¾çš„å¼€å§‹å¤„ï¼Œèµ·ç‚¹å’Œç»“æŸç‚¹çš„å°±æ˜¯<code>refNode</code> ï¼Œè¿™ç§æƒ…å†µä¸‹<code>startOffset</code> é€šå¸¸æ˜¯0</li></ul></li></ol><ol type="1" id="81cf3d5d-603c-45ce-8504-473d9caea29b" class="numbered-list" start="4"><li><strong>ç‰¹æ®Šæƒ…å†µ</strong>ï¼šä¸€æ ·çš„ï¼Œé€‰æ‹©å†…å®¹çš„ç‰¹æ®Šæƒ…å†µå°±æ˜¯èµ·å§‹ç‚¹å’Œç»“æŸç‚¹é‡åˆï¼Œä¸ºæ­¤éœ€è¦ä¸€ä¸ªæ–¹æ³•è®¾ç½®<code>collapsed</code> å±æ€§å€¼ï¼Œä¸€èˆ¬è€Œè¨€ï¼Œå°†é€‰æ‹©å†…å®¹è¿›è¡Œ<strong>æŠ˜å </strong>åº”è¯¥æ˜¯ä¸å¯é€†çš„ï¼Œæ‰€ä»¥<code>Range</code> å®šä¹‰äº†ä¸€ä¸ª<code>collapse([toStart])</code> æ–¹æ³•ï¼Œå…¶ä¸­<code>toStart</code> æ˜¯å¸ƒå°”å€¼å‚æ•°ï¼Œç”¨äºç¡®å®šæŠ˜å åä½ç½®æ˜¯åœ¨èµ·å§‹ç‚¹è¿˜æ˜¯ç»“æŸç‚¹</li></ol></li></ul><h3 id="31b95cdb-13af-4ee2-8153-cc3501b15d47" class="">4.1.0.4 æ“ä½œèŒƒå›´å’Œé€‰æ‹©å†…å®¹</h3><ul id="2a5c0db1-32d6-4b01-aab6-1e52ef8679bc" class="bulleted-list"><li style="list-style-type:disc">å®šä¹‰å¥½èŒƒå›´çš„é€‰æ‹©å†…å®¹å’Œç¡®å®šé€‰æ‹©å†…å®¹çš„æ–¹æ³•åï¼Œå°±å¯ä»¥å¯¹èŒƒå›´çš„é€‰æ‹©å†…å®¹è¿›è¡Œæ“ä½œäº†ï¼Œå› ä¸º<code>Range</code>å°±æ˜¯åœ¨å¸¸è§„DOMæ“ä½œçš„ç²’åº¦ä¸å¤Ÿæ—¶å‘æŒ¥ä½œç”¨çš„æ¥å£</li></ul><ul id="b02efdba-54b3-41dc-9f1b-09e8b119c4a0" class="bulleted-list"><li style="list-style-type:disc">å’ŒèŠ‚ç‚¹ç±»ä¼¼ï¼Œæ“ä½œèŒƒå›´åº”è¯¥ä¹Ÿæœ‰å¢åŠ ï¼Œåˆ é™¤ï¼Œä¿®æ”¹ï¼Œå¤åˆ¶ç­‰åŠŸèƒ½<ol type="1" id="e9070dde-f44a-4cd0-bccf-6f5abdd691ef" class="numbered-list" start="1"><li>å¢åŠ ï¼šèŒƒå›´å¢åŠ çš„ä½ç½®è¦ä¹ˆæ˜¯èµ·å§‹ç‚¹åï¼Œè¦ä¹ˆæ˜¯ç»“æŸç‚¹å‰ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªä½ç½®æ˜¯èŒƒå›´æ˜ç¡®çš„ï¼Œ<code>insertNode(node)</code> ç”¨äºåœ¨èŒƒå›´èµ·å§‹ç‚¹åå¢åŠ èŠ‚ç‚¹</li></ol><ol type="1" id="e459fc32-28fc-4014-88ed-be2c45f985f2" class="numbered-list" start="2"><li>åˆ é™¤ï¼šåˆ é™¤åº”è¯¥æ˜¯å¯¹DOMæ–‡æ¡£è¿›è¡Œçš„æ“ä½œï¼Œæ‰€ä»¥åˆ é™¤çš„åº”è¯¥æ˜¯èŒƒå›´ä¸­çš„å†…å®¹ï¼Œè€ŒéèŒƒå›´æœ¬èº«ï¼Œåˆ é™¤åèŒƒå›´åº”è¯¥ä»ç„¶å­˜åœ¨ï¼Œåªæ˜¯å®ƒçš„çŠ¶æ€åº”è¯¥å°±æ˜¯è¢«æŠ˜å ï¼ˆ<code>collapsed</code> ï¼‰çš„çŠ¶æ€ï¼Œå¹¶ä¸”æŠ˜å åçš„ä½ç½®åº”è¯¥æ˜¯åœ¨èµ·å§‹ç‚¹<ul id="9d1ca60a-a55a-4924-8c9c-1d5e2c51e230" class="bulleted-list"><li style="list-style-type:disc"><code>Range</code> å®šä¹‰äº†ä¸¤ç§åˆ é™¤ï¼Œä¸€ç§æ˜¯ç›´æ¥ä»DOMç»“æ„ç§»é™¤é€‰æ‹©å†…å®¹ï¼Œå³<code>deleteRangeContents()</code> </li></ul><ul id="d7dd6e0b-b004-42a5-b1af-117e16f4b060" class="bulleted-list"><li style="list-style-type:disc">è¿˜æœ‰ä¸€ç§ä¼šè¿”å›ä»DOMç»“æ„ç§»é™¤çš„é€‰æ‹©å†…å®¹ï¼Œè¿”å›çš„èŒƒå›´å†…å®¹ä½¿ç”¨<code>DocumentFragment</code> åŒ…è£…ï¼Œå³<code>extractContents()</code></li></ul></li></ol><ol type="1" id="982604fb-1502-4db8-84ef-f192268d1d85" class="numbered-list" start="3"><li>ä¿®æ”¹ï¼šå¯¹èŒƒå›´ä¸­çš„èŠ‚ç‚¹è€Œè¨€ï¼Œä¸éœ€è¦é¢å¤–æ·»åŠ å¾ˆå¤šæ–¹æ³•æ¥ä¿®æ”¹ï¼Œå› ä¸ºå¦‚æœè¦ä¿®æ”¹èŠ‚ç‚¹ç›´æ¥ä½¿ç”¨èŠ‚ç‚¹çš„APIå³å¯ï¼Œæ‰€ä»¥æ›´å¤šçš„æ˜¯å¯¹é€‰æ‹©èŒƒå›´çš„ä¸€ç§æ•´ä½“ä¿®æ”¹ï¼Œ<code>surroundContents(newParent)</code> ç”¨äºåœ¨å†…å®¹å¤–åŒ…è£¹ä¸€ä¸ªæ–°èŠ‚ç‚¹ï¼Œè¿™ä¸ªæ–°èŠ‚ç‚¹å¯ä»¥ä½œç”¨äºèŒƒå›´å†…å®¹ï¼ˆä¾‹å¦‚åŒ…è£¹ä¸€å±‚ä¿®æ”¹æ ·å¼çš„èŠ‚ç‚¹ï¼‰</li></ol><ol type="1" id="530d0a7a-a822-4e7b-91be-3163092dd5fa" class="numbered-list" start="4"><li>å¤åˆ¶ï¼šå¤åˆ¶ä¹Ÿå°±æ˜¯å…‹éš†ï¼Œåˆ†ä¸ºä¸¤ç§<ul id="3e9e6ecf-5198-48b4-9de3-90deb135255d" class="bulleted-list"><li style="list-style-type:disc">ä¸€ç§æ˜¯å¯¹èŒƒå›´é€‰æ‹©çš„å†…å®¹ï¼ˆDOMç»“æ„ï¼‰è¿›è¡Œçš„å¤åˆ¶ï¼Œå®šä¹‰äº†<code>cloneContents()</code> æ–¹æ³•ï¼Œå®ƒä¼šè¿”å›åŒ…å«é€‰æ‹©çš„å†…å®¹çš„<code>DocumentFragment</code> èŠ‚ç‚¹å¯¹è±¡</li></ul><ul id="e0c3f72b-aabd-4949-a1de-9659f42b6de6" class="bulleted-list"><li style="list-style-type:disc">ä¸€ç§æ˜¯å¯¹èŒƒå›´å¯¹è±¡æœ¬èº«çš„å¤åˆ¶ï¼Œå®šä¹‰äº†<code>cloneRange()</code> æ–¹æ³•ï¼Œå®ƒä¼šå¤åˆ¶ä¸€ä¸ªå®¹å™¨ï¼Œåç§»é‡éƒ½ç›¸åŒçš„æ–°èŒƒå›´å¯¹è±¡ï¼ŒäºŒè€…ç›¸äº’ç‹¬ç«‹</li></ul></li></ol></li></ul><h3 id="052188cc-45da-4c18-b70a-e328f5d1cd40" class="">4.1.0.5 èŒƒå›´çš„å…³ç³»</h3><ul id="98415ae6-1b5d-4c2a-a954-141c32e80cf3" class="bulleted-list"><li style="list-style-type:disc">èŒƒå›´ä¹‹é—´ï¼ŒèŒƒå›´çš„é€‰æ‹©å†…å®¹ä¸DOMèŠ‚ç‚¹ä¹‹é—´ï¼Œä»¥åŠä½ç½®ä¸èŒƒå›´é€‰æ‹©çš„å†…å®¹ä¹‹é—´éƒ½ä¼šæœ‰ä½ç½®ç›¸å…³çš„</li></ul><ul id="ff7c8e13-eb6b-4aaf-8f8f-4d76cf4f5701" class="bulleted-list"><li style="list-style-type:disc">è¿™ä¸ªéƒ¨åˆ†å¯ä»¥ç›´æ¥æŸ¥çœ‹<a href="4%20%E8%8C%83%E5%9B%B4.html">ä¸Šé¢çš„æ–¹æ³•ä»‹ç»</a></li></ul><h1 id="9a30abbe-2cea-4664-ba6d-69ad838bef3e" class="">4.2 ç®€å•é€‰æ‹©ï¼ˆSimple Selection in DOM Rangesï¼‰</h1><ul id="60f95ab1-d65c-414d-874d-2bad4a721434" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨<a href="4%20%E8%8C%83%E5%9B%B4.html"><code>selectNode(node)</code></a> å’Œ<a href="4%20%E8%8C%83%E5%9B%B4.html"><code>selectNodeContents(node)</code></a> æ–¹æ³•<ul id="3afaa96c-b574-474a-a013-b52b37ca325a" class="bulleted-list"><li style="list-style-type:circle">è¿™ä¸¤ä¸ªæ–¹æ³•éƒ½æ¥æ”¶ä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºå‚æ•°ï¼Œå¹¶å°†æ”¹èŠ‚ç‚¹çš„ä¿¡æ¯æ·»åŠ åˆ°è°ƒç”¨å®ƒçš„èŒƒå›´</li></ul><ul id="560a851a-b1f9-4a91-af58-497a3d5edbdf" class="bulleted-list"><li style="list-style-type:circle">åŒºåˆ«åœ¨äºå‰è€…é€‰æ‹©æ•´ä¸ªèŠ‚ç‚¹ï¼Œä½œä¸ºèŒƒå›´çš„é€‰æ‹©å†…å®¹ï¼Œåè€…åªé€‰æ‹©èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹ä½œä¸ºè®¿é—®çš„é€‰æ‹©å†…å®¹</li></ul></li></ul><ul id="e1f3b20b-0bc7-447a-ab76-0b1687a30947" class="bulleted-list"><li style="list-style-type:disc">ä¸€ä¸ªå±•ç¤ºåŒºåˆ«çš„ä¾‹å­<pre id="2f3b6d6c-fdfd-49e8-a341-b59aab969e42" class="code code-wrap"><code>&lt;body&gt;
  &lt;p&gt;&lt;b&gt;Hello&lt;/b&gt; world!&lt;/p&gt;
  &lt;script&gt;
    const range1 = document.createRange();
    const range2 = document.createRange();
    const p = document.querySelector(&quot;p&quot;);
    range1.selectNode(p);
    range2.selectNodeContents(p);
    console.log(range1);
    console.log(range2);
  &lt;/script&gt;
&lt;/body&gt;</code></pre><figure id="bcd16604-0d62-4688-8bd2-ba2aaafa0976" class="image"><a href="4%20%E8%8C%83%E5%9B%B4/range_selectNode_selectNodeContents.png"><img style="width:553px" src="4%20%E8%8C%83%E5%9B%B4/range_selectNode_selectNodeContents.png"/></a></figure><ul id="3526855e-3a60-4593-a1f2-9cb52606088b" class="bulleted-list"><li style="list-style-type:circle"><code>range1</code> è°ƒç”¨<code>selectNode</code> å°†æ•´ä¸ª<code>p</code> èŠ‚ç‚¹åŠ å…¥é€‰æ‹©å†…å®¹ä¸­ï¼Œå¼€å§‹ç‚¹å’Œç»“æŸç‚¹å°±æ˜¯<code>p</code> çš„è¾¹ç•Œï¼Œå®ƒä»¬çš„çˆ¶èŠ‚ç‚¹éƒ½æ˜¯&lt;body&gt;æ‰€ä»¥<code>start/endContainer</code> å°±æ˜¯<code>body</code> ï¼Œè€ƒè™‘åˆ°æ ‡ç­¾é—´çš„ç©ºç™½æ–‡æœ¬èŠ‚ç‚¹ï¼Œ<code>startOffset</code> ä¸º1æŒ‡çš„å°±æ˜¯<code>body</code> çš„<code>p</code> èŠ‚ç‚¹ï¼Œ<code>endOffset</code> ä¸º2æŒ‡çš„å°±æ˜¯<code>body</code> çš„ç¬¬äºŒä¸ªç©ºç™½æ–‡æœ¬å­èŠ‚ç‚¹ï¼Œå®ƒä»¬ä¸¤ä¸ªçš„å¼€å§‹è¾¹ç•Œä¹‹é—´æ­£å¥½å°±æ˜¯é€‰æ‹©å†…å®¹</li></ul><ul id="463bbbfd-2099-4e33-a1e5-910c87f80072" class="bulleted-list"><li style="list-style-type:circle"><code>range2</code> è°ƒç”¨<code>selectNodeContents</code> å°†<code>p</code> èŠ‚ç‚¹çš„æ‰€æœ‰å­èŠ‚ç‚¹åŠ å…¥åˆ°é€‰æ‹©å†…å®¹ä¸­ï¼Œå¼€å§‹ç‚¹æ˜¯<code>p</code> çš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹çš„å¼€å§‹è¾¹ç•Œï¼Œç»“æŸç‚¹æ˜¯<code>p</code> çš„æœ€åä¸€ä¸ªå­èŠ‚ç‚¹çš„ç»“æŸè¾¹ç•Œï¼Œæ‰€ä»¥å¼€å§‹å’Œç»“æŸç‚¹æ‰€åœ¨å®¹å™¨å°±æ˜¯å°±æ˜¯<code>p</code> ï¼›<code>startOffset</code> ä¸º0æŒ‡çš„å°±æ˜¯<code>p</code> çš„ç¬¬ä¸€ä¸ªèŠ‚ç‚¹ï¼Œå¼€å§‹ç‚¹å°±æ˜¯ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„å¼€å§‹è¾¹ç•Œï¼Œ<code>endOffset</code> ä¸º2æŒ‡çš„å°±æ˜¯<code>p</code> çš„ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œä¸å­˜åœ¨ç¬¬ä¸‰ä¸ªèŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯ç¬¬äºŒä¸ªèŠ‚ç‚¹çš„ç»“æŸè¾¹ç•Œ</li></ul><ul id="1307b378-94d9-4899-ae40-2bdc8d9d59fe" class="bulleted-list"><li style="list-style-type:circle">ä½¿ç”¨å›¾ç¤ºçš„æ–¹å¼å½¢è±¡æ˜¾ç¤ºèŒƒå›´å¦‚ä¸‹<figure id="1ae0eb26-c6f6-47cc-b181-5679c8c4ce79" class="image"><a href="4%20%E8%8C%83%E5%9B%B4/range.selectNode_selectNodeContents.png"><img style="width:720px" src="4%20%E8%8C%83%E5%9B%B4/range.selectNode_selectNodeContents.png"/></a></figure></li></ul></li></ul><ul id="36653244-0015-4f1c-a2da-795b6cac5b94" class="bulleted-list"><li style="list-style-type:disc">åœ¨å‘ä¸Šé¢è¿™æ ·é€‰å®šèŠ‚ç‚¹æˆ–èŠ‚ç‚¹åä»£åï¼Œè¿˜å¯ä»¥åœ¨èŒƒå›´ä¸Šè°ƒç”¨ç›¸åº”çš„æ–¹æ³•ï¼Œå®ç°å¯¹èŒƒå›´ä¸­é€‰åŒºçš„æ›´ç²¾ç»†æ§åˆ¶ï¼š<ul id="a64a5405-7a24-41c8-9783-2226af136192" class="bulleted-list"><li style="list-style-type:circle"><code>setStartBefore(refNode)</code> ï¼ŒæŠŠèŒƒå›´çš„èµ·ç‚¹è®¾ç½®åˆ°<code>refNode</code> ä¹‹å‰ï¼Œä»è€Œè®©<code>refNode</code> ç§°ä¸ºé€‰åŒºçš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚<code>startContainer</code> å±æ€§è¢«è®¾ç½®æˆ<code>refNode.parentNode</code> ï¼Œè€Œ<code>startOffset</code> å±æ€§è¢«è®¾ç½®æˆ<code>refNode</code> åœ¨å…¶çˆ¶èŠ‚ç‚¹<code>childNodes</code> é›†åˆä¸­çš„ç´¢å¼•</li></ul><ul id="870ae401-6a97-4dd2-a623-ed3071c776c3" class="bulleted-list"><li style="list-style-type:circle"><code>setStartAfter(refNode)</code> ï¼ŒæŠŠèŒƒå›´çš„èµ·ç‚¹è®¾ç½®åˆ°<code>refNode</code> ä¹‹åï¼Œä»è€Œè®©<code>refNode</code> æ’é™¤åœ¨é€‰åŒºä¹‹å¤–ï¼Œè®©å…¶ä¸‹ä¸€ä¸ªåŒèƒèŠ‚ç‚¹æˆä¸ºé€‰åŒºçš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚<code>startContainer</code> å±æ€§è¢«è®¾ç½®æˆ<code>refNode.parentNode</code> ï¼Œè€Œ<code>startOffset</code> å±æ€§è¢«è®¾ç½®æˆ<code>refNode</code> åœ¨å…¶çˆ¶èŠ‚ç‚¹<code>childNodes</code> é›†åˆä¸­çš„ç´¢å¼•åŠ 1</li></ul><ul id="42120167-3116-4b52-9ec0-e1ae8a6a5760" class="bulleted-list"><li style="list-style-type:circle"><code>setEndBefore(refNode)</code> ï¼ŒæŠŠèŒƒå›´çš„ç»ˆç‚¹è®¾ç½®åˆ°<code>refNode</code> ä¹‹å‰ï¼Œä»è€Œè®©<code>refNode</code> æ’é™¤åœ¨é€‰åŒºä¹‹å¤–ï¼Œè®©å…¶ä¸Šä¸€ä¸ªåŒèƒèŠ‚ç‚¹æˆä¸ºé€‰åŒºçš„æœ€åä¸€ä¸ªå­èŠ‚ç‚¹ã€‚<code>endContainer</code> å±æ€§è¢«è®¾ç½®æˆ<code>refNode.parentNode</code> ï¼Œè€Œ<code>endOffset</code> å±æ€§è¢«è®¾ç½®æˆ<code>refNode</code> åœ¨å…¶çˆ¶èŠ‚ç‚¹<code>childNodes</code> é›†åˆä¸­çš„ç´¢å¼•</li></ul><ul id="a00afcda-4837-4fd2-9b38-bb77f767b903" class="bulleted-list"><li style="list-style-type:circle"><code>setEndAfter(refNode)</code> ï¼ŒæŠŠèŒƒå›´çš„ç»ˆç‚¹è®¾ç½®åˆ°<code>refNode</code> ä¹‹åï¼Œä»è€Œè®©<code>refNode</code> ç§°ä¸ºé€‰åŒºçš„ç¬¬ä¸€ä¸ªå­èŠ‚ç‚¹ã€‚<code>endContainer</code> å±æ€§è¢«è®¾ç½®æˆ<code>refNode.parentNode</code> ï¼Œè€Œ<code>endOffset</code> å±æ€§è¢«è®¾ç½®æˆ<code>refNode</code> åœ¨å…¶çˆ¶èŠ‚ç‚¹<code>childNodes</code> é›†åˆä¸­çš„ç´¢å¼•åŠ 1</li></ul><hr id="e7270706-74dc-4401-a6e7-e450a1ad96c6"/><ul id="dba6914a-0b52-45dc-9da8-fb57ee6e7648" class="bulleted-list"><li style="list-style-type:circle">è°ƒç”¨ä¸Šé¢çš„æ–¹æ³•ï¼Œæ‰€æœ‰å±æ€§éƒ½ä¼šè‡ªåŠ¨é‡å†™èµ‹å€¼</li></ul></li></ul><h1 id="a7ca2718-6756-46b9-81f7-0c5b0697d9c8" class="">4.3 å¤æ‚é€‰æ‹©ï¼ˆComplex Selection in DOM Rangesï¼‰</h1><ul id="a61f2279-45ea-417b-afd1-a1404e4efa69" class="bulleted-list"><li style="list-style-type:disc">ä¸ºäº†å®ç°å¤æ‚çš„é€‰åŒºï¼Œå¯ä»¥é€šè¿‡<code>setStart/End</code> æ–¹æ³•ç›´æ¥è®¾ç½®å®¹å™¨èŠ‚ç‚¹å’Œåç§»é‡<ul id="016095d4-f62c-488f-a36c-9707900b3928" class="bulleted-list"><li style="list-style-type:circle">å®¹å™¨å°±èŠ‚ç‚¹ä¼šæˆä¸º<code>start/endContainer</code></li></ul><ul id="1b7a6139-ccc5-488b-9e7f-532d4d46e882" class="bulleted-list"><li style="list-style-type:circle">åç§»é‡ä¼šæˆä¸º<code>start/endOffset</code> </li></ul></li></ul><ul id="e9d24fa8-9fba-4514-8f02-00339c6fe27b" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨è¿™ä¸¤ä¸ªæ–¹æ³•æ¨¡æ‹Ÿä¸Šé¢ä½¿ç”¨<code>selectNode[Contents]</code> æ–¹æ³•çš„ä¾‹å­<pre id="15fabd60-634a-46a4-8d05-0aa914363c21" class="code code-wrap"><code>&lt;body&gt;
  &lt;p&gt;&lt;b&gt;Hello&lt;/b&gt; world!&lt;/p&gt;
  &lt;script&gt;
    const range1 = document.createRange();
    const range2 = document.createRange();
    const p = document.querySelector(&quot;p&quot;);
    range1.setStart(document.body, 1);
    range1.setEnd(document.body, 2);
    range2.setStart(p, 0);
    range2.setEnd(p, p.childNodes.length);
    console.log(range1);
    console.log(range2);
  &lt;/script&gt;
&lt;/body&gt;</code></pre><ul id="0f2bdee7-efe4-40c7-a3ec-876401e27972" class="bulleted-list"><li style="list-style-type:circle">åœ¨<a href="4%20%E8%8C%83%E5%9B%B4.html">åŒæ ·çš„ä¾‹å­</a>ä¸­å·²ç»åˆ†æè¿‡å®¹å™¨èŠ‚ç‚¹å’Œåç§»é‡äº†ï¼Œæ‰€ä»¥å¯ä»¥ç›´æ¥èµ‹å€¼ï¼Œæ‰“å°ç»“æœæ˜¯ä¸€æ ·çš„</li></ul></li></ul><ul id="0d772d54-d76a-493b-9f12-38fd9f6edda2" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœæƒ³è¦é€‰æ‹©æ–‡æœ¬èŠ‚ç‚¹çš„ä¸€éƒ¨åˆ†ï¼Œä¾‹å¦‚é€‰æ‹©â€llo&lt;/b&gt; woâ€œ,åˆ™éœ€è¦é‡æ–°ç¡®å®šèµ·å§‹ç‚¹çš„å®¹å™¨å’Œåç§»é‡ï¼Œå¦‚ä¸‹<pre id="618acb11-a366-45f3-97f3-8fe515bace44" class="code code-wrap"><code>&lt;body&gt;
  &lt;p&gt;&lt;b&gt;Hello&lt;/b&gt; world!&lt;/p&gt;
  &lt;script&gt;
    const range = document.createRange();
    const p = document.querySelector(&quot;p&quot;);
    range.setStart(p.firstElementChild.firstChild, 2);
    range.setEnd(p.lastChild, 3);
    console.log(range, range.toString());
  &lt;/script&gt;
&lt;/body&gt;</code></pre><ul id="4e7b37f9-26d7-478a-98a3-fb7f5a01d845" class="bulleted-list"><li style="list-style-type:circle"><code><strong>p.firstElementChild.firstChild</strong></code><strong> </strong>å°±æ˜¯&lt;b&gt;å…ƒç´ ä¸‹çš„æ–‡æœ¬èŠ‚ç‚¹ï¼Œè¦é€‰æ‹©è¿™ä¸ªæ–‡æœ¬èŠ‚ç‚¹çš„â€lloâ€éƒ¨åˆ†ï¼Œåç§»é‡åº”è¯¥æ˜¯å‰é¢å­—ç¬¦ä¸²çš„ä¸ªæ•°ï¼Œå³2</li></ul><ul id="25617d63-13cc-400e-9946-ea1312fcb29b" class="bulleted-list"><li style="list-style-type:circle"><code><strong>p.lastChild</strong></code><strong> </strong>å°±æ˜¯<code>p</code>çš„æœ€åä¸€ä¸ªæ–‡æœ¬å­èŠ‚ç‚¹ï¼Œè¦é€‰æ‹©â€ world!â€ä¸­çš„â€ woâ€éƒ¨åˆ†ï¼Œåç§»é‡åº”è¯¥æ˜¯é€‰æ‹©éƒ¨åˆ†çš„æ•°é‡ï¼Œå³3</li></ul><ul id="5b912b90-9ebf-4c7e-aa6c-56978db5bb15" class="bulleted-list"><li style="list-style-type:circle"><code>commonAncestorContainer</code> ä¼šè¢«èµ‹å€¼ä¸º<code>p</code> ï¼Œå³ä¸¤ä¸ªæ–‡æœ¬èŠ‚ç‚¹çš„æœ€è¿‘å…¬å…±ç¥–å…ˆèŠ‚ç‚¹</li></ul><ul id="b029d2c9-5079-4237-850c-92c119966629" class="bulleted-list"><li style="list-style-type:circle">ä¸Šé¢çš„èŒƒå›´é€‰æ‹©å†…å®¹å½¢è±¡å›¾å¦‚ä¸‹<figure id="c7bc41a4-396a-4d93-901a-cfbf4f533a71" class="image"><a href="4%20%E8%8C%83%E5%9B%B4/range.setStart_End.png"><img style="width:900px" src="4%20%E8%8C%83%E5%9B%B4/range.setStart_End.png"/></a></figure></li></ul></li></ul><h1 id="2d70870a-2a35-41b3-8e9a-b80073843899" class="">4.4 æ“ä½œèŒƒå›´ï¼ˆInteracting with DOM Range Contentï¼‰</h1><ul id="f99bccf6-0c28-4e5b-a817-28775789d890" class="bulleted-list"><li style="list-style-type:disc">åˆ›å»ºèŒƒå›´ä¹‹åï¼Œæµè§ˆå™¨ä¼š<strong>åœ¨å†…éƒ¨åˆ›å»ºä¸€ä¸ªæ–‡æ¡£ç‰‡æ®µèŠ‚ç‚¹</strong>ï¼Œç”¨äºåŒ…å«èŒƒå›´é€‰åŒºä¸­çš„èŠ‚ç‚¹ï¼Œä¸ºäº†æ“ä½œèŒƒå›´ä¸­çš„å†…å®¹<ul id="549b0bdf-f956-4dad-986a-415949289ed3" class="bulleted-list"><li style="list-style-type:circle">é€‰åŒºä¸­å†…å®¹å¿…é¡»æ ¼å¼è‰¯å¥½ï¼Œæ‰€è°“çš„æ ¼å¼è‰¯å¥½å°±æ˜¯HTMLä¸­çš„æ ‡ç­¾æˆå¯¹æˆ–æ˜¯å•ç‹¬çš„æ ‡ç­¾</li></ul><ul id="95050da5-c32a-4860-baa5-c7b494570b32" class="bulleted-list"><li style="list-style-type:circle"><a href="4%20%E8%8C%83%E5%9B%B4.html">ä¸Šé¢çš„ä¾‹å­</a>å¹¶ä¸æ˜¯å®Œå¥½çš„DOMç»“æ„ï¼ˆâ€llo&lt;/b&gt; woâ€œï¼‰ï¼Œæ— æ³•åœ¨DOMä¸­è¡¨ç¤º</li></ul><ul id="739b1e75-9f8a-4395-ab92-fe19966442fd" class="bulleted-list"><li style="list-style-type:circle">ä½†æ˜¯<strong>èŒƒå›´èƒ½å¤Ÿç¡®å®šç¼ºå¤±çš„å¼€å§‹å’Œç»“æŸæ ‡ç­¾</strong>ï¼Œä»è€Œå¯ä»¥é‡æ„å‡ºæœ‰æ•ˆçš„DOMç»“æ„</li></ul></li></ul><ul id="762d87db-7572-403c-9f93-ff85cbee320d" class="bulleted-list"><li style="list-style-type:disc">ä»ç„¶ä»¥ä¸Šé¢çš„ä¾‹å­æ¥è¯´ï¼ŒèŒƒå›´ä¸­å‘ç°é€‰åŒºä¸­å°‘ä¸€ä¸ªå¼€å§‹çš„&lt;b&gt;æ ‡ç­¾ï¼Œäºæ˜¯ä¼šåœ¨åå°åŠ¨æ€è¡¥ä¸Šè¿™ä¸ªæ ‡ç­¾ï¼ŒåŒæ—¶è¿˜è¦è¡¥ä¸Šå°é—­çš„â€Heâ€çš„ç»“æŸæ ‡ç­¾&lt;/b&gt;ï¼Œç»“æœä¼šæŠŠDOMä¿®æ”¹æˆå¦‚ä¸‹çš„æ ·å­<pre id="fce7387c-cdd2-4d40-ba37-e8b3f0f8add0" class="code code-wrap"><code>&lt;p&gt;&lt;b&gt;He&lt;/b&gt;&lt;b&gt;llo&lt;/b&gt; world!&lt;/p&gt;</code></pre><ul id="6db93ff6-003c-49f9-a5ea-a5735aa19067" class="bulleted-list"><li style="list-style-type:circle">è¿™æ ·<code>Hello</code> è¿™ä¸ªæ–‡æœ¬èŠ‚ç‚¹å°±ä¼šè¢«æ‹†åˆ†æˆä¸¤ä¸ªæ–‡æœ¬èŠ‚ç‚¹</li></ul><ul id="30ea1652-f3d8-4756-aef4-0d57f3e484ea" class="bulleted-list"><li style="list-style-type:circle">æœ€ç»ˆçš„DOMæ ‘å’Œå¯¹åº”çš„èŒƒå›´å¦‚ä¸‹<figure id="f13155ef-b480-4b3c-83fd-7c5145330eed" class="image"><a href="4%20%E8%8C%83%E5%9B%B4/Document_and_Range.png"><img style="width:1639px" src="4%20%E8%8C%83%E5%9B%B4/Document_and_Range.png"/></a></figure></li></ul></li></ul><ul id="c5aa64fe-4913-4a69-a168-345a10c99c72" class="bulleted-list"><li style="list-style-type:disc">çŸ¥é“äº†èŒƒå›´å†…çš„DOMç»“æ„ä¹‹åï¼Œå°±å¯ä»¥ä½¿ç”¨å¾ˆå¤šæ–¹æ³•æ¥æ“ä½œèŒƒå›´çš„å†…å®¹äº†</li></ul><h2 id="8ab4d410-5a73-4664-b634-5a0f82692b34" class="">4.4.1 <code>deleteContents()</code></h2><ul id="9e115cdb-59ac-485b-b668-f6798baa1f75" class="bulleted-list"><li style="list-style-type:disc">å®¹æ˜“ç†è§£å’Œä½¿ç”¨çš„æ–¹æ³•ï¼Œä»æ–‡æ¡£ä¸­åˆ é™¤èŒƒå›´åŒ…å«çš„èŠ‚ç‚¹</li></ul><ul id="742ec25e-33a5-4f15-a3c5-09605a86397f" class="bulleted-list"><li style="list-style-type:disc">æ­£å¥½å¯ä»¥ç”¨è¿™ä¸ªæ–¹æ³•æµ‹è¯•<a href="4%20%E8%8C%83%E5%9B%B4.html">ä½†æ˜¯èŒƒå›´èƒ½å¤Ÿç¡®å®šç¼ºå¤±çš„å¼€å§‹å’Œç»“æŸæ ‡ç­¾ï¼Œä»è€Œå¯ä»¥é‡æ„å‡ºæœ‰æ•ˆçš„DOMç»“æ„</a> <pre id="11e53873-bdf9-48ef-a81d-3fc60f6442d0" class="code code-wrap"><code>&lt;body&gt;
  &lt;p&gt;&lt;b&gt;Hello&lt;/b&gt; world!&lt;/p&gt;
  &lt;script&gt;
    const range = document.createRange();
    const p = document.querySelector(&quot;p&quot;);
    range.setStart(p.firstElementChild.firstChild, 2);
    range.setEnd(p.lastChild, 3);
    console.log(range, range.toString());
    range.deleteContents();
  &lt;/script&gt;
&lt;/body&gt;</code></pre><figure id="ca44cf94-93e8-45cf-b128-8e75d9438c9d" class="image"><a href="4%20%E8%8C%83%E5%9B%B4/deleteContents.png"><img style="width:227px" src="4%20%E8%8C%83%E5%9B%B4/deleteContents.png"/></a></figure></li></ul><h2 id="2fa2bed1-715b-42ef-8c32-0c4580f003cc" class="">4.4.2 <code>extractContents()</code> </h2><ul id="7276217e-ebc2-4919-85d6-605a453578d1" class="bulleted-list"><li style="list-style-type:disc">å’Œ<code>deleteContents()</code> ç±»ä¼¼ï¼Œä¹Ÿä¼šä»æ–‡æ¡£ä¸­ç§»é™¤èŒƒå›´ä¸­é€‰æ‹©çš„å†…å®¹ï¼Œä½†æ˜¯ä¼šå°†èŒƒå›´é€‰æ‹©çš„å†…å®¹è¿”å›å¯¹åº”çš„æ–‡æ¡£ç‰‡æ®µ<ul id="6b958c55-8e37-47ac-828f-2a54b5fee3e4" class="bulleted-list"><li style="list-style-type:circle">è¿™æ ·å°±å¯ä»¥æŠŠèŒƒå›´ä¸­çš„å†…å®¹æ’å…¥åˆ°æ–‡æ¡£ä¸­çš„å…¶å®ƒåœ°æ–¹</li></ul><ul id="cdd29970-c551-41e3-b15f-e0b52b53a134" class="bulleted-list"><li style="list-style-type:circle">ä½¿ç”¨åèŒƒå›´çš„èµ·å§‹ç‚¹å’Œç»“æŸç‚¹å°±ä¼šé‡åˆåˆ°æ–°èµ·å§‹ç‚¹çš„ä½ç½®ï¼ˆå³é‡å ï¼‰</li></ul></li></ul><ul id="8dee71e8-f835-4703-9755-787287af3cc7" class="bulleted-list"><li style="list-style-type:disc">ä¸€ä¸ªä¾‹å­<pre id="821cf66f-13de-4bb2-9e86-279ed3724399" class="code code-wrap"><code>&lt;body&gt;
  &lt;p&gt;&lt;b&gt;Hello&lt;/b&gt; world!&lt;/p&gt;
  &lt;script&gt;
    const range = document.createRange();
    const p = document.querySelector(&quot;p&quot;);
    range.setStart(p.firstElementChild.firstChild, 2);
    range.setEnd(p.lastChild, 3);
    const rangeContents = range.extractContents();
    console.log(range, range.toString());
    document.body.appendChild(rangeContents);
  &lt;/script&gt;
&lt;/body&gt;</code></pre><ul id="cff6bc62-8459-46ed-bf52-edbca86f1b79" class="bulleted-list"><li style="list-style-type:circle">å°†<code>range</code> å¯¹è±¡ä¸­çš„å†…å®¹ç§»é™¤ï¼Œè·å¾—å¯¹åº”çš„æ–‡æ¡£ç‰‡æ®µï¼Œç„¶åå°†å…¶æ·»åŠ åˆ°&lt;body&gt;ä¸­ï¼Œæœ€ç»ˆçš„DOMç»“æ„å¦‚ä¸‹<pre id="ae27dd13-e666-40fb-a051-5e3801ce5466" class="code code-wrap"><code>&lt;body&gt;
  &lt;p&gt;&lt;b&gt;He&lt;/b&gt;rld!&lt;/p&gt;
  &lt;script&gt;...&lt;/script&gt;
	&lt;b&gt;llo&lt;/b&gt; wo
&lt;/body&gt;</code></pre></li></ul></li></ul><figure class="block-color-blue_background callout" style="white-space:pre-wrap;display:flex" id="9955b141-4cf4-4678-a6d4-24deede28165"><div style="font-size:1.5em"><span class="icon">ğŸ’¡</span></div><div style="width:100%">æ³¨æ„ï¼šä¸ºäº†<a href="4%20%E8%8C%83%E5%9B%B4.html"><strong>ä¿æŒDOMç»“æ„å®Œå¥½è€Œæ‹†åˆ†èŠ‚ç‚¹çš„æ“ä½œ</strong></a>ï¼Œå¯¹äºèŒƒå›´è€Œè¨€ï¼Œ<strong>èƒ½å¤Ÿç¡®å®šç¼ºå¤±çš„å¼€å§‹å’Œç»“æŸæ ‡ç­¾</strong>åªæœ‰åœ¨<strong>è°ƒç”¨ä¸Šè¿°ä¸¤ä¸ªæ–¹æ³•</strong>æ—¶æ‰ä¼šå‘ç”Ÿï¼Œåœ¨DOMä¿®æ”¹å‰ï¼ŒåŸå§‹HTMLä¼šä¿æŒä¸å˜</div></figure><h2 id="923f9125-a94d-49cb-971d-ff82103ef573" class="">4.4.3 <code>cloneContents()</code> </h2><ul id="935bb58a-df48-4021-8910-09bc9b308eff" class="bulleted-list"><li style="list-style-type:disc">åˆ›å»ºèŒƒå›´ä¸­çš„å†…å®¹çš„ä¸€ä¸ªå‰¯æœ¬ï¼Œè¿™ä¸ªå‰¯æœ¬ä¹Ÿæ˜¯ä¸€ä¸ªæ–‡æ¡£ç‰‡æ®µï¼Œæ‹¥æœ‰åˆèŒƒå›´ä¸­å†…å®¹ä¸€æ ·çš„DOMç»“æ„ï¼Œå®ƒå’Œ<code>extractContents()</code> çš„åŒºåˆ«åœ¨äºè¿”å›çš„æ–‡æ¡£ç‰‡æ®µå¹¶éå®é™…çš„èŠ‚ç‚¹ï¼Œè€Œæ˜¯å¤åˆ¶çš„å‰¯æœ¬</li></ul><ul id="ab57ec92-3c01-42da-a03f-c3279c7a6d6f" class="bulleted-list"><li style="list-style-type:disc">ä¸€ä¸ªä¾‹å­<pre id="267cc91f-e962-480f-9ff1-d9ed4060b38e" class="code code-wrap"><code>&lt;body&gt;
  &lt;p&gt;&lt;b&gt;Hello&lt;/b&gt; world!&lt;/p&gt;
  &lt;script&gt;
    const range = document.createRange();
    const p = document.querySelector(&quot;p&quot;);
    range.setStart(p.firstElementChild.firstChild, 2);
    range.setEnd(p.lastChild, 3);
    const rangeContents = range.cloneContents();
    console.log(range, range.toString());
    document.body.appendChild(rangeContents);
  &lt;/script&gt;
&lt;/body&gt;</code></pre><ul id="4a83effb-8b40-4d91-92b9-eb5634c1b931" class="bulleted-list"><li style="list-style-type:circle">èŒƒå›´ä¸­å†…å®¹çš„åŸå§‹çš„DOMç»“æ„æ²¡æœ‰æ”¹å˜ï¼Œåªæ˜¯bodyä¸­æ–°å¢äº†å’ŒèŒƒå›´ä¸­å†…å®¹ä¸€æ ·çš„DOMç»“æ„ï¼Œæœ€ç»ˆDOMç»“æ„å¦‚ä¸‹<pre id="e9a671f1-7b5c-4602-9d12-e9a9a8d3658d" class="code code-wrap"><code>&lt;body&gt;
    &lt;p&gt;&lt;b&gt;Hello&lt;/b&gt; world!&lt;/p&gt;
    &lt;script&gt;...&lt;/script&gt;
		&lt;b&gt;llo&lt;/b&gt; wo
&lt;/body&gt;</code></pre></li></ul></li></ul><h1 id="c0e3d511-c608-418e-9b70-d8b7fdc9d610" class="">4.5 èŒƒå›´æ’å…¥ï¼ˆInserting DOM Range Contentï¼‰</h1><h2 id="770e6e16-ed1c-4bf8-a061-06cfe1407828" class="">4.5.1 <code>insertNode()</code></h2><ul id="7d1c8c9b-43cc-4f41-a743-82c2e588dd9c" class="bulleted-list"><li style="list-style-type:disc">ä½¿ç”¨<code>Range.insertNode(node)</code> æ–¹æ³•å¯ä»¥åœ¨èŒƒå›´é€‰åŒºçš„å¼€å§‹ä½ç½®æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹ï¼Œç»§ç»­æ‰©å±•ä¸Šé¢çš„ä¾‹å­<pre id="658fd709-ed26-4ecc-a0d3-74b55116ee6d" class="code code-wrap"><code>&lt;body&gt;
  &lt;p&gt;&lt;b&gt;Hello&lt;/b&gt; world!&lt;/p&gt;
  &lt;script&gt;
    const range = document.createRange();
    const p = document.querySelector(&quot;p&quot;);
    range.setStart(p.firstElementChild.firstChild, 2);
    range.setEnd(p.lastChild, 3);
    const span = document.createElement(&quot;span&quot;);
    span.style.color = &quot;red&quot;;
    span.textContent = &quot;Inserted text&quot;;
    range.insertNode(span);
  &lt;/script&gt;
&lt;/body&gt;</code></pre><ul id="3aa617e6-b642-47b7-8099-caaa6000eff8" class="bulleted-list"><li style="list-style-type:circle"><code>span</code> çœŸå¥½æ’å…¥åˆ°â€Helloâ€ä¸­çš„â€lloâ€ä¹‹å‰ï¼Œä¹Ÿå°±æ˜¯èŒƒå›´é€‰åŒºçš„èµ·å§‹ç‚¹</li></ul><ul id="a96bdacb-5597-4505-aadd-913f729683f6" class="bulleted-list"><li style="list-style-type:circle">åŒæ—¶å…ƒç´ çš„HTMLå¹¶æ²¡æœ‰æ·»åŠ æˆ–åˆ é™¤&lt;b&gt;å…ƒç´ ï¼Œå› ä¸ºæ²¡æœ‰ä½¿ç”¨<a href="4%20%E8%8C%83%E5%9B%B4.html">ä¹‹å‰æåˆ°çš„æ–¹æ³•</a></li></ul><ul id="88165a2f-3a46-4ce8-9793-e16475f29d28" class="bulleted-list"><li style="list-style-type:circle">æœ€ç»ˆçš„DOMç»“æ„å¦‚ä¸‹<pre id="bc18d06f-1d3e-422c-b4ab-e504d35f7ace" class="code code-wrap"><code>&lt;body&gt;
    &lt;p&gt;&lt;b&gt;He&lt;span style=&quot;color: red;&quot;&gt;Inserted text&lt;/span&gt;llo&lt;/b&gt; world!&lt;/p&gt;
    &lt;script&gt;...&lt;/script&gt;
&lt;/body&gt;</code></pre></li></ul></li></ul><ul id="76060235-d069-45a8-8500-54506321c04a" class="bulleted-list"><li style="list-style-type:disc">è¿™ä¸ªæ–¹æ³•çš„åº”ç”¨åœºæ™¯ä¸ºåœ¨å¤–éƒ¨é“¾æ¥æ—è¾¹æ’å…¥ä¸€ä¸ªå°å›¾æ ‡<figure id="b002ecc6-9698-4b57-905d-325d86dc7bfd" class="image"><a href="4%20%E8%8C%83%E5%9B%B4/Untitled.jpeg"><img style="width:432px" src="4%20%E8%8C%83%E5%9B%B4/Untitled.jpeg"/></a></figure></li></ul><p id="d13a4b1e-b657-493a-8220-642d7d10413f" class="">
</p><h2 id="5dba2bc2-2960-4be1-a3ed-817791224a11" class="">4.5.2 <code>surroundContents()</code> </h2><ul id="bd3f6438-9717-43ff-b5da-d91d34f6c9ad" class="bulleted-list"><li style="list-style-type:disc"><code>Range.surroundContents(newParent)</code> å°†<code>Range</code> å¯¹è±¡é€‰å–çš„å†…å®¹ç§»åŠ¨åˆ°ä¸€ä¸ªæ–°çš„èŠ‚ç‚¹<code>newParent</code>ä¸Šï¼Œå¹¶å°†è¿™ä¸ªæ–°èŠ‚ç‚¹æ”¾åˆ°è¿™ä¸ªèŒƒå›´çš„èµ·å§‹å¤„ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæ‰§è¡Œå¦‚ä¸‹æ“ä½œ<ol type="1" id="0bca8749-609b-45c5-9283-7633b674d438" class="numbered-list" start="1"><li>æå‡ºèŒƒå›´ä¸­çš„å†…å®¹</li></ol><ol type="1" id="8661c596-34c3-4c67-8d7a-1a3cd6453a37" class="numbered-list" start="2"><li>åœ¨åŸå§‹æ–‡æ¡£ä¸­èŒƒå›´ä¹‹å‰æ‰€åœ¨çš„ä½ç½®æ’å…¥ç»™å®šçš„èŠ‚ç‚¹</li></ol><ol type="1" id="5d2ecd24-9ea4-4db8-8973-6f51a6412ca3" class="numbered-list" start="3"><li>å°†èŒƒå›´å¯¹åº”æ–‡æ¡£ç‰‡æ®µçš„å†…å®¹æ·»åŠ åˆ°ç»™å®šèŠ‚ç‚¹</li></ol></li></ul><ul id="15c483c5-4957-4883-a56d-ef7bb03eedbc" class="bulleted-list"><li style="list-style-type:disc">è¿™ä¸ªæ–¹æ³•é€‚ç”¨äºåœ¨ç½‘é¡µä¸Šé«˜äº®æ˜¾ç¤ºæŸäº›å…³é”®è¯ï¼Œå¦‚ä¸‹<pre id="c074dbe7-5e02-4858-ad8b-3c84fd1745f8" class="code code-wrap"><code>&lt;body&gt;
  &lt;p&gt;&lt;b&gt;Hello&lt;/b&gt; world!&lt;/p&gt;
  &lt;script&gt;
    const range = document.createRange();
    const p = document.querySelector(&quot;p&quot;);
    range.selectNodeContents(p.firstChild);
    const span = document.createElement(&quot;span&quot;);
    span.style.background = &quot;yellow&quot;;
    range.surroundContents(span);
  &lt;/script&gt;
&lt;/body&gt;</code></pre><ul id="ebd11640-43d0-4abd-8338-a4d51494164d" class="bulleted-list"><li style="list-style-type:circle">DOMç»“æ„å¦‚ä¸‹<pre id="69971081-2524-46fc-bcc3-6bd3479c6b0d" class="code code-wrap"><code>&lt;p&gt;&lt;b&gt;&lt;span style=&quot;background: yellow;&quot;&gt;Hello&lt;/span&gt;&lt;/b&gt; world!&lt;/p&gt;</code></pre></li></ul><ul id="46007e43-100f-4ea5-bb09-1b3230ee7a0c" class="bulleted-list"><li style="list-style-type:circle">ä¸ºäº†æ’å…¥&lt;span&gt;å…ƒç´ ï¼ŒèŒƒå›´ä¸­å¿…é¡»åŒ…å«<strong>å®Œæ•´çš„DOMç»“æ„</strong>ï¼Œå¦‚æœèŒƒå›´ä¸­åŒ…å«éƒ¨åˆ†é€‰æ‹©çš„éæ–‡æœ¬èŠ‚ç‚¹ï¼Œè¿™ä¸ªæ“ä½œä¼šå¤±è´¥å¹¶æŠ¥é”™</li></ul></li></ul><h1 id="647e74c7-391e-4745-b90b-243a41566b83" class="">4.6 èŒƒå›´æŠ˜å (Collapsing a DOM Range)</h1><ul id="f06d5c13-35eb-41b3-b846-5244e3baa356" class="bulleted-list"><li style="list-style-type:disc">å¦‚æœèŒƒå›´ä¸­æ²¡æœ‰é€‰æ‹©æ–‡æ¡£çš„ä»»ä½•éƒ¨åˆ†ï¼Œåˆ™ç§°ä¸º<strong>æŠ˜å ï¼ˆcollapsedï¼‰</strong><ul id="ac65f904-05d6-491c-81e7-9f4aa3820167" class="bulleted-list"><li style="list-style-type:circle"><code>AbstractRange</code> æ¥å£å®šä¹‰äº†ä¸€ä¸ª<code>collapsed</code> å±æ€§è¡¨ç¤ºèŒƒå›´æ˜¯å¦æŠ˜å </li></ul><ul id="3b92bfce-0e2e-4d5f-94b5-7d0da29a55df" class="bulleted-list"><li style="list-style-type:circle">å¯¹èŒƒå›´è€Œè¨€ï¼ŒæŠ˜å åçš„èµ·å§‹å’Œç»“æŸä½ç½®å³å¯ä»¥è½åœ¨èµ·å§‹ç‚¹ï¼Œä¹Ÿå¯ä»¥è½åœ¨ç»“æŸç‚¹ï¼Œå¦‚ä¸‹<figure id="0600d331-78f9-44fe-ae73-15d9420abab0" class="image"><a href="4%20%E8%8C%83%E5%9B%B4/Collapsed.png"><img style="width:720px" src="4%20%E8%8C%83%E5%9B%B4/Collapsed.png"/></a></figure></li></ul></li></ul><ul id="cd80d3e6-b03d-414e-8d6d-01029b6ff75d" class="bulleted-list"><li style="list-style-type:disc">æŠ˜å èŒƒå›´ä½¿ç”¨<code>collapse()</code> æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•æ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼šå¸ƒå°”å€¼ï¼Œè¡¨ç¤ºæŠ˜å åˆ°èŒƒå›´çš„å“ªä¸€ç«¯<ul id="45b02110-1e1c-448d-80df-b1c649a70cf5" class="bulleted-list"><li style="list-style-type:circle"><code>true</code> è¡¨ç¤ºæŠ˜å åˆ°èµ·ç‚¹</li></ul><ul id="03fcb3ce-0235-4ac0-9c42-ca5bb69c1935" class="bulleted-list"><li style="list-style-type:circle"><code>false</code> è¡¨ç¤ºæŠ˜å åˆ°ç»ˆç‚¹</li></ul><pre id="4c67d809-62e1-4d8a-b0dc-63a22c04417f" class="code code-wrap"><code>&lt;body&gt;
  &lt;p&gt;&lt;b&gt;Hello&lt;/b&gt; world!&lt;/p&gt;
  &lt;script&gt;
    const range = document.createRange();
    const p = document.querySelector(&quot;p&quot;);
    range.setStart(p.firstElementChild.firstChild, 2);
    range.setEnd(p.lastChild, 3);
    console.log(range.collapsed); // false
    console.log(range.collapse()); // undefined
    console.log(range.collapsed); // true
  &lt;/script&gt;
&lt;/body&gt;</code></pre></li></ul><ul id="b9d7a860-dd83-4b75-8684-08f6b9a42e33" class="bulleted-list"><li style="list-style-type:disc"><code>collapsed</code> å±æ€§é™¤äº†å¯ä»¥è¡¨æ˜èŒƒå›´æ˜¯å¦è¢«æŠ˜å å¤–ï¼Œè¿˜å¯ä»¥ç»“åˆèŒƒå›´çš„è¾¹ç•Œå…³ç³»åˆ¤æ–­ä¸¤ä¸ªèŠ‚ç‚¹æ˜¯å¦æ˜¯é‚»å±…èŠ‚ç‚¹<ul id="6339ec31-a065-479f-b9bf-cbb35e32dba1" class="bulleted-list"><li style="list-style-type:circle">å…·ä½“æ“ä½œå°±æ˜¯è·å–ä¸¤ä¸ªèŠ‚ç‚¹çš„å·¦å³è¾¹ç•Œï¼Œä¸¤ä¸ªèŠ‚ç‚¹çš„ç›¸å¯¹çš„å·¦å³è¾¹ç•Œä½œä¸ºèŒƒå›´çš„èµ·å§‹å’Œç»“æŸç‚¹ï¼Œå¦‚æœå…¶ä¸­ä¸€ä¸ªèŒƒå›´æ˜¯æŠ˜å çš„ï¼Œé‚£ä¹ˆè¿™ä¸¤ä¸ªèŠ‚ç‚¹ä¸ºé‚»å±…èŠ‚ç‚¹</li></ul><pre id="cc26712c-06ea-45dc-a23a-2272ac002dc7" class="code code-wrap"><code>&lt;body&gt;
    &lt;p id=&quot;p1&quot;&gt;Hello&lt;/p&gt;&lt;p id=&quot;p2&quot;&gt;world&lt;/p&gt;
&lt;/body&gt;
&lt;script&gt;
  const p1 = document.querySelector(&quot;#p1&quot;);
  const p2 = document.querySelector(&quot;#p2&quot;);
  const range1 = document.createRange();
  const range2 = document.createRange();
  range1.setStartAfter(p1);
  range1.setEndBefore(p2);
	range2.setStartBefore(p1);
  range2.setEndAfter(p2);
  if (range1.collapsed || range2.collapsed) {
    console.log(&quot;p1å’Œp2ç›¸é‚»&quot;); // p1å’Œp2ç›¸é‚»
  }
&lt;/script&gt;</code></pre></li></ul><h1 id="6536b907-435f-4b5b-bc9e-47039fd99cfb" class="">4.7 èŒƒå›´æ¯”è¾ƒ(Comparing DOM Ranges)</h1><ul id="572fc0c9-7e2f-4163-ac44-67cf2e376daa" class="bulleted-list"><li style="list-style-type:disc">æ¯”è¾ƒèŒƒå›´ä¹‹é—´æ˜¯å¦å­˜åœ¨å…¬å…±çš„è¾¹ç•Œï¼ˆèµ·ç‚¹æˆ–ç»ˆç‚¹ï¼‰å¯ä»¥ä½¿ç”¨<code>compareBoundaryPoints(how, sourceRange)</code> æ–¹æ³•ï¼Œå®ƒæ¥æ”¶ä¸¤ä¸ªå‚æ•°<ul id="10362150-2e99-4d8b-af0f-1fe5cce06888" class="bulleted-list"><li style="list-style-type:circle"><code>how</code> ï¼šæ¯”è¾ƒçš„æ–¹å¼ï¼Œæ˜¯ä¸€ä¸ªå¸¸é‡å€¼ï¼Œ<code>Range</code> æ¥å£å®šä¹‰äº†ç§å¸¸é‡å€¼å¯¹åº”4ç§æ¯”è¾ƒæ–¹å¼<ul id="2c09aa04-4c45-4a27-b35b-d28e1b17549b" class="bulleted-list"><li style="list-style-type:square"><code>Range.START_TO_START</code> : 0ï¼Œæ¯”è¾ƒä¸¤ä¸ªèŒƒå›´ï¼ˆè°ƒç”¨è€…å’Œ<code>sourceRange</code>ï¼‰çš„èµ·å§‹ç‚¹</li></ul><ul id="435bb3c6-957a-4d75-887d-4c565987066b" class="bulleted-list"><li style="list-style-type:square"><code>Range.START_TO_END</code> : 1ï¼Œæ¯”è¾ƒ<code>sourceRange</code> çš„èµ·å§‹ç‚¹å’Œè°ƒç”¨è€…çš„ç»“æŸç‚¹</li></ul><ul id="0e3793d9-8877-4ae8-91f8-ee48bd5511f5" class="bulleted-list"><li style="list-style-type:square"><code>Range.END_TO_END</code> : 2ï¼Œæ¯”è¾ƒä¸¤ä¸ªèŒƒå›´ï¼ˆè°ƒç”¨è€…å’Œ<code>sourceRange</code>ï¼‰çš„ç»“æŸç‚¹</li></ul><ul id="d979513a-02c4-4d98-8174-5a7a35fa5454" class="bulleted-list"><li style="list-style-type:square"><code>Range.END_TO_START</code> : 3ï¼Œæ¯”è¾ƒ<code>sourceRange</code> çš„ç»“æŸç‚¹å’Œè°ƒç”¨è€…çš„èµ·å§‹ç‚¹</li></ul></li></ul><ul id="13081eb3-01bc-41c5-8d80-1b8e8de409f8" class="bulleted-list"><li style="list-style-type:circle"><code>sourceRange</code> ï¼šè¢«æ¯”è¾ƒçš„èŒƒå›´</li></ul><ul id="a4e6dc38-36d5-4126-8630-b9bf41b07219" class="bulleted-list"><li style="list-style-type:circle">è¿”å›å€¼ï¼Œä¸€ä¸ªæ•°å­—ï¼Œå¯ä»¥æ˜¯-1ï¼Œ0ï¼Œ1åˆ†åˆ«è¡¨ç¤ºä¹‹å‰ï¼Œç­‰äºï¼Œä¹‹å<ul id="fef1de8e-c99c-47cd-bc3a-c5e80b2f00f4" class="bulleted-list"><li style="list-style-type:square">-1ï¼šè°ƒç”¨è€…çš„è¾¹ç•Œåœ¨<code>sourceRange</code> ä¹‹å‰</li></ul><ul id="8b9ed669-9d68-4777-9ac0-7ba3bbfac466" class="bulleted-list"><li style="list-style-type:square">0ï¼šè°ƒç”¨è€…çš„è¾¹ç•Œå’Œ<code>sourceRange</code> ç›¸åŒ</li></ul><ul id="a4b5e63c-6f99-4a74-886a-264fddf2e71d" class="bulleted-list"><li style="list-style-type:square">1ï¼šè°ƒç”¨è€…çš„è¾¹ç•Œåœ¨<code>sourceRange</code> ä¹‹å</li></ul></li></ul></li></ul><ul id="30556901-0d03-422c-8625-ad226d732657" class="bulleted-list"><li style="list-style-type:disc">ä¾‹å­<pre id="34474dbe-1e40-49ce-a940-116da0b2e7b2" class="code code-wrap"><code>&lt;body&gt;
  &lt;p&gt;&lt;b&gt;Hello&lt;/b&gt; world!&lt;/p&gt;
  &lt;script&gt;
    const range1 = document.createRange();
    const range2 = document.createRange();
    const p = document.querySelector(&quot;p&quot;);
    range1.selectNodeContents(p);
    range2.selectNode(p.firstElementChild);
    console.log(range1.compareBoundaryPoints(Range.START_TO_START, range2)); // 0
    console.log(range1.compareBoundaryPoints(Range.END_TO_END, range2)); // 1
    console.log(range1.compareBoundaryPoints(Range.END_TO_START, range2)); // -1 
		// range2çš„endå’Œrange1çš„startæ¯”
  &lt;/script&gt;
&lt;/body&gt;</code></pre><figure id="08d2b057-05d4-4a9a-98f7-a770a8a93317" class="image"><a href="4%20%E8%8C%83%E5%9B%B4/Range.compareBoundaryPoints.png"><img style="width:900px" src="4%20%E8%8C%83%E5%9B%B4/Range.compareBoundaryPoints.png"/></a></figure></li></ul><h1 id="19045a7a-72e7-4e15-bcd2-fe7dacbe2eaa" class="">4.8 å¤åˆ¶èŒƒå›´(Cloning DOM Ranges)</h1><ul id="87fb7f21-8ca4-414e-86e7-122ed1451ebc" class="bulleted-list"><li style="list-style-type:disc">è°ƒç”¨èŒƒå›´çš„<code>cloneRange()</code>æ–¹æ³•å¯ä»¥å¤åˆ¶èŒƒå›´ï¼Œè¿™ä¸ªæ–¹æ³•ä¼šåˆ›å»ºè°ƒç”¨å®ƒçš„èŒƒå›´çš„å‰¯æœ¬<pre id="9ab2339a-0ee1-44e0-a1a7-d8e8c2ca9cd3" class="code code-wrap"><code>let rangeCopy = range.cloneRange();</code></pre></li></ul><ul id="03217ab2-c899-42e5-b648-cc887a98722d" class="bulleted-list"><li style="list-style-type:disc">æ–°èŒƒå›´åŒ…å«ä¸åŸå§‹èŒƒå›´ä¸€æ ·çš„å±æ€§ï¼Œä¿®æ”¹å…¶è¾¹ç•Œç‚¹ä¸ä¼šå½±å“åŸå§‹èŒƒå›´</li></ul><h1 id="29167558-e292-4ece-a65e-e25f308d6132" class="">ğŸš«4.9 æ¸…ç†(Cleanup)</h1><ul id="f57cee08-262a-4d75-952d-76cc3d051b8d" class="bulleted-list"><li style="list-style-type:disc">åœ¨ä½¿ç”¨å®ŒèŒƒå›´åï¼Œæœ€å¥½è°ƒç”¨<code>detach()</code> æ–¹æ³•æŠŠèŒƒå›´ä»åˆ›å»ºå®ƒçš„æ–‡æ¡£å‰¥ç¦»ï¼Œè°ƒç”¨å®Œ<code>detach()</code> åï¼Œå°±å¯ä»¥æ”¾è§£é™¤å¯¹èŒƒå›´çš„å¼•ç”¨ï¼Œä»¥ä¾¿åƒåœ¾å›æ”¶ç¨‹åºé‡Šæ”¾å®ƒæ‰€å ç”¨çš„å†…å­˜ï¼Œå¦‚ä¸‹<pre id="3729da49-9868-44ae-b293-74c66d1e2389" class="code code-wrap"><code>range.detach();
range = null;</code></pre></li></ul><ul id="d88e44d4-55c3-4bd2-a266-ecab6d5ebb83" class="bulleted-list"><li style="list-style-type:disc">æ³¨æ„ï¼Œåœ¨è¿‡å»çš„è¯­å¢ƒä¸­<code>detach()</code> è¿˜æ˜¯æœ‰ç”¨çš„ï¼Œæ‰€ä»¥ã€ŠJavaScripté«˜çº§ç¨‹åºè®¾è®¡ï¼ˆç¬¬4ç‰ˆï¼‰ã€‹ä¼šæœ‰å¦‚ä¸Šçš„è¯´æ³•ï¼Œä½†æ˜¯ç›®å‰ï¼ˆ2023å¹´2æœˆ3æ—¥ï¼‰ï¼Œæ‰§è¡Œæ”¹æ–¹æ³•<a href="https://dom.spec.whatwg.org/#dom-range-detach">ä¸ä¼šæ‰§è¡Œä»»ä½•æ“ä½œ</a><p id="55975165-6e4a-49a0-bf63-501fd8c7e3e3" class=""><a href="4%20%E8%8C%83%E5%9B%B4.html">detach() ï¼Œdetach æœ‰åˆ†ç¦»ï¼Œè„±ç¦»ä¹‹æ„ï¼ŒåŸæœ¬æ˜¯ç”¨æ¥æ— æ•ˆåŒ–èŒƒå›´çš„ï¼Œç°åœ¨å·²ç»ç§»é™¤è¿™ä¸ªæ–¹æ³•çš„åŠŸèƒ½ï¼Œä»…ä¸ºäº†ä¿å­˜å…¼å®¹æ€§è€Œç•™å­˜ï¼Œè°ƒç”¨å®ƒä¸ä¼šæ‰§è¡Œä»»ä½•æ“ä½œ</a> </p></li></ul><p id="557c90af-eef8-4916-915b-87acda0b58b7" class="">
</p></div></div><p id="33b8d485-1bcc-4957-9599-16e6b01f0c37" class="">
</p></div></article></body></html>